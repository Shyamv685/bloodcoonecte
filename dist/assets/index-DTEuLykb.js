function zy(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fp={exports:{}},la={},pp={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=Symbol.for("react.element"),$y=Symbol.for("react.portal"),Fy=Symbol.for("react.fragment"),Wy=Symbol.for("react.strict_mode"),qy=Symbol.for("react.profiler"),Hy=Symbol.for("react.provider"),Zy=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Ky=Symbol.for("react.suspense"),Gy=Symbol.for("react.memo"),Jy=Symbol.for("react.lazy"),wh=Symbol.iterator;function Qy(e){return e===null||typeof e!="object"?null:(e=wh&&e[wh]||e["@@iterator"],typeof e=="function"?e:null)}var mp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gp=Object.assign,vp={};function hi(e,t,n){this.props=e,this.context=t,this.refs=vp,this.updater=n||mp}hi.prototype.isReactComponent={};hi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yp(){}yp.prototype=hi.prototype;function ic(e,t,n){this.props=e,this.context=t,this.refs=vp,this.updater=n||mp}var sc=ic.prototype=new yp;sc.constructor=ic;gp(sc,hi.prototype);sc.isPureReactComponent=!0;var bh=Array.isArray,_p=Object.prototype.hasOwnProperty,oc={current:null},xp={key:!0,ref:!0,__self:!0,__source:!0};function wp(e,t,n){var i,s={},a=null,l=null;if(t!=null)for(i in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)_p.call(t,i)&&!xp.hasOwnProperty(i)&&(s[i]=t[i]);var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){for(var h=Array(d),m=0;m<d;m++)h[m]=arguments[m+2];s.children=h}if(e&&e.defaultProps)for(i in d=e.defaultProps,d)s[i]===void 0&&(s[i]=d[i]);return{$$typeof:js,type:e,key:a,ref:l,props:s,_owner:oc.current}}function Yy(e,t){return{$$typeof:js,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ac(e){return typeof e=="object"&&e!==null&&e.$$typeof===js}function Xy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sh=/\/+/g;function dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xy(""+e.key):t.toString(36)}function wo(e,t,n,i,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case js:case $y:l=!0}}if(l)return l=e,s=s(l),e=i===""?"."+dl(l,0):i,bh(s)?(n="",e!=null&&(n=e.replace(Sh,"$&/")+"/"),wo(s,t,n,"",function(m){return m})):s!=null&&(ac(s)&&(s=Yy(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Sh,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=i===""?".":i+":",bh(e))for(var d=0;d<e.length;d++){a=e[d];var h=i+dl(a,d);l+=wo(a,t,n,h,s)}else if(h=Qy(e),typeof h=="function")for(e=h.call(e),d=0;!(a=e.next()).done;)a=a.value,h=i+dl(a,d++),l+=wo(a,t,n,h,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ys(e,t,n){if(e==null)return e;var i=[],s=0;return wo(e,i,"","",function(a){return t.call(n,a,s++)}),i}function e_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},bo={transition:null},t_={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:bo,ReactCurrentOwner:oc};function bp(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Ys,forEach:function(e,t,n){Ys(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ys(e,function(){t++}),t},toArray:function(e){return Ys(e,function(t){return t})||[]},only:function(e){if(!ac(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=hi;te.Fragment=Fy;te.Profiler=qy;te.PureComponent=ic;te.StrictMode=Wy;te.Suspense=Ky;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t_;te.act=bp;te.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=gp({},e.props),s=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=oc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)_p.call(t,h)&&!xp.hasOwnProperty(h)&&(i[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){d=Array(h);for(var m=0;m<h;m++)d[m]=arguments[m+2];i.children=d}return{$$typeof:js,type:e.type,key:s,ref:a,props:i,_owner:l}};te.createContext=function(e){return e={$$typeof:Zy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hy,_context:e},e.Consumer=e};te.createElement=wp;te.createFactory=function(e){var t=wp.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:Vy,render:e}};te.isValidElement=ac;te.lazy=function(e){return{$$typeof:Jy,_payload:{_status:-1,_result:e},_init:e_}};te.memo=function(e,t){return{$$typeof:Gy,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=bo.transition;bo.transition={};try{e()}finally{bo.transition=t}};te.unstable_act=bp;te.useCallback=function(e,t){return tt.current.useCallback(e,t)};te.useContext=function(e){return tt.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};te.useEffect=function(e,t){return tt.current.useEffect(e,t)};te.useId=function(){return tt.current.useId()};te.useImperativeHandle=function(e,t,n){return tt.current.useImperativeHandle(e,t,n)};te.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return tt.current.useMemo(e,t)};te.useReducer=function(e,t,n){return tt.current.useReducer(e,t,n)};te.useRef=function(e){return tt.current.useRef(e)};te.useState=function(e){return tt.current.useState(e)};te.useSyncExternalStore=function(e,t,n){return tt.current.useSyncExternalStore(e,t,n)};te.useTransition=function(){return tt.current.useTransition()};te.version="18.3.1";pp.exports=te;var P=pp.exports;const ii=Uy(P),n_=zy({__proto__:null,default:ii},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_=P,i_=Symbol.for("react.element"),s_=Symbol.for("react.fragment"),o_=Object.prototype.hasOwnProperty,a_=r_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l_={key:!0,ref:!0,__self:!0,__source:!0};function Sp(e,t,n){var i,s={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)o_.call(t,i)&&!l_.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:i_,type:e,key:a,ref:l,props:s,_owner:a_.current}}la.Fragment=s_;la.jsx=Sp;la.jsxs=Sp;fp.exports=la;var c=fp.exports,Kl={},kp={exports:{}},_t={},Ep={exports:{}},jp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,G){var B=R.length;R.push(G);e:for(;0<B;){var K=B-1>>>1,ie=R[K];if(0<s(ie,G))R[K]=G,R[B]=ie,B=K;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var G=R[0],B=R.pop();if(B!==G){R[0]=B;e:for(var K=0,ie=R.length,Oe=ie>>>1;K<Oe;){var ue=2*(K+1)-1,oe=R[ue],J=ue+1,rt=R[J];if(0>s(oe,B))J<ie&&0>s(rt,oe)?(R[K]=rt,R[J]=B,K=J):(R[K]=oe,R[ue]=B,K=ue);else if(J<ie&&0>s(rt,B))R[K]=rt,R[J]=B,K=J;else break e}}return G}function s(R,G){var B=R.sortIndex-G.sortIndex;return B!==0?B:R.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var h=[],m=[],g=1,y=null,x=3,b=!1,k=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var G=n(m);G!==null;){if(G.callback===null)i(m);else if(G.startTime<=R)i(m),G.sortIndex=G.expirationTime,t(h,G);else break;G=n(m)}}function N(R){if(E=!1,w(R),!k)if(n(h)!==null)k=!0,Ue(I);else{var G=n(m);G!==null&&en(N,G.startTime-R)}}function I(R,G){k=!1,E&&(E=!1,S(F),F=-1),b=!0;var B=x;try{for(w(G),y=n(h);y!==null&&(!(y.expirationTime>G)||R&&!ce());){var K=y.callback;if(typeof K=="function"){y.callback=null,x=y.priorityLevel;var ie=K(y.expirationTime<=G);G=e.unstable_now(),typeof ie=="function"?y.callback=ie:y===n(h)&&i(h),w(G)}else i(h);y=n(h)}if(y!==null)var Oe=!0;else{var ue=n(m);ue!==null&&en(N,ue.startTime-G),Oe=!1}return Oe}finally{y=null,x=B,b=!1}}var M=!1,z=null,F=-1,ne=5,X=-1;function ce(){return!(e.unstable_now()-X<ne)}function Me(){if(z!==null){var R=e.unstable_now();X=R;var G=!0;try{G=z(!0,R)}finally{G?Hn():(M=!1,z=null)}}else M=!1}var Hn;if(typeof _=="function")Hn=function(){_(Me)};else if(typeof MessageChannel<"u"){var wt=new MessageChannel,Ca=wt.port2;wt.port1.onmessage=Me,Hn=function(){Ca.postMessage(null)}}else Hn=function(){C(Me,0)};function Ue(R){z=R,M||(M=!0,Hn())}function en(R,G){F=C(function(){R(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){k||b||(k=!0,Ue(I))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(R){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var B=x;x=G;try{return R()}finally{x=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,G){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=x;x=R;try{return G()}finally{x=B}},e.unstable_scheduleCallback=function(R,G,B){var K=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,R){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=B+ie,R={id:g++,callback:G,priorityLevel:R,startTime:B,expirationTime:ie,sortIndex:-1},B>K?(R.sortIndex=B,t(m,R),n(h)===null&&R===n(m)&&(E?(S(F),F=-1):E=!0,en(N,B-K))):(R.sortIndex=ie,t(h,R),k||b||(k=!0,Ue(I))),R},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(R){var G=x;return function(){var B=x;x=G;try{return R.apply(this,arguments)}finally{x=B}}}})(jp);Ep.exports=jp;var u_=Ep.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_=P,yt=u_;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tp=new Set,ts={};function mr(e,t){si(e,t),si(e+"Capture",t)}function si(e,t){for(ts[e]=t,e=0;e<t.length;e++)Tp.add(t[e])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gl=Object.prototype.hasOwnProperty,d_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kh={},Eh={};function h_(e){return Gl.call(Eh,e)?!0:Gl.call(kh,e)?!1:d_.test(e)?Eh[e]=!0:(kh[e]=!0,!1)}function f_(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function p_(e,t,n,i){if(t===null||typeof t>"u"||f_(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nt(e,t,n,i,s,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ze[t]=new nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var lc=/[\-:]([a-z])/g;function uc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lc,uc);Ze[t]=new nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lc,uc);Ze[t]=new nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lc,uc);Ze[t]=new nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new nt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function cc(e,t,n,i){var s=Ze.hasOwnProperty(t)?Ze[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(p_(t,n,s,i)&&(n=null),i||s===null?h_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var gn=c_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xs=Symbol.for("react.element"),zr=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),dc=Symbol.for("react.strict_mode"),Jl=Symbol.for("react.profiler"),Np=Symbol.for("react.provider"),Pp=Symbol.for("react.context"),hc=Symbol.for("react.forward_ref"),Ql=Symbol.for("react.suspense"),Yl=Symbol.for("react.suspense_list"),fc=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),Cp=Symbol.for("react.offscreen"),jh=Symbol.iterator;function Li(e){return e===null||typeof e!="object"?null:(e=jh&&e[jh]||e["@@iterator"],typeof e=="function"?e:null)}var we=Object.assign,hl;function Bi(e){if(hl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);hl=t&&t[1]||""}return`
`+hl+e}var fl=!1;function pl(e,t){if(!e||fl)return"";fl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var i=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){i=m}e.call(t.prototype)}else{try{throw Error()}catch(m){i=m}e()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),a=i.stack.split(`
`),l=s.length-1,d=a.length-1;1<=l&&0<=d&&s[l]!==a[d];)d--;for(;1<=l&&0<=d;l--,d--)if(s[l]!==a[d]){if(l!==1||d!==1)do if(l--,d--,0>d||s[l]!==a[d]){var h=`
`+s[l].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=l&&0<=d);break}}}finally{fl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bi(e):""}function m_(e){switch(e.tag){case 5:return Bi(e.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 2:case 15:return e=pl(e.type,!1),e;case 11:return e=pl(e.type.render,!1),e;case 1:return e=pl(e.type,!0),e;default:return""}}function Xl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Br:return"Fragment";case zr:return"Portal";case Jl:return"Profiler";case dc:return"StrictMode";case Ql:return"Suspense";case Yl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pp:return(e.displayName||"Context")+".Consumer";case Np:return(e._context.displayName||"Context")+".Provider";case hc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fc:return t=e.displayName||null,t!==null?t:Xl(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return Xl(e(t))}catch{}}return null}function g_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xl(t);case 8:return t===dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Un(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function v_(e){var t=Lp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function eo(e){e._valueTracker||(e._valueTracker=v_(e))}function Op(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Lp(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ao(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function eu(e,t){var n=t.checked;return we({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Th(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Un(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rp(e,t){t=t.checked,t!=null&&cc(e,"checked",t,!1)}function tu(e,t){Rp(e,t);var n=Un(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nu(e,t.type,n):t.hasOwnProperty("defaultValue")&&nu(e,t.type,Un(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function nu(e,t,n){(t!=="number"||Ao(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ui=Array.isArray;function Qr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Un(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ru(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return we({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ph(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Ui(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Un(n)}}function Ap(e,t){var n=Un(t.value),i=Un(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Ch(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ip(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ip(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var to,Mp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(to=to||document.createElement("div"),to.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=to.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ns(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y_=["Webkit","ms","Moz","O"];Object.keys(qi).forEach(function(e){y_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qi[t]=qi[e]})});function Dp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||qi.hasOwnProperty(e)&&qi[e]?(""+t).trim():t+"px"}function zp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Dp(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var __=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(e,t){if(t){if(__[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function ou(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=null;function pc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lu=null,Yr=null,Xr=null;function Lh(e){if(e=Ps(e)){if(typeof lu!="function")throw Error(D(280));var t=e.stateNode;t&&(t=fa(t),lu(e.stateNode,e.type,t))}}function Bp(e){Yr?Xr?Xr.push(e):Xr=[e]:Yr=e}function Up(){if(Yr){var e=Yr,t=Xr;if(Xr=Yr=null,Lh(e),t)for(e=0;e<t.length;e++)Lh(t[e])}}function $p(e,t){return e(t)}function Fp(){}var ml=!1;function Wp(e,t,n){if(ml)return e(t,n);ml=!0;try{return $p(e,t,n)}finally{ml=!1,(Yr!==null||Xr!==null)&&(Fp(),Up())}}function rs(e,t){var n=e.stateNode;if(n===null)return null;var i=fa(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var uu=!1;if(hn)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){uu=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{uu=!1}function x_(e,t,n,i,s,a,l,d,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(g){this.onError(g)}}var Hi=!1,Io=null,Mo=!1,cu=null,w_={onError:function(e){Hi=!0,Io=e}};function b_(e,t,n,i,s,a,l,d,h){Hi=!1,Io=null,x_.apply(w_,arguments)}function S_(e,t,n,i,s,a,l,d,h){if(b_.apply(this,arguments),Hi){if(Hi){var m=Io;Hi=!1,Io=null}else throw Error(D(198));Mo||(Mo=!0,cu=m)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Oh(e){if(gr(e)!==e)throw Error(D(188))}function k_(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Oh(s),e;if(a===i)return Oh(s),t;a=a.sibling}throw Error(D(188))}if(n.return!==i.return)n=s,i=a;else{for(var l=!1,d=s.child;d;){if(d===n){l=!0,n=s,i=a;break}if(d===i){l=!0,i=s,n=a;break}d=d.sibling}if(!l){for(d=a.child;d;){if(d===n){l=!0,n=a,i=s;break}if(d===i){l=!0,i=a,n=s;break}d=d.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==i)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Hp(e){return e=k_(e),e!==null?Zp(e):null}function Zp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zp(e);if(t!==null)return t;e=e.sibling}return null}var Vp=yt.unstable_scheduleCallback,Rh=yt.unstable_cancelCallback,E_=yt.unstable_shouldYield,j_=yt.unstable_requestPaint,Ee=yt.unstable_now,T_=yt.unstable_getCurrentPriorityLevel,mc=yt.unstable_ImmediatePriority,Kp=yt.unstable_UserBlockingPriority,Do=yt.unstable_NormalPriority,N_=yt.unstable_LowPriority,Gp=yt.unstable_IdlePriority,ua=null,Qt=null;function P_(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(ua,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:O_,C_=Math.log,L_=Math.LN2;function O_(e){return e>>>=0,e===0?32:31-(C_(e)/L_|0)|0}var no=64,ro=4194304;function $i(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zo(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var d=l&~s;d!==0?i=$i(d):(a&=l,a!==0&&(i=$i(a)))}else l=n&~s,l!==0?i=$i(l):a!==0&&(i=$i(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Ut(t),s=1<<n,i|=e[n],t&=~s;return i}function R_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A_(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ut(a),d=1<<l,h=s[l];h===-1?(!(d&n)||d&i)&&(s[l]=R_(d,t)):h<=t&&(e.expiredLanes|=d),a&=~d}}function du(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jp(){var e=no;return no<<=1,!(no&4194240)&&(no=64),e}function gl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ts(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=n}function I_(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ut(n),a=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~a}}function gc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ut(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var le=0;function Qp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yp,vc,Xp,em,tm,hu=!1,io=[],Ln=null,On=null,Rn=null,is=new Map,ss=new Map,En=[],M_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ah(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":is.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(t.pointerId)}}function Ri(e,t,n,i,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Ps(t),t!==null&&vc(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function D_(e,t,n,i,s){switch(t){case"focusin":return Ln=Ri(Ln,e,t,n,i,s),!0;case"dragenter":return On=Ri(On,e,t,n,i,s),!0;case"mouseover":return Rn=Ri(Rn,e,t,n,i,s),!0;case"pointerover":var a=s.pointerId;return is.set(a,Ri(is.get(a)||null,e,t,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,ss.set(a,Ri(ss.get(a)||null,e,t,n,i,s)),!0}return!1}function nm(e){var t=ir(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=qp(n),t!==null){e.blockedOn=t,tm(e.priority,function(){Xp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function So(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);au=i,n.target.dispatchEvent(i),au=null}else return t=Ps(n),t!==null&&vc(t),e.blockedOn=n,!1;t.shift()}return!0}function Ih(e,t,n){So(e)&&n.delete(t)}function z_(){hu=!1,Ln!==null&&So(Ln)&&(Ln=null),On!==null&&So(On)&&(On=null),Rn!==null&&So(Rn)&&(Rn=null),is.forEach(Ih),ss.forEach(Ih)}function Ai(e,t){e.blockedOn===t&&(e.blockedOn=null,hu||(hu=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,z_)))}function os(e){function t(s){return Ai(s,e)}if(0<io.length){Ai(io[0],e);for(var n=1;n<io.length;n++){var i=io[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Ln!==null&&Ai(Ln,e),On!==null&&Ai(On,e),Rn!==null&&Ai(Rn,e),is.forEach(t),ss.forEach(t),n=0;n<En.length;n++)i=En[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)nm(n),n.blockedOn===null&&En.shift()}var ei=gn.ReactCurrentBatchConfig,Bo=!0;function B_(e,t,n,i){var s=le,a=ei.transition;ei.transition=null;try{le=1,yc(e,t,n,i)}finally{le=s,ei.transition=a}}function U_(e,t,n,i){var s=le,a=ei.transition;ei.transition=null;try{le=4,yc(e,t,n,i)}finally{le=s,ei.transition=a}}function yc(e,t,n,i){if(Bo){var s=fu(e,t,n,i);if(s===null)jl(e,t,i,Uo,n),Ah(e,i);else if(D_(s,e,t,n,i))i.stopPropagation();else if(Ah(e,i),t&4&&-1<M_.indexOf(e)){for(;s!==null;){var a=Ps(s);if(a!==null&&Yp(a),a=fu(e,t,n,i),a===null&&jl(e,t,i,Uo,n),a===s)break;s=a}s!==null&&i.stopPropagation()}else jl(e,t,i,null,n)}}var Uo=null;function fu(e,t,n,i){if(Uo=null,e=pc(i),e=ir(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Uo=e,null}function rm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T_()){case mc:return 1;case Kp:return 4;case Do:case N_:return 16;case Gp:return 536870912;default:return 16}default:return 16}}var Nn=null,_c=null,ko=null;function im(){if(ko)return ko;var e,t=_c,n=t.length,i,s="value"in Nn?Nn.value:Nn.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(i=1;i<=l&&t[n-i]===s[a-i];i++);return ko=s.slice(e,1<i?1-i:void 0)}function Eo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function so(){return!0}function Mh(){return!1}function xt(e){function t(n,i,s,a,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?so:Mh,this.isPropagationStopped=Mh,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=so)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=so)},persist:function(){},isPersistent:so}),t}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xc=xt(fi),Ns=we({},fi,{view:0,detail:0}),$_=xt(Ns),vl,yl,Ii,ca=we({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ii&&(Ii&&e.type==="mousemove"?(vl=e.screenX-Ii.screenX,yl=e.screenY-Ii.screenY):yl=vl=0,Ii=e),vl)},movementY:function(e){return"movementY"in e?e.movementY:yl}}),Dh=xt(ca),F_=we({},ca,{dataTransfer:0}),W_=xt(F_),q_=we({},Ns,{relatedTarget:0}),_l=xt(q_),H_=we({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Z_=xt(H_),V_=we({},fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),K_=xt(V_),G_=we({},fi,{data:0}),zh=xt(G_),J_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Y_[e])?!!t[e]:!1}function wc(){return X_}var e0=we({},Ns,{key:function(e){if(e.key){var t=J_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Eo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Q_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(e){return e.type==="keypress"?Eo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t0=xt(e0),n0=we({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bh=xt(n0),r0=we({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),i0=xt(r0),s0=we({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),o0=xt(s0),a0=we({},ca,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),l0=xt(a0),u0=[9,13,27,32],bc=hn&&"CompositionEvent"in window,Zi=null;hn&&"documentMode"in document&&(Zi=document.documentMode);var c0=hn&&"TextEvent"in window&&!Zi,sm=hn&&(!bc||Zi&&8<Zi&&11>=Zi),Uh=" ",$h=!1;function om(e,t){switch(e){case"keyup":return u0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function am(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function d0(e,t){switch(e){case"compositionend":return am(t);case"keypress":return t.which!==32?null:($h=!0,Uh);case"textInput":return e=t.data,e===Uh&&$h?null:e;default:return null}}function h0(e,t){if(Ur)return e==="compositionend"||!bc&&om(e,t)?(e=im(),ko=_c=Nn=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sm&&t.locale!=="ko"?null:t.data;default:return null}}var f0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!f0[e.type]:t==="textarea"}function lm(e,t,n,i){Bp(i),t=$o(t,"onChange"),0<t.length&&(n=new xc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Vi=null,as=null;function p0(e){_m(e,0)}function da(e){var t=Wr(e);if(Op(t))return e}function m0(e,t){if(e==="change")return t}var um=!1;if(hn){var xl;if(hn){var wl="oninput"in document;if(!wl){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),wl=typeof Wh.oninput=="function"}xl=wl}else xl=!1;um=xl&&(!document.documentMode||9<document.documentMode)}function qh(){Vi&&(Vi.detachEvent("onpropertychange",cm),as=Vi=null)}function cm(e){if(e.propertyName==="value"&&da(as)){var t=[];lm(t,as,e,pc(e)),Wp(p0,t)}}function g0(e,t,n){e==="focusin"?(qh(),Vi=t,as=n,Vi.attachEvent("onpropertychange",cm)):e==="focusout"&&qh()}function v0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return da(as)}function y0(e,t){if(e==="click")return da(t)}function _0(e,t){if(e==="input"||e==="change")return da(t)}function x0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:x0;function ls(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Gl.call(t,s)||!Ft(e[s],t[s]))return!1}return!0}function Hh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zh(e,t){var n=Hh(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hh(n)}}function dm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hm(){for(var e=window,t=Ao();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ao(e.document)}return t}function Sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w0(e){var t=hm(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dm(n.ownerDocument.documentElement,n)){if(i!==null&&Sc(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!e.extend&&a>i&&(s=i,i=a,a=s),s=Zh(n,a);var l=Zh(n,i);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var b0=hn&&"documentMode"in document&&11>=document.documentMode,$r=null,pu=null,Ki=null,mu=!1;function Vh(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mu||$r==null||$r!==Ao(i)||(i=$r,"selectionStart"in i&&Sc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ki&&ls(Ki,i)||(Ki=i,i=$o(pu,"onSelect"),0<i.length&&(t=new xc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=$r)))}function oo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fr={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionend:oo("Transition","TransitionEnd")},bl={},fm={};hn&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function ha(e){if(bl[e])return bl[e];if(!Fr[e])return e;var t=Fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in fm)return bl[e]=t[n];return e}var pm=ha("animationend"),mm=ha("animationiteration"),gm=ha("animationstart"),vm=ha("transitionend"),ym=new Map,Kh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(e,t){ym.set(e,t),mr(t,[e])}for(var Sl=0;Sl<Kh.length;Sl++){var kl=Kh[Sl],S0=kl.toLowerCase(),k0=kl[0].toUpperCase()+kl.slice(1);Fn(S0,"on"+k0)}Fn(pm,"onAnimationEnd");Fn(mm,"onAnimationIteration");Fn(gm,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(vm,"onTransitionEnd");si("onMouseEnter",["mouseout","mouseover"]);si("onMouseLeave",["mouseout","mouseover"]);si("onPointerEnter",["pointerout","pointerover"]);si("onPointerLeave",["pointerout","pointerover"]);mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function Gh(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,S_(i,t,void 0,e),e.currentTarget=null}function _m(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var l=i.length-1;0<=l;l--){var d=i[l],h=d.instance,m=d.currentTarget;if(d=d.listener,h!==a&&s.isPropagationStopped())break e;Gh(s,d,m),a=h}else for(l=0;l<i.length;l++){if(d=i[l],h=d.instance,m=d.currentTarget,d=d.listener,h!==a&&s.isPropagationStopped())break e;Gh(s,d,m),a=h}}}if(Mo)throw e=cu,Mo=!1,cu=null,e}function pe(e,t){var n=t[xu];n===void 0&&(n=t[xu]=new Set);var i=e+"__bubble";n.has(i)||(xm(t,e,2,!1),n.add(i))}function El(e,t,n){var i=0;t&&(i|=4),xm(n,e,i,t)}var ao="_reactListening"+Math.random().toString(36).slice(2);function us(e){if(!e[ao]){e[ao]=!0,Tp.forEach(function(n){n!=="selectionchange"&&(E0.has(n)||El(n,!1,e),El(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ao]||(t[ao]=!0,El("selectionchange",!1,t))}}function xm(e,t,n,i){switch(rm(t)){case 1:var s=B_;break;case 4:s=U_;break;default:s=yc}n=s.bind(null,t,n,e),s=void 0,!uu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function jl(e,t,n,i,s){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var d=i.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;d!==null;){if(l=ir(d),l===null)return;if(h=l.tag,h===5||h===6){i=a=l;continue e}d=d.parentNode}}i=i.return}Wp(function(){var m=a,g=pc(n),y=[];e:{var x=ym.get(e);if(x!==void 0){var b=xc,k=e;switch(e){case"keypress":if(Eo(n)===0)break e;case"keydown":case"keyup":b=t0;break;case"focusin":k="focus",b=_l;break;case"focusout":k="blur",b=_l;break;case"beforeblur":case"afterblur":b=_l;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=W_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=i0;break;case pm:case mm:case gm:b=Z_;break;case vm:b=o0;break;case"scroll":b=$_;break;case"wheel":b=l0;break;case"copy":case"cut":case"paste":b=K_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Bh}var E=(t&4)!==0,C=!E&&e==="scroll",S=E?x!==null?x+"Capture":null:x;E=[];for(var _=m,w;_!==null;){w=_;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,S!==null&&(N=rs(_,S),N!=null&&E.push(cs(_,N,w)))),C)break;_=_.return}0<E.length&&(x=new b(x,k,null,n,g),y.push({event:x,listeners:E}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",x&&n!==au&&(k=n.relatedTarget||n.fromElement)&&(ir(k)||k[fn]))break e;if((b||x)&&(x=g.window===g?g:(x=g.ownerDocument)?x.defaultView||x.parentWindow:window,b?(k=n.relatedTarget||n.toElement,b=m,k=k?ir(k):null,k!==null&&(C=gr(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=m),b!==k)){if(E=Dh,N="onMouseLeave",S="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(E=Bh,N="onPointerLeave",S="onPointerEnter",_="pointer"),C=b==null?x:Wr(b),w=k==null?x:Wr(k),x=new E(N,_+"leave",b,n,g),x.target=C,x.relatedTarget=w,N=null,ir(g)===m&&(E=new E(S,_+"enter",k,n,g),E.target=w,E.relatedTarget=C,N=E),C=N,b&&k)t:{for(E=b,S=k,_=0,w=E;w;w=Nr(w))_++;for(w=0,N=S;N;N=Nr(N))w++;for(;0<_-w;)E=Nr(E),_--;for(;0<w-_;)S=Nr(S),w--;for(;_--;){if(E===S||S!==null&&E===S.alternate)break t;E=Nr(E),S=Nr(S)}E=null}else E=null;b!==null&&Jh(y,x,b,E,!1),k!==null&&C!==null&&Jh(y,C,k,E,!0)}}e:{if(x=m?Wr(m):window,b=x.nodeName&&x.nodeName.toLowerCase(),b==="select"||b==="input"&&x.type==="file")var I=m0;else if(Fh(x))if(um)I=_0;else{I=v0;var M=g0}else(b=x.nodeName)&&b.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(I=y0);if(I&&(I=I(e,m))){lm(y,I,n,g);break e}M&&M(e,x,m),e==="focusout"&&(M=x._wrapperState)&&M.controlled&&x.type==="number"&&nu(x,"number",x.value)}switch(M=m?Wr(m):window,e){case"focusin":(Fh(M)||M.contentEditable==="true")&&($r=M,pu=m,Ki=null);break;case"focusout":Ki=pu=$r=null;break;case"mousedown":mu=!0;break;case"contextmenu":case"mouseup":case"dragend":mu=!1,Vh(y,n,g);break;case"selectionchange":if(b0)break;case"keydown":case"keyup":Vh(y,n,g)}var z;if(bc)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Ur?om(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(sm&&n.locale!=="ko"&&(Ur||F!=="onCompositionStart"?F==="onCompositionEnd"&&Ur&&(z=im()):(Nn=g,_c="value"in Nn?Nn.value:Nn.textContent,Ur=!0)),M=$o(m,F),0<M.length&&(F=new zh(F,e,null,n,g),y.push({event:F,listeners:M}),z?F.data=z:(z=am(n),z!==null&&(F.data=z)))),(z=c0?d0(e,n):h0(e,n))&&(m=$o(m,"onBeforeInput"),0<m.length&&(g=new zh("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:m}),g.data=z))}_m(y,t)})}function cs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $o(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=rs(e,n),a!=null&&i.unshift(cs(e,a,s)),a=rs(e,t),a!=null&&i.push(cs(e,a,s))),e=e.return}return i}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jh(e,t,n,i,s){for(var a=t._reactName,l=[];n!==null&&n!==i;){var d=n,h=d.alternate,m=d.stateNode;if(h!==null&&h===i)break;d.tag===5&&m!==null&&(d=m,s?(h=rs(n,a),h!=null&&l.unshift(cs(n,h,d))):s||(h=rs(n,a),h!=null&&l.push(cs(n,h,d)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var j0=/\r\n?/g,T0=/\u0000|\uFFFD/g;function Qh(e){return(typeof e=="string"?e:""+e).replace(j0,`
`).replace(T0,"")}function lo(e,t,n){if(t=Qh(t),Qh(e)!==t&&n)throw Error(D(425))}function Fo(){}var gu=null,vu=null;function yu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _u=typeof setTimeout=="function"?setTimeout:void 0,N0=typeof clearTimeout=="function"?clearTimeout:void 0,Yh=typeof Promise=="function"?Promise:void 0,P0=typeof queueMicrotask=="function"?queueMicrotask:typeof Yh<"u"?function(e){return Yh.resolve(null).then(e).catch(C0)}:_u;function C0(e){setTimeout(function(){throw e})}function Tl(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),os(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);os(t)}function An(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pi=Math.random().toString(36).slice(2),Jt="__reactFiber$"+pi,ds="__reactProps$"+pi,fn="__reactContainer$"+pi,xu="__reactEvents$"+pi,L0="__reactListeners$"+pi,O0="__reactHandles$"+pi;function ir(e){var t=e[Jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fn]||n[Jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xh(e);e!==null;){if(n=e[Jt])return n;e=Xh(e)}return t}e=n,n=e.parentNode}return null}function Ps(e){return e=e[Jt]||e[fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function fa(e){return e[ds]||null}var wu=[],qr=-1;function Wn(e){return{current:e}}function me(e){0>qr||(e.current=wu[qr],wu[qr]=null,qr--)}function fe(e,t){qr++,wu[qr]=e.current,e.current=t}var $n={},Qe=Wn($n),at=Wn(!1),cr=$n;function oi(e,t){var n=e.type.contextTypes;if(!n)return $n;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function lt(e){return e=e.childContextTypes,e!=null}function Wo(){me(at),me(Qe)}function ef(e,t,n){if(Qe.current!==$n)throw Error(D(168));fe(Qe,t),fe(at,n)}function wm(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(D(108,g_(e)||"Unknown",s));return we({},n,i)}function qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$n,cr=Qe.current,fe(Qe,e),fe(at,at.current),!0}function tf(e,t,n){var i=e.stateNode;if(!i)throw Error(D(169));n?(e=wm(e,t,cr),i.__reactInternalMemoizedMergedChildContext=e,me(at),me(Qe),fe(Qe,e)):me(at),fe(at,n)}var ln=null,pa=!1,Nl=!1;function bm(e){ln===null?ln=[e]:ln.push(e)}function R0(e){pa=!0,bm(e)}function qn(){if(!Nl&&ln!==null){Nl=!0;var e=0,t=le;try{var n=ln;for(le=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}ln=null,pa=!1}catch(s){throw ln!==null&&(ln=ln.slice(e+1)),Vp(mc,qn),s}finally{le=t,Nl=!1}}return null}var Hr=[],Zr=0,Ho=null,Zo=0,Et=[],jt=0,dr=null,un=1,cn="";function Xn(e,t){Hr[Zr++]=Zo,Hr[Zr++]=Ho,Ho=e,Zo=t}function Sm(e,t,n){Et[jt++]=un,Et[jt++]=cn,Et[jt++]=dr,dr=e;var i=un;e=cn;var s=32-Ut(i)-1;i&=~(1<<s),n+=1;var a=32-Ut(t)+s;if(30<a){var l=s-s%5;a=(i&(1<<l)-1).toString(32),i>>=l,s-=l,un=1<<32-Ut(t)+s|n<<s|i,cn=a+e}else un=1<<a|n<<s|i,cn=e}function kc(e){e.return!==null&&(Xn(e,1),Sm(e,1,0))}function Ec(e){for(;e===Ho;)Ho=Hr[--Zr],Hr[Zr]=null,Zo=Hr[--Zr],Hr[Zr]=null;for(;e===dr;)dr=Et[--jt],Et[jt]=null,cn=Et[--jt],Et[jt]=null,un=Et[--jt],Et[jt]=null}var vt=null,gt=null,ge=!1,Bt=null;function km(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function nf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vt=e,gt=An(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=dr!==null?{id:un,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vt=e,gt=null,!0):!1;default:return!1}}function bu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Su(e){if(ge){var t=gt;if(t){var n=t;if(!nf(e,t)){if(bu(e))throw Error(D(418));t=An(n.nextSibling);var i=vt;t&&nf(e,t)?km(i,n):(e.flags=e.flags&-4097|2,ge=!1,vt=e)}}else{if(bu(e))throw Error(D(418));e.flags=e.flags&-4097|2,ge=!1,vt=e}}}function rf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vt=e}function uo(e){if(e!==vt)return!1;if(!ge)return rf(e),ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!yu(e.type,e.memoizedProps)),t&&(t=gt)){if(bu(e))throw Em(),Error(D(418));for(;t;)km(e,t),t=An(t.nextSibling)}if(rf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gt=An(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=vt?An(e.stateNode.nextSibling):null;return!0}function Em(){for(var e=gt;e;)e=An(e.nextSibling)}function ai(){gt=vt=null,ge=!1}function jc(e){Bt===null?Bt=[e]:Bt.push(e)}var A0=gn.ReactCurrentBatchConfig;function Mi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var i=n.stateNode}if(!i)throw Error(D(147,e));var s=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var d=s.refs;l===null?delete d[a]:d[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function co(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sf(e){var t=e._init;return t(e._payload)}function jm(e){function t(S,_){if(e){var w=S.deletions;w===null?(S.deletions=[_],S.flags|=16):w.push(_)}}function n(S,_){if(!e)return null;for(;_!==null;)t(S,_),_=_.sibling;return null}function i(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function s(S,_){return S=zn(S,_),S.index=0,S.sibling=null,S}function a(S,_,w){return S.index=w,e?(w=S.alternate,w!==null?(w=w.index,w<_?(S.flags|=2,_):w):(S.flags|=2,_)):(S.flags|=1048576,_)}function l(S){return e&&S.alternate===null&&(S.flags|=2),S}function d(S,_,w,N){return _===null||_.tag!==6?(_=Il(w,S.mode,N),_.return=S,_):(_=s(_,w),_.return=S,_)}function h(S,_,w,N){var I=w.type;return I===Br?g(S,_,w.props.children,N,w.key):_!==null&&(_.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===bn&&sf(I)===_.type)?(N=s(_,w.props),N.ref=Mi(S,_,w),N.return=S,N):(N=Oo(w.type,w.key,w.props,null,S.mode,N),N.ref=Mi(S,_,w),N.return=S,N)}function m(S,_,w,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Ml(w,S.mode,N),_.return=S,_):(_=s(_,w.children||[]),_.return=S,_)}function g(S,_,w,N,I){return _===null||_.tag!==7?(_=ur(w,S.mode,N,I),_.return=S,_):(_=s(_,w),_.return=S,_)}function y(S,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Il(""+_,S.mode,w),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Xs:return w=Oo(_.type,_.key,_.props,null,S.mode,w),w.ref=Mi(S,null,_),w.return=S,w;case zr:return _=Ml(_,S.mode,w),_.return=S,_;case bn:var N=_._init;return y(S,N(_._payload),w)}if(Ui(_)||Li(_))return _=ur(_,S.mode,w,null),_.return=S,_;co(S,_)}return null}function x(S,_,w,N){var I=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return I!==null?null:d(S,_,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xs:return w.key===I?h(S,_,w,N):null;case zr:return w.key===I?m(S,_,w,N):null;case bn:return I=w._init,x(S,_,I(w._payload),N)}if(Ui(w)||Li(w))return I!==null?null:g(S,_,w,N,null);co(S,w)}return null}function b(S,_,w,N,I){if(typeof N=="string"&&N!==""||typeof N=="number")return S=S.get(w)||null,d(_,S,""+N,I);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Xs:return S=S.get(N.key===null?w:N.key)||null,h(_,S,N,I);case zr:return S=S.get(N.key===null?w:N.key)||null,m(_,S,N,I);case bn:var M=N._init;return b(S,_,w,M(N._payload),I)}if(Ui(N)||Li(N))return S=S.get(w)||null,g(_,S,N,I,null);co(_,N)}return null}function k(S,_,w,N){for(var I=null,M=null,z=_,F=_=0,ne=null;z!==null&&F<w.length;F++){z.index>F?(ne=z,z=null):ne=z.sibling;var X=x(S,z,w[F],N);if(X===null){z===null&&(z=ne);break}e&&z&&X.alternate===null&&t(S,z),_=a(X,_,F),M===null?I=X:M.sibling=X,M=X,z=ne}if(F===w.length)return n(S,z),ge&&Xn(S,F),I;if(z===null){for(;F<w.length;F++)z=y(S,w[F],N),z!==null&&(_=a(z,_,F),M===null?I=z:M.sibling=z,M=z);return ge&&Xn(S,F),I}for(z=i(S,z);F<w.length;F++)ne=b(z,S,F,w[F],N),ne!==null&&(e&&ne.alternate!==null&&z.delete(ne.key===null?F:ne.key),_=a(ne,_,F),M===null?I=ne:M.sibling=ne,M=ne);return e&&z.forEach(function(ce){return t(S,ce)}),ge&&Xn(S,F),I}function E(S,_,w,N){var I=Li(w);if(typeof I!="function")throw Error(D(150));if(w=I.call(w),w==null)throw Error(D(151));for(var M=I=null,z=_,F=_=0,ne=null,X=w.next();z!==null&&!X.done;F++,X=w.next()){z.index>F?(ne=z,z=null):ne=z.sibling;var ce=x(S,z,X.value,N);if(ce===null){z===null&&(z=ne);break}e&&z&&ce.alternate===null&&t(S,z),_=a(ce,_,F),M===null?I=ce:M.sibling=ce,M=ce,z=ne}if(X.done)return n(S,z),ge&&Xn(S,F),I;if(z===null){for(;!X.done;F++,X=w.next())X=y(S,X.value,N),X!==null&&(_=a(X,_,F),M===null?I=X:M.sibling=X,M=X);return ge&&Xn(S,F),I}for(z=i(S,z);!X.done;F++,X=w.next())X=b(z,S,F,X.value,N),X!==null&&(e&&X.alternate!==null&&z.delete(X.key===null?F:X.key),_=a(X,_,F),M===null?I=X:M.sibling=X,M=X);return e&&z.forEach(function(Me){return t(S,Me)}),ge&&Xn(S,F),I}function C(S,_,w,N){if(typeof w=="object"&&w!==null&&w.type===Br&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xs:e:{for(var I=w.key,M=_;M!==null;){if(M.key===I){if(I=w.type,I===Br){if(M.tag===7){n(S,M.sibling),_=s(M,w.props.children),_.return=S,S=_;break e}}else if(M.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===bn&&sf(I)===M.type){n(S,M.sibling),_=s(M,w.props),_.ref=Mi(S,M,w),_.return=S,S=_;break e}n(S,M);break}else t(S,M);M=M.sibling}w.type===Br?(_=ur(w.props.children,S.mode,N,w.key),_.return=S,S=_):(N=Oo(w.type,w.key,w.props,null,S.mode,N),N.ref=Mi(S,_,w),N.return=S,S=N)}return l(S);case zr:e:{for(M=w.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(S,_.sibling),_=s(_,w.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else t(S,_);_=_.sibling}_=Ml(w,S.mode,N),_.return=S,S=_}return l(S);case bn:return M=w._init,C(S,_,M(w._payload),N)}if(Ui(w))return k(S,_,w,N);if(Li(w))return E(S,_,w,N);co(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(S,_.sibling),_=s(_,w),_.return=S,S=_):(n(S,_),_=Il(w,S.mode,N),_.return=S,S=_),l(S)):n(S,_)}return C}var li=jm(!0),Tm=jm(!1),Vo=Wn(null),Ko=null,Vr=null,Tc=null;function Nc(){Tc=Vr=Ko=null}function Pc(e){var t=Vo.current;me(Vo),e._currentValue=t}function ku(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ti(e,t){Ko=e,Tc=Vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(Tc!==e)if(e={context:e,memoizedValue:t,next:null},Vr===null){if(Ko===null)throw Error(D(308));Vr=e,Ko.dependencies={lanes:0,firstContext:e}}else Vr=Vr.next=e;return t}var sr=null;function Cc(e){sr===null?sr=[e]:sr.push(e)}function Nm(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,Cc(t)):(n.next=s.next,s.next=n),t.interleaved=n,pn(e,i)}function pn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sn=!1;function Lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function In(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,se&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,pn(e,n)}return s=i.interleaved,s===null?(t.next=t,Cc(i)):(t.next=s.next,s.next=t),i.interleaved=t,pn(e,n)}function jo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,gc(e,n)}}function of(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Go(e,t,n,i){var s=e.updateQueue;Sn=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var h=d,m=h.next;h.next=null,l===null?a=m:l.next=m,l=h;var g=e.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==l&&(d===null?g.firstBaseUpdate=m:d.next=m,g.lastBaseUpdate=h))}if(a!==null){var y=s.baseState;l=0,g=m=h=null,d=a;do{var x=d.lane,b=d.eventTime;if((i&x)===x){g!==null&&(g=g.next={eventTime:b,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var k=e,E=d;switch(x=t,b=n,E.tag){case 1:if(k=E.payload,typeof k=="function"){y=k.call(b,y,x);break e}y=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=E.payload,x=typeof k=="function"?k.call(b,y,x):k,x==null)break e;y=we({},y,x);break e;case 2:Sn=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[d]:x.push(d))}else b={eventTime:b,lane:x,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(m=g=b,h=y):g=g.next=b,l|=x;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;x=d,d=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(g===null&&(h=y),s.baseState=h,s.firstBaseUpdate=m,s.lastBaseUpdate=g,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);fr|=l,e.lanes=l,e.memoizedState=y}}function af(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(D(191,s));s.call(i)}}}var Cs={},Yt=Wn(Cs),hs=Wn(Cs),fs=Wn(Cs);function or(e){if(e===Cs)throw Error(D(174));return e}function Oc(e,t){switch(fe(fs,t),fe(hs,e),fe(Yt,Cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:iu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=iu(t,e)}me(Yt),fe(Yt,t)}function ui(){me(Yt),me(hs),me(fs)}function Cm(e){or(fs.current);var t=or(Yt.current),n=iu(t,e.type);t!==n&&(fe(hs,e),fe(Yt,n))}function Rc(e){hs.current===e&&(me(Yt),me(hs))}var _e=Wn(0);function Jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pl=[];function Ac(){for(var e=0;e<Pl.length;e++)Pl[e]._workInProgressVersionPrimary=null;Pl.length=0}var To=gn.ReactCurrentDispatcher,Cl=gn.ReactCurrentBatchConfig,hr=0,xe=null,Ae=null,ze=null,Qo=!1,Gi=!1,ps=0,I0=0;function Ve(){throw Error(D(321))}function Ic(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ft(e[n],t[n]))return!1;return!0}function Mc(e,t,n,i,s,a){if(hr=a,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,To.current=e===null||e.memoizedState===null?B0:U0,e=n(i,s),Gi){a=0;do{if(Gi=!1,ps=0,25<=a)throw Error(D(301));a+=1,ze=Ae=null,t.updateQueue=null,To.current=$0,e=n(i,s)}while(Gi)}if(To.current=Yo,t=Ae!==null&&Ae.next!==null,hr=0,ze=Ae=xe=null,Qo=!1,t)throw Error(D(300));return e}function Dc(){var e=ps!==0;return ps=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?xe.memoizedState=ze=e:ze=ze.next=e,ze}function Ct(){if(Ae===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=ze===null?xe.memoizedState:ze.next;if(t!==null)ze=t,Ae=e;else{if(e===null)throw Error(D(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},ze===null?xe.memoizedState=ze=e:ze=ze.next=e}return ze}function ms(e,t){return typeof t=="function"?t(e):t}function Ll(e){var t=Ct(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var i=Ae,s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}i.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,i=i.baseState;var d=l=null,h=null,m=a;do{var g=m.lane;if((hr&g)===g)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:e(i,m.action);else{var y={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(d=h=y,l=i):h=h.next=y,xe.lanes|=g,fr|=g}m=m.next}while(m!==null&&m!==a);h===null?l=i:h.next=d,Ft(i,t.memoizedState)||(ot=!0),t.memoizedState=i,t.baseState=l,t.baseQueue=h,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do a=s.lane,xe.lanes|=a,fr|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ol(e){var t=Ct(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do a=e(a,l.action),l=l.next;while(l!==s);Ft(a,t.memoizedState)||(ot=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Lm(){}function Om(e,t){var n=xe,i=Ct(),s=t(),a=!Ft(i.memoizedState,s);if(a&&(i.memoizedState=s,ot=!0),i=i.queue,zc(Im.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,gs(9,Am.bind(null,n,i,s,t),void 0,null),Be===null)throw Error(D(349));hr&30||Rm(n,t,s)}return s}function Rm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Am(e,t,n,i){t.value=n,t.getSnapshot=i,Mm(t)&&Dm(e)}function Im(e,t,n){return n(function(){Mm(t)&&Dm(e)})}function Mm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ft(e,n)}catch{return!0}}function Dm(e){var t=pn(e,1);t!==null&&$t(t,e,1,-1)}function lf(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t.queue=e,e=e.dispatch=z0.bind(null,xe,e),[t.memoizedState,e]}function gs(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function zm(){return Ct().memoizedState}function No(e,t,n,i){var s=Kt();xe.flags|=e,s.memoizedState=gs(1|t,n,void 0,i===void 0?null:i)}function ma(e,t,n,i){var s=Ct();i=i===void 0?null:i;var a=void 0;if(Ae!==null){var l=Ae.memoizedState;if(a=l.destroy,i!==null&&Ic(i,l.deps)){s.memoizedState=gs(t,n,a,i);return}}xe.flags|=e,s.memoizedState=gs(1|t,n,a,i)}function uf(e,t){return No(8390656,8,e,t)}function zc(e,t){return ma(2048,8,e,t)}function Bm(e,t){return ma(4,2,e,t)}function Um(e,t){return ma(4,4,e,t)}function $m(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fm(e,t,n){return n=n!=null?n.concat([e]):null,ma(4,4,$m.bind(null,t,e),n)}function Bc(){}function Wm(e,t){var n=Ct();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Ic(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function qm(e,t){var n=Ct();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Ic(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Hm(e,t,n){return hr&21?(Ft(n,t)||(n=Jp(),xe.lanes|=n,fr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=n)}function M0(e,t){var n=le;le=n!==0&&4>n?n:4,e(!0);var i=Cl.transition;Cl.transition={};try{e(!1),t()}finally{le=n,Cl.transition=i}}function Zm(){return Ct().memoizedState}function D0(e,t,n){var i=Dn(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Vm(e))Km(t,n);else if(n=Nm(e,t,n,i),n!==null){var s=et();$t(n,e,i,s),Gm(n,t,i)}}function z0(e,t,n){var i=Dn(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vm(e))Km(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,d=a(l,n);if(s.hasEagerState=!0,s.eagerState=d,Ft(d,l)){var h=t.interleaved;h===null?(s.next=s,Cc(t)):(s.next=h.next,h.next=s),t.interleaved=s;return}}catch{}finally{}n=Nm(e,t,s,i),n!==null&&(s=et(),$t(n,e,i,s),Gm(n,t,i))}}function Vm(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Km(e,t){Gi=Qo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gm(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,gc(e,n)}}var Yo={readContext:Pt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},B0={readContext:Pt,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:uf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,No(4194308,4,$m.bind(null,t,e),n)},useLayoutEffect:function(e,t){return No(4194308,4,e,t)},useInsertionEffect:function(e,t){return No(4,2,e,t)},useMemo:function(e,t){var n=Kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Kt();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=D0.bind(null,xe,e),[i.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:lf,useDebugValue:Bc,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=lf(!1),t=e[0];return e=M0.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=xe,s=Kt();if(ge){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Be===null)throw Error(D(349));hr&30||Rm(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,uf(Im.bind(null,i,a,e),[e]),i.flags|=2048,gs(9,Am.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Kt(),t=Be.identifierPrefix;if(ge){var n=cn,i=un;n=(i&~(1<<32-Ut(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=ps++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=I0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U0={readContext:Pt,useCallback:Wm,useContext:Pt,useEffect:zc,useImperativeHandle:Fm,useInsertionEffect:Bm,useLayoutEffect:Um,useMemo:qm,useReducer:Ll,useRef:zm,useState:function(){return Ll(ms)},useDebugValue:Bc,useDeferredValue:function(e){var t=Ct();return Hm(t,Ae.memoizedState,e)},useTransition:function(){var e=Ll(ms)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Lm,useSyncExternalStore:Om,useId:Zm,unstable_isNewReconciler:!1},$0={readContext:Pt,useCallback:Wm,useContext:Pt,useEffect:zc,useImperativeHandle:Fm,useInsertionEffect:Bm,useLayoutEffect:Um,useMemo:qm,useReducer:Ol,useRef:zm,useState:function(){return Ol(ms)},useDebugValue:Bc,useDeferredValue:function(e){var t=Ct();return Ae===null?t.memoizedState=e:Hm(t,Ae.memoizedState,e)},useTransition:function(){var e=Ol(ms)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Lm,useSyncExternalStore:Om,useId:Zm,unstable_isNewReconciler:!1};function It(e,t){if(e&&e.defaultProps){t=we({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Eu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:we({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=et(),s=Dn(e),a=dn(i,s);a.payload=t,n!=null&&(a.callback=n),t=In(e,a,s),t!==null&&($t(t,e,s,i),jo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=et(),s=Dn(e),a=dn(i,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=In(e,a,s),t!==null&&($t(t,e,s,i),jo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=et(),i=Dn(e),s=dn(n,i);s.tag=2,t!=null&&(s.callback=t),t=In(e,s,i),t!==null&&($t(t,e,i,n),jo(t,e,i))}};function cf(e,t,n,i,s,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,l):t.prototype&&t.prototype.isPureReactComponent?!ls(n,i)||!ls(s,a):!0}function Jm(e,t,n){var i=!1,s=$n,a=t.contextType;return typeof a=="object"&&a!==null?a=Pt(a):(s=lt(t)?cr:Qe.current,i=t.contextTypes,a=(i=i!=null)?oi(e,s):$n),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function df(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function ju(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Lc(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Pt(a):(a=lt(t)?cr:Qe.current,s.context=oi(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Eu(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ga.enqueueReplaceState(s,s.state,null),Go(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ci(e,t){try{var n="",i=t;do n+=m_(i),i=i.return;while(i);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Rl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var F0=typeof WeakMap=="function"?WeakMap:Map;function Qm(e,t,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ea||(ea=!0,Du=i),Tu(e,t)},n}function Ym(e,t,n){n=dn(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){Tu(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Tu(e,t),typeof i!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function hf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new F0;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=nx.bind(null,e,t,n),t.then(e,e))}function ff(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pf(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dn(-1,1),t.tag=2,In(n,t,1))),n.lanes|=1),e)}var W0=gn.ReactCurrentOwner,ot=!1;function Xe(e,t,n,i){t.child=e===null?Tm(t,null,n,i):li(t,e.child,n,i)}function mf(e,t,n,i,s){n=n.render;var a=t.ref;return ti(t,s),i=Mc(e,t,n,i,a,s),n=Dc(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(ge&&n&&kc(t),t.flags|=1,Xe(e,t,i,s),t.child)}function gf(e,t,n,i,s){if(e===null){var a=n.type;return typeof a=="function"&&!Vc(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Xm(e,t,a,i,s)):(e=Oo(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:ls,n(l,i)&&e.ref===t.ref)return mn(e,t,s)}return t.flags|=1,e=zn(a,i),e.ref=t.ref,e.return=t,t.child=e}function Xm(e,t,n,i,s){if(e!==null){var a=e.memoizedProps;if(ls(a,i)&&e.ref===t.ref)if(ot=!1,t.pendingProps=i=a,(e.lanes&s)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,mn(e,t,s)}return Nu(e,t,n,i,s)}function eg(e,t,n){var i=t.pendingProps,s=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Gr,ft),ft|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fe(Gr,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,fe(Gr,ft),ft|=i}else a!==null?(i=a.baseLanes|n,t.memoizedState=null):i=n,fe(Gr,ft),ft|=i;return Xe(e,t,s,n),t.child}function tg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Nu(e,t,n,i,s){var a=lt(n)?cr:Qe.current;return a=oi(t,a),ti(t,s),n=Mc(e,t,n,i,a,s),i=Dc(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(ge&&i&&kc(t),t.flags|=1,Xe(e,t,n,s),t.child)}function vf(e,t,n,i,s){if(lt(n)){var a=!0;qo(t)}else a=!1;if(ti(t,s),t.stateNode===null)Po(e,t),Jm(t,n,i),ju(t,n,i,s),i=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var h=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Pt(m):(m=lt(n)?cr:Qe.current,m=oi(t,m));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==i||h!==m)&&df(t,l,i,m),Sn=!1;var x=t.memoizedState;l.state=x,Go(t,i,l,s),h=t.memoizedState,d!==i||x!==h||at.current||Sn?(typeof g=="function"&&(Eu(t,n,g,i),h=t.memoizedState),(d=Sn||cf(t,n,d,i,x,h,m))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),l.props=i,l.state=h,l.context=m,i=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,Pm(e,t),d=t.memoizedProps,m=t.type===t.elementType?d:It(t.type,d),l.props=m,y=t.pendingProps,x=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=Pt(h):(h=lt(n)?cr:Qe.current,h=oi(t,h));var b=n.getDerivedStateFromProps;(g=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==y||x!==h)&&df(t,l,i,h),Sn=!1,x=t.memoizedState,l.state=x,Go(t,i,l,s);var k=t.memoizedState;d!==y||x!==k||at.current||Sn?(typeof b=="function"&&(Eu(t,n,b,i),k=t.memoizedState),(m=Sn||cf(t,n,m,i,x,k,h)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,k,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,k,h)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=k),l.props=i,l.state=k,l.context=h,i=m):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),i=!1)}return Pu(e,t,n,i,a,s)}function Pu(e,t,n,i,s,a){tg(e,t);var l=(t.flags&128)!==0;if(!i&&!l)return s&&tf(t,n,!1),mn(e,t,a);i=t.stateNode,W0.current=t;var d=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&l?(t.child=li(t,e.child,null,a),t.child=li(t,null,d,a)):Xe(e,t,d,a),t.memoizedState=i.state,s&&tf(t,n,!0),t.child}function ng(e){var t=e.stateNode;t.pendingContext?ef(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ef(e,t.context,!1),Oc(e,t.containerInfo)}function yf(e,t,n,i,s){return ai(),jc(s),t.flags|=256,Xe(e,t,n,i),t.child}var Cu={dehydrated:null,treeContext:null,retryLane:0};function Lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function rg(e,t,n){var i=t.pendingProps,s=_e.current,a=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!==0),d?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),fe(_e,s&1),e===null)return Su(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=_a(l,i,0,null),e=ur(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Lu(n),t.memoizedState=Cu,e):Uc(t,l));if(s=e.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return q0(e,t,l,i,d,s,n);if(a){a=i.fallback,l=t.mode,s=e.child,d=s.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=h,t.deletions=null):(i=zn(s,h),i.subtreeFlags=s.subtreeFlags&14680064),d!==null?a=zn(d,a):(a=ur(a,l,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=e.child.memoizedState,l=l===null?Lu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Cu,i}return a=e.child,e=a.sibling,i=zn(a,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uc(e,t){return t=_a({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ho(e,t,n,i){return i!==null&&jc(i),li(t,e.child,null,n),e=Uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q0(e,t,n,i,s,a,l){if(n)return t.flags&256?(t.flags&=-257,i=Rl(Error(D(422))),ho(e,t,l,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=_a({mode:"visible",children:i.children},s,0,null),a=ur(a,s,l,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&li(t,e.child,null,l),t.child.memoizedState=Lu(l),t.memoizedState=Cu,a);if(!(t.mode&1))return ho(e,t,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var d=i.dgst;return i=d,a=Error(D(419)),i=Rl(a,i,void 0),ho(e,t,l,i)}if(d=(l&e.childLanes)!==0,ot||d){if(i=Be,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,pn(e,s),$t(i,e,s,-1))}return Zc(),i=Rl(Error(D(421))),ho(e,t,l,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=rx.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,gt=An(s.nextSibling),vt=t,ge=!0,Bt=null,e!==null&&(Et[jt++]=un,Et[jt++]=cn,Et[jt++]=dr,un=e.id,cn=e.overflow,dr=t),t=Uc(t,i.children),t.flags|=4096,t)}function _f(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),ku(e.return,t,n)}function Al(e,t,n,i,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function ig(e,t,n){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(Xe(e,t,i.children,n),i=_e.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_f(e,n,t);else if(e.tag===19)_f(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(fe(_e,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Jo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Al(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Jo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Al(t,!0,n,null,a);break;case"together":Al(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Po(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function H0(e,t,n){switch(t.tag){case 3:ng(t),ai();break;case 5:Cm(t);break;case 1:lt(t.type)&&qo(t);break;case 4:Oc(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;fe(Vo,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(fe(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?rg(e,t,n):(fe(_e,_e.current&1),e=mn(e,t,n),e!==null?e.sibling:null);fe(_e,_e.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return ig(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fe(_e,_e.current),i)break;return null;case 22:case 23:return t.lanes=0,eg(e,t,n)}return mn(e,t,n)}var sg,Ou,og,ag;sg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ou=function(){};og=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,or(Yt.current);var a=null;switch(n){case"input":s=eu(e,s),i=eu(e,i),a=[];break;case"select":s=we({},s,{value:void 0}),i=we({},i,{value:void 0}),a=[];break;case"textarea":s=ru(e,s),i=ru(e,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Fo)}su(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var d=s[m];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ts.hasOwnProperty(m)?a||(a=[]):(a=a||[]).push(m,null));for(m in i){var h=i[m];if(d=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&h!==d&&(h!=null||d!=null))if(m==="style")if(d){for(l in d)!d.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&d[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(a||(a=[]),a.push(m,n)),n=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(a=a||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ts.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&pe("scroll",e),a||d===h||(a=[])):(a=a||[]).push(m,h))}n&&(a=a||[]).push("style",n);var m=a;(t.updateQueue=m)&&(t.flags|=4)}};ag=function(e,t,n,i){n!==i&&(t.flags|=4)};function Di(e,t){if(!ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Z0(e,t,n){var i=t.pendingProps;switch(Ec(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return lt(t.type)&&Wo(),Ke(t),null;case 3:return i=t.stateNode,ui(),me(at),me(Qe),Ac(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(uo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(Uu(Bt),Bt=null))),Ou(e,t),Ke(t),null;case 5:Rc(t);var s=or(fs.current);if(n=t.type,e!==null&&t.stateNode!=null)og(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(D(166));return Ke(t),null}if(e=or(Yt.current),uo(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[Jt]=t,i[ds]=a,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",i),pe("close",i);break;case"iframe":case"object":case"embed":pe("load",i);break;case"video":case"audio":for(s=0;s<Fi.length;s++)pe(Fi[s],i);break;case"source":pe("error",i);break;case"img":case"image":case"link":pe("error",i),pe("load",i);break;case"details":pe("toggle",i);break;case"input":Th(i,a),pe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},pe("invalid",i);break;case"textarea":Ph(i,a),pe("invalid",i)}su(n,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var d=a[l];l==="children"?typeof d=="string"?i.textContent!==d&&(a.suppressHydrationWarning!==!0&&lo(i.textContent,d,e),s=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&lo(i.textContent,d,e),s=["children",""+d]):ts.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&pe("scroll",i)}switch(n){case"input":eo(i),Nh(i,a,!0);break;case"textarea":eo(i),Ch(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Fo)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ip(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),n==="select"&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[Jt]=t,e[ds]=i,sg(e,t,!1,!1),t.stateNode=e;e:{switch(l=ou(n,i),n){case"dialog":pe("cancel",e),pe("close",e),s=i;break;case"iframe":case"object":case"embed":pe("load",e),s=i;break;case"video":case"audio":for(s=0;s<Fi.length;s++)pe(Fi[s],e);s=i;break;case"source":pe("error",e),s=i;break;case"img":case"image":case"link":pe("error",e),pe("load",e),s=i;break;case"details":pe("toggle",e),s=i;break;case"input":Th(e,i),s=eu(e,i),pe("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=we({},i,{value:void 0}),pe("invalid",e);break;case"textarea":Ph(e,i),s=ru(e,i),pe("invalid",e);break;default:s=i}su(n,s),d=s;for(a in d)if(d.hasOwnProperty(a)){var h=d[a];a==="style"?zp(e,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Mp(e,h)):a==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&ns(e,h):typeof h=="number"&&ns(e,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ts.hasOwnProperty(a)?h!=null&&a==="onScroll"&&pe("scroll",e):h!=null&&cc(e,a,h,l))}switch(n){case"input":eo(e),Nh(e,i,!1);break;case"textarea":eo(e),Ch(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Un(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?Qr(e,!!i.multiple,a,!1):i.defaultValue!=null&&Qr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Fo)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)ag(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(D(166));if(n=or(fs.current),or(Yt.current),uo(t)){if(i=t.stateNode,n=t.memoizedProps,i[Jt]=t,(a=i.nodeValue!==n)&&(e=vt,e!==null))switch(e.tag){case 3:lo(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&lo(i.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Jt]=t,t.stateNode=i}return Ke(t),null;case 13:if(me(_e),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ge&&gt!==null&&t.mode&1&&!(t.flags&128))Em(),ai(),t.flags|=98560,a=!1;else if(a=uo(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(D(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(D(317));a[Jt]=t}else ai(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),a=!1}else Bt!==null&&(Uu(Bt),Bt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Ie===0&&(Ie=3):Zc())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return ui(),Ou(e,t),e===null&&us(t.stateNode.containerInfo),Ke(t),null;case 10:return Pc(t.type._context),Ke(t),null;case 17:return lt(t.type)&&Wo(),Ke(t),null;case 19:if(me(_e),a=t.memoizedState,a===null)return Ke(t),null;if(i=(t.flags&128)!==0,l=a.rendering,l===null)if(i)Di(a,!1);else{if(Ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Jo(e),l!==null){for(t.flags|=128,Di(a,!1),i=l.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)a=n,e=i,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fe(_e,_e.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ee()>di&&(t.flags|=128,i=!0,Di(a,!1),t.lanes=4194304)}else{if(!i)if(e=Jo(l),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Di(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!ge)return Ke(t),null}else 2*Ee()-a.renderingStartTime>di&&n!==1073741824&&(t.flags|=128,i=!0,Di(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ee(),t.sibling=null,n=_e.current,fe(_e,i?n&1|2:n&1),t):(Ke(t),null);case 22:case 23:return Hc(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ft&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function V0(e,t){switch(Ec(t),t.tag){case 1:return lt(t.type)&&Wo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ui(),me(at),me(Qe),Ac(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rc(t),null;case 13:if(me(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(_e),null;case 4:return ui(),null;case 10:return Pc(t.type._context),null;case 22:case 23:return Hc(),null;case 24:return null;default:return null}}var fo=!1,Je=!1,K0=typeof WeakSet=="function"?WeakSet:Set,$=null;function Kr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Se(e,t,i)}else n.current=null}function Ru(e,t,n){try{n()}catch(i){Se(e,t,i)}}var xf=!1;function G0(e,t){if(gu=Bo,e=hm(),Sc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,d=-1,h=-1,m=0,g=0,y=e,x=null;t:for(;;){for(var b;y!==n||s!==0&&y.nodeType!==3||(d=l+s),y!==a||i!==0&&y.nodeType!==3||(h=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(b=y.firstChild)!==null;)x=y,y=b;for(;;){if(y===e)break t;if(x===n&&++m===s&&(d=l),x===a&&++g===i&&(h=l),(b=y.nextSibling)!==null)break;y=x,x=y.parentNode}y=b}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(vu={focusedElem:e,selectionRange:n},Bo=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var E=k.memoizedProps,C=k.memoizedState,S=t.stateNode,_=S.getSnapshotBeforeUpdate(t.elementType===t.type?E:It(t.type,E),C);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(N){Se(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return k=xf,xf=!1,k}function Ji(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Ru(t,n,a)}s=s.next}while(s!==i)}}function va(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Au(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function lg(e){var t=e.alternate;t!==null&&(e.alternate=null,lg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[ds],delete t[xu],delete t[L0],delete t[O0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ug(e){return e.tag===5||e.tag===3||e.tag===4}function wf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ug(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fo));else if(i!==4&&(e=e.child,e!==null))for(Iu(e,t,n),e=e.sibling;e!==null;)Iu(e,t,n),e=e.sibling}function Mu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Mu(e,t,n),e=e.sibling;e!==null;)Mu(e,t,n),e=e.sibling}var qe=null,Dt=!1;function wn(e,t,n){for(n=n.child;n!==null;)cg(e,t,n),n=n.sibling}function cg(e,t,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(ua,n)}catch{}switch(n.tag){case 5:Je||Kr(n,t);case 6:var i=qe,s=Dt;qe=null,wn(e,t,n),qe=i,Dt=s,qe!==null&&(Dt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Dt?(e=qe,n=n.stateNode,e.nodeType===8?Tl(e.parentNode,n):e.nodeType===1&&Tl(e,n),os(e)):Tl(qe,n.stateNode));break;case 4:i=qe,s=Dt,qe=n.stateNode.containerInfo,Dt=!0,wn(e,t,n),qe=i,Dt=s;break;case 0:case 11:case 14:case 15:if(!Je&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Ru(n,t,l),s=s.next}while(s!==i)}wn(e,t,n);break;case 1:if(!Je&&(Kr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(d){Se(n,t,d)}wn(e,t,n);break;case 21:wn(e,t,n);break;case 22:n.mode&1?(Je=(i=Je)||n.memoizedState!==null,wn(e,t,n),Je=i):wn(e,t,n);break;default:wn(e,t,n)}}function bf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new K0),t.forEach(function(i){var s=ix.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Rt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:qe=d.stateNode,Dt=!1;break e;case 3:qe=d.stateNode.containerInfo,Dt=!0;break e;case 4:qe=d.stateNode.containerInfo,Dt=!0;break e}d=d.return}if(qe===null)throw Error(D(160));cg(a,l,s),qe=null,Dt=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(m){Se(s,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dg(t,e),t=t.sibling}function dg(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Vt(e),i&4){try{Ji(3,e,e.return),va(3,e)}catch(E){Se(e,e.return,E)}try{Ji(5,e,e.return)}catch(E){Se(e,e.return,E)}}break;case 1:Rt(t,e),Vt(e),i&512&&n!==null&&Kr(n,n.return);break;case 5:if(Rt(t,e),Vt(e),i&512&&n!==null&&Kr(n,n.return),e.flags&32){var s=e.stateNode;try{ns(s,"")}catch(E){Se(e,e.return,E)}}if(i&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&Rp(s,a),ou(d,l);var m=ou(d,a);for(l=0;l<h.length;l+=2){var g=h[l],y=h[l+1];g==="style"?zp(s,y):g==="dangerouslySetInnerHTML"?Mp(s,y):g==="children"?ns(s,y):cc(s,g,y,m)}switch(d){case"input":tu(s,a);break;case"textarea":Ap(s,a);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Qr(s,!!a.multiple,b,!1):x!==!!a.multiple&&(a.defaultValue!=null?Qr(s,!!a.multiple,a.defaultValue,!0):Qr(s,!!a.multiple,a.multiple?[]:"",!1))}s[ds]=a}catch(E){Se(e,e.return,E)}}break;case 6:if(Rt(t,e),Vt(e),i&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(E){Se(e,e.return,E)}}break;case 3:if(Rt(t,e),Vt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{os(t.containerInfo)}catch(E){Se(e,e.return,E)}break;case 4:Rt(t,e),Vt(e);break;case 13:Rt(t,e),Vt(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Wc=Ee())),i&4&&bf(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(Je=(m=Je)||g,Rt(t,e),Je=m):Rt(t,e),Vt(e),i&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!g&&e.mode&1)for($=e,g=e.child;g!==null;){for(y=$=g;$!==null;){switch(x=$,b=x.child,x.tag){case 0:case 11:case 14:case 15:Ji(4,x,x.return);break;case 1:Kr(x,x.return);var k=x.stateNode;if(typeof k.componentWillUnmount=="function"){i=x,n=x.return;try{t=i,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(E){Se(i,n,E)}}break;case 5:Kr(x,x.return);break;case 22:if(x.memoizedState!==null){kf(y);continue}}b!==null?(b.return=x,$=b):kf(y)}g=g.sibling}e:for(g=null,y=e;;){if(y.tag===5){if(g===null){g=y;try{s=y.stateNode,m?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=y.stateNode,h=y.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=Dp("display",l))}catch(E){Se(e,e.return,E)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=m?"":y.memoizedProps}catch(E){Se(e,e.return,E)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Rt(t,e),Vt(e),i&4&&bf(e);break;case 21:break;default:Rt(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ug(n)){var i=n;break e}n=n.return}throw Error(D(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ns(s,""),i.flags&=-33);var a=wf(e);Mu(e,a,s);break;case 3:case 4:var l=i.stateNode.containerInfo,d=wf(e);Iu(e,d,l);break;default:throw Error(D(161))}}catch(h){Se(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function J0(e,t,n){$=e,hg(e)}function hg(e,t,n){for(var i=(e.mode&1)!==0;$!==null;){var s=$,a=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||fo;if(!l){var d=s.alternate,h=d!==null&&d.memoizedState!==null||Je;d=fo;var m=Je;if(fo=l,(Je=h)&&!m)for($=s;$!==null;)l=$,h=l.child,l.tag===22&&l.memoizedState!==null?Ef(s):h!==null?(h.return=l,$=h):Ef(s);for(;a!==null;)$=a,hg(a),a=a.sibling;$=s,fo=d,Je=m}Sf(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,$=a):Sf(e)}}function Sf(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Je||va(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Je)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:It(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&af(t,a,i);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}af(t,l,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&os(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Je||t.flags&512&&Au(t)}catch(x){Se(t,t.return,x)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function kf(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function Ef(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{va(4,t)}catch(h){Se(t,n,h)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(h){Se(t,s,h)}}var a=t.return;try{Au(t)}catch(h){Se(t,a,h)}break;case 5:var l=t.return;try{Au(t)}catch(h){Se(t,l,h)}}}catch(h){Se(t,t.return,h)}if(t===e){$=null;break}var d=t.sibling;if(d!==null){d.return=t.return,$=d;break}$=t.return}}var Q0=Math.ceil,Xo=gn.ReactCurrentDispatcher,$c=gn.ReactCurrentOwner,Nt=gn.ReactCurrentBatchConfig,se=0,Be=null,Pe=null,He=0,ft=0,Gr=Wn(0),Ie=0,vs=null,fr=0,ya=0,Fc=0,Qi=null,st=null,Wc=0,di=1/0,on=null,ea=!1,Du=null,Mn=null,po=!1,Pn=null,ta=0,Yi=0,zu=null,Co=-1,Lo=0;function et(){return se&6?Ee():Co!==-1?Co:Co=Ee()}function Dn(e){return e.mode&1?se&2&&He!==0?He&-He:A0.transition!==null?(Lo===0&&(Lo=Jp()),Lo):(e=le,e!==0||(e=window.event,e=e===void 0?16:rm(e.type)),e):1}function $t(e,t,n,i){if(50<Yi)throw Yi=0,zu=null,Error(D(185));Ts(e,n,i),(!(se&2)||e!==Be)&&(e===Be&&(!(se&2)&&(ya|=n),Ie===4&&jn(e,He)),ut(e,i),n===1&&se===0&&!(t.mode&1)&&(di=Ee()+500,pa&&qn()))}function ut(e,t){var n=e.callbackNode;A_(e,t);var i=zo(e,e===Be?He:0);if(i===0)n!==null&&Rh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Rh(n),t===1)e.tag===0?R0(jf.bind(null,e)):bm(jf.bind(null,e)),P0(function(){!(se&6)&&qn()}),n=null;else{switch(Qp(i)){case 1:n=mc;break;case 4:n=Kp;break;case 16:n=Do;break;case 536870912:n=Gp;break;default:n=Do}n=xg(n,fg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fg(e,t){if(Co=-1,Lo=0,se&6)throw Error(D(327));var n=e.callbackNode;if(ni()&&e.callbackNode!==n)return null;var i=zo(e,e===Be?He:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=na(e,i);else{t=i;var s=se;se|=2;var a=mg();(Be!==e||He!==t)&&(on=null,di=Ee()+500,lr(e,t));do try{ex();break}catch(d){pg(e,d)}while(!0);Nc(),Xo.current=a,se=s,Pe!==null?t=0:(Be=null,He=0,t=Ie)}if(t!==0){if(t===2&&(s=du(e),s!==0&&(i=s,t=Bu(e,s))),t===1)throw n=vs,lr(e,0),jn(e,i),ut(e,Ee()),n;if(t===6)jn(e,i);else{if(s=e.current.alternate,!(i&30)&&!Y0(s)&&(t=na(e,i),t===2&&(a=du(e),a!==0&&(i=a,t=Bu(e,a))),t===1))throw n=vs,lr(e,0),jn(e,i),ut(e,Ee()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(D(345));case 2:er(e,st,on);break;case 3:if(jn(e,i),(i&130023424)===i&&(t=Wc+500-Ee(),10<t)){if(zo(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){et(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=_u(er.bind(null,e,st,on),t);break}er(e,st,on);break;case 4:if(jn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var l=31-Ut(i);a=1<<l,l=t[l],l>s&&(s=l),i&=~a}if(i=s,i=Ee()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Q0(i/1960))-i,10<i){e.timeoutHandle=_u(er.bind(null,e,st,on),i);break}er(e,st,on);break;case 5:er(e,st,on);break;default:throw Error(D(329))}}}return ut(e,Ee()),e.callbackNode===n?fg.bind(null,e):null}function Bu(e,t){var n=Qi;return e.current.memoizedState.isDehydrated&&(lr(e,t).flags|=256),e=na(e,t),e!==2&&(t=st,st=n,t!==null&&Uu(t)),e}function Uu(e){st===null?st=e:st.push.apply(st,e)}function Y0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!Ft(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jn(e,t){for(t&=~Fc,t&=~ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),i=1<<n;e[n]=-1,t&=~i}}function jf(e){if(se&6)throw Error(D(327));ni();var t=zo(e,0);if(!(t&1))return ut(e,Ee()),null;var n=na(e,t);if(e.tag!==0&&n===2){var i=du(e);i!==0&&(t=i,n=Bu(e,i))}if(n===1)throw n=vs,lr(e,0),jn(e,t),ut(e,Ee()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,er(e,st,on),ut(e,Ee()),null}function qc(e,t){var n=se;se|=1;try{return e(t)}finally{se=n,se===0&&(di=Ee()+500,pa&&qn())}}function pr(e){Pn!==null&&Pn.tag===0&&!(se&6)&&ni();var t=se;se|=1;var n=Nt.transition,i=le;try{if(Nt.transition=null,le=1,e)return e()}finally{le=i,Nt.transition=n,se=t,!(se&6)&&qn()}}function Hc(){ft=Gr.current,me(Gr)}function lr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,N0(n)),Pe!==null)for(n=Pe.return;n!==null;){var i=n;switch(Ec(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Wo();break;case 3:ui(),me(at),me(Qe),Ac();break;case 5:Rc(i);break;case 4:ui();break;case 13:me(_e);break;case 19:me(_e);break;case 10:Pc(i.type._context);break;case 22:case 23:Hc()}n=n.return}if(Be=e,Pe=e=zn(e.current,null),He=ft=t,Ie=0,vs=null,Fc=ya=fr=0,st=Qi=null,sr!==null){for(t=0;t<sr.length;t++)if(n=sr[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,a=n.pending;if(a!==null){var l=a.next;a.next=s,i.next=l}n.pending=i}sr=null}return e}function pg(e,t){do{var n=Pe;try{if(Nc(),To.current=Yo,Qo){for(var i=xe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Qo=!1}if(hr=0,ze=Ae=xe=null,Gi=!1,ps=0,$c.current=null,n===null||n.return===null){Ie=1,vs=t,Pe=null;break}e:{var a=e,l=n.return,d=n,h=t;if(t=He,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,g=d,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var x=g.alternate;x?(g.updateQueue=x.updateQueue,g.memoizedState=x.memoizedState,g.lanes=x.lanes):(g.updateQueue=null,g.memoizedState=null)}var b=ff(l);if(b!==null){b.flags&=-257,pf(b,l,d,a,t),b.mode&1&&hf(a,m,t),t=b,h=m;var k=t.updateQueue;if(k===null){var E=new Set;E.add(h),t.updateQueue=E}else k.add(h);break e}else{if(!(t&1)){hf(a,m,t),Zc();break e}h=Error(D(426))}}else if(ge&&d.mode&1){var C=ff(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),pf(C,l,d,a,t),jc(ci(h,d));break e}}a=h=ci(h,d),Ie!==4&&(Ie=2),Qi===null?Qi=[a]:Qi.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var S=Qm(a,h,t);of(a,S);break e;case 1:d=h;var _=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Mn===null||!Mn.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=Ym(a,d,t);of(a,N);break e}}a=a.return}while(a!==null)}vg(n)}catch(I){t=I,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function mg(){var e=Xo.current;return Xo.current=Yo,e===null?Yo:e}function Zc(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Be===null||!(fr&268435455)&&!(ya&268435455)||jn(Be,He)}function na(e,t){var n=se;se|=2;var i=mg();(Be!==e||He!==t)&&(on=null,lr(e,t));do try{X0();break}catch(s){pg(e,s)}while(!0);if(Nc(),se=n,Xo.current=i,Pe!==null)throw Error(D(261));return Be=null,He=0,Ie}function X0(){for(;Pe!==null;)gg(Pe)}function ex(){for(;Pe!==null&&!E_();)gg(Pe)}function gg(e){var t=_g(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?vg(e):Pe=t,$c.current=null}function vg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=V0(n,t),n!==null){n.flags&=32767,Pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ie=6,Pe=null;return}}else if(n=Z0(n,t,ft),n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);Ie===0&&(Ie=5)}function er(e,t,n){var i=le,s=Nt.transition;try{Nt.transition=null,le=1,tx(e,t,n,i)}finally{Nt.transition=s,le=i}return null}function tx(e,t,n,i){do ni();while(Pn!==null);if(se&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(I_(e,a),e===Be&&(Pe=Be=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||po||(po=!0,xg(Do,function(){return ni(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Nt.transition,Nt.transition=null;var l=le;le=1;var d=se;se|=4,$c.current=null,G0(e,n),dg(n,e),w0(vu),Bo=!!gu,vu=gu=null,e.current=n,J0(n),j_(),se=d,le=l,Nt.transition=a}else e.current=n;if(po&&(po=!1,Pn=e,ta=s),a=e.pendingLanes,a===0&&(Mn=null),P_(n.stateNode),ut(e,Ee()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(ea)throw ea=!1,e=Du,Du=null,e;return ta&1&&e.tag!==0&&ni(),a=e.pendingLanes,a&1?e===zu?Yi++:(Yi=0,zu=e):Yi=0,qn(),null}function ni(){if(Pn!==null){var e=Qp(ta),t=Nt.transition,n=le;try{if(Nt.transition=null,le=16>e?16:e,Pn===null)var i=!1;else{if(e=Pn,Pn=null,ta=0,se&6)throw Error(D(331));var s=se;for(se|=4,$=e.current;$!==null;){var a=$,l=a.child;if($.flags&16){var d=a.deletions;if(d!==null){for(var h=0;h<d.length;h++){var m=d[h];for($=m;$!==null;){var g=$;switch(g.tag){case 0:case 11:case 15:Ji(8,g,a)}var y=g.child;if(y!==null)y.return=g,$=y;else for(;$!==null;){g=$;var x=g.sibling,b=g.return;if(lg(g),g===m){$=null;break}if(x!==null){x.return=b,$=x;break}$=b}}}var k=a.alternate;if(k!==null){var E=k.child;if(E!==null){k.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}$=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,$=l;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ji(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,$=S;break e}$=a.return}}var _=e.current;for($=_;$!==null;){l=$;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,$=w;else e:for(l=_;$!==null;){if(d=$,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:va(9,d)}}catch(I){Se(d,d.return,I)}if(d===l){$=null;break e}var N=d.sibling;if(N!==null){N.return=d.return,$=N;break e}$=d.return}}if(se=s,qn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(ua,e)}catch{}i=!0}return i}finally{le=n,Nt.transition=t}}return!1}function Tf(e,t,n){t=ci(n,t),t=Qm(e,t,1),e=In(e,t,1),t=et(),e!==null&&(Ts(e,1,t),ut(e,t))}function Se(e,t,n){if(e.tag===3)Tf(e,e,n);else for(;t!==null;){if(t.tag===3){Tf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Mn===null||!Mn.has(i))){e=ci(n,e),e=Ym(t,e,1),t=In(t,e,1),e=et(),t!==null&&(Ts(t,1,e),ut(t,e));break}}t=t.return}}function nx(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&n,Be===e&&(He&n)===n&&(Ie===4||Ie===3&&(He&130023424)===He&&500>Ee()-Wc?lr(e,0):Fc|=n),ut(e,t)}function yg(e,t){t===0&&(e.mode&1?(t=ro,ro<<=1,!(ro&130023424)&&(ro=4194304)):t=1);var n=et();e=pn(e,t),e!==null&&(Ts(e,t,n),ut(e,n))}function rx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yg(e,n)}function ix(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(D(314))}i!==null&&i.delete(t),yg(e,n)}var _g;_g=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)ot=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ot=!1,H0(e,t,n);ot=!!(e.flags&131072)}else ot=!1,ge&&t.flags&1048576&&Sm(t,Zo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Po(e,t),e=t.pendingProps;var s=oi(t,Qe.current);ti(t,n),s=Mc(null,t,i,e,s,n);var a=Dc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lt(i)?(a=!0,qo(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lc(t),s.updater=ga,t.stateNode=s,s._reactInternals=t,ju(t,i,e,n),t=Pu(null,t,i,!0,a,n)):(t.tag=0,ge&&a&&kc(t),Xe(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Po(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=ox(i),e=It(i,e),s){case 0:t=Nu(null,t,i,e,n);break e;case 1:t=vf(null,t,i,e,n);break e;case 11:t=mf(null,t,i,e,n);break e;case 14:t=gf(null,t,i,It(i.type,e),n);break e}throw Error(D(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:It(i,s),Nu(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:It(i,s),vf(e,t,i,s,n);case 3:e:{if(ng(t),e===null)throw Error(D(387));i=t.pendingProps,a=t.memoizedState,s=a.element,Pm(e,t),Go(t,i,null,n);var l=t.memoizedState;if(i=l.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=ci(Error(D(423)),t),t=yf(e,t,i,n,s);break e}else if(i!==s){s=ci(Error(D(424)),t),t=yf(e,t,i,n,s);break e}else for(gt=An(t.stateNode.containerInfo.firstChild),vt=t,ge=!0,Bt=null,n=Tm(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ai(),i===s){t=mn(e,t,n);break e}Xe(e,t,i,n)}t=t.child}return t;case 5:return Cm(t),e===null&&Su(t),i=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,l=s.children,yu(i,s)?l=null:a!==null&&yu(i,a)&&(t.flags|=32),tg(e,t),Xe(e,t,l,n),t.child;case 6:return e===null&&Su(t),null;case 13:return rg(e,t,n);case 4:return Oc(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=li(t,null,i,n):Xe(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:It(i,s),mf(e,t,i,s,n);case 7:return Xe(e,t,t.pendingProps,n),t.child;case 8:return Xe(e,t,t.pendingProps.children,n),t.child;case 12:return Xe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,l=s.value,fe(Vo,i._currentValue),i._currentValue=l,a!==null)if(Ft(a.value,l)){if(a.children===s.children&&!at.current){t=mn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var d=a.dependencies;if(d!==null){l=a.child;for(var h=d.firstContext;h!==null;){if(h.context===i){if(a.tag===1){h=dn(-1,n&-n),h.tag=2;var m=a.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?h.next=h:(h.next=g.next,g.next=h),m.pending=h}}a.lanes|=n,h=a.alternate,h!==null&&(h.lanes|=n),ku(a.return,n,t),d.lanes|=n;break}h=h.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(D(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),ku(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Xe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,ti(t,n),s=Pt(s),i=i(s),t.flags|=1,Xe(e,t,i,n),t.child;case 14:return i=t.type,s=It(i,t.pendingProps),s=It(i.type,s),gf(e,t,i,s,n);case 15:return Xm(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:It(i,s),Po(e,t),t.tag=1,lt(i)?(e=!0,qo(t)):e=!1,ti(t,n),Jm(t,i,s),ju(t,i,s,n),Pu(null,t,i,!0,e,n);case 19:return ig(e,t,n);case 22:return eg(e,t,n)}throw Error(D(156,t.tag))};function xg(e,t){return Vp(e,t)}function sx(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,i){return new sx(e,t,n,i)}function Vc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ox(e){if(typeof e=="function")return Vc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hc)return 11;if(e===fc)return 14}return 2}function zn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oo(e,t,n,i,s,a){var l=2;if(i=e,typeof e=="function")Vc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Br:return ur(n.children,s,a,t);case dc:l=8,s|=8;break;case Jl:return e=Tt(12,n,t,s|2),e.elementType=Jl,e.lanes=a,e;case Ql:return e=Tt(13,n,t,s),e.elementType=Ql,e.lanes=a,e;case Yl:return e=Tt(19,n,t,s),e.elementType=Yl,e.lanes=a,e;case Cp:return _a(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Np:l=10;break e;case Pp:l=9;break e;case hc:l=11;break e;case fc:l=14;break e;case bn:l=16,i=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Tt(l,n,t,s),t.elementType=e,t.type=i,t.lanes=a,t}function ur(e,t,n,i){return e=Tt(7,e,i,t),e.lanes=n,e}function _a(e,t,n,i){return e=Tt(22,e,i,t),e.elementType=Cp,e.lanes=n,e.stateNode={isHidden:!1},e}function Il(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function Ml(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ax(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gl(0),this.expirationTimes=gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gl(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,i,s,a,l,d,h){return e=new ax(e,t,n,d,h),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Tt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lc(a),e}function lx(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function wg(e){if(!e)return $n;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(lt(n))return wm(e,n,t)}return t}function bg(e,t,n,i,s,a,l,d,h){return e=Kc(n,i,!0,e,s,a,l,d,h),e.context=wg(null),n=e.current,i=et(),s=Dn(n),a=dn(i,s),a.callback=t??null,In(n,a,s),e.current.lanes=s,Ts(e,s,i),ut(e,i),e}function xa(e,t,n,i){var s=t.current,a=et(),l=Dn(s);return n=wg(n),t.context===null?t.context=n:t.pendingContext=n,t=dn(a,l),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=In(s,t,l),e!==null&&($t(e,s,l,a),jo(e,s,l)),l}function ra(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Gc(e,t){Nf(e,t),(e=e.alternate)&&Nf(e,t)}function ux(){return null}var Sg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}wa.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));xa(e,t,null,null)};wa.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){xa(null,e,null,null)}),t[fn]=null}};function wa(e){this._internalRoot=e}wa.prototype.unstable_scheduleHydration=function(e){if(e){var t=em();e={blockedOn:null,target:e,priority:t};for(var n=0;n<En.length&&t!==0&&t<En[n].priority;n++);En.splice(n,0,e),n===0&&nm(e)}};function Qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ba(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pf(){}function cx(e,t,n,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var m=ra(l);a.call(m)}}var l=bg(t,i,e,0,null,!1,!1,"",Pf);return e._reactRootContainer=l,e[fn]=l.current,us(e.nodeType===8?e.parentNode:e),pr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var d=i;i=function(){var m=ra(h);d.call(m)}}var h=Kc(e,0,!1,null,null,!1,!1,"",Pf);return e._reactRootContainer=h,e[fn]=h.current,us(e.nodeType===8?e.parentNode:e),pr(function(){xa(t,h,n,i)}),h}function Sa(e,t,n,i,s){var a=n._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var d=s;s=function(){var h=ra(l);d.call(h)}}xa(t,l,e,s)}else l=cx(n,t,e,s,i);return ra(l)}Yp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$i(t.pendingLanes);n!==0&&(gc(t,n|1),ut(t,Ee()),!(se&6)&&(di=Ee()+500,qn()))}break;case 13:pr(function(){var i=pn(e,1);if(i!==null){var s=et();$t(i,e,1,s)}}),Gc(e,1)}};vc=function(e){if(e.tag===13){var t=pn(e,134217728);if(t!==null){var n=et();$t(t,e,134217728,n)}Gc(e,134217728)}};Xp=function(e){if(e.tag===13){var t=Dn(e),n=pn(e,t);if(n!==null){var i=et();$t(n,e,t,i)}Gc(e,t)}};em=function(){return le};tm=function(e,t){var n=le;try{return le=e,t()}finally{le=n}};lu=function(e,t,n){switch(t){case"input":if(tu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=fa(i);if(!s)throw Error(D(90));Op(i),tu(i,s)}}}break;case"textarea":Ap(e,n);break;case"select":t=n.value,t!=null&&Qr(e,!!n.multiple,t,!1)}};$p=qc;Fp=pr;var dx={usingClientEntryPoint:!1,Events:[Ps,Wr,fa,Bp,Up,qc]},zi={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hx={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hp(e),e===null?null:e.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||ux,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{ua=mo.inject(hx),Qt=mo}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dx;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qc(t))throw Error(D(200));return lx(e,t,null,n)};_t.createRoot=function(e,t){if(!Qc(e))throw Error(D(299));var n=!1,i="",s=Sg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Kc(e,1,!1,null,null,n,!1,i,s),e[fn]=t.current,us(e.nodeType===8?e.parentNode:e),new Jc(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Hp(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return pr(e)};_t.hydrate=function(e,t,n){if(!ba(t))throw Error(D(200));return Sa(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(D(405));var i=n!=null&&n.hydratedSources||null,s=!1,a="",l=Sg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=bg(t,null,e,1,n??null,s,!1,a,l),e[fn]=t.current,us(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new wa(t)};_t.render=function(e,t,n){if(!ba(t))throw Error(D(200));return Sa(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!ba(e))throw Error(D(40));return e._reactRootContainer?(pr(function(){Sa(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0):!1};_t.unstable_batchedUpdates=qc;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!ba(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Sa(e,t,n,!1,i)};_t.version="18.3.1-next-f1338f8080-20240426";function kg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kg)}catch(e){console.error(e)}}kg(),kp.exports=_t;var Eg=kp.exports,Cf=Eg;Kl.createRoot=Cf.createRoot,Kl.hydrateRoot=Cf.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ys.apply(this,arguments)}var Cn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cn||(Cn={}));const Lf="popstate";function fx(e){e===void 0&&(e={});function t(i,s){let{pathname:a,search:l,hash:d}=i.location;return $u("",{pathname:a,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:ia(s)}return mx(t,n,null,e)}function Le(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function px(){return Math.random().toString(36).substr(2,8)}function Of(e,t){return{usr:e.state,key:e.key,idx:t}}function $u(e,t,n,i){return n===void 0&&(n=null),ys({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?mi(t):t,{state:n,key:t&&t.key||i||px()})}function ia(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function mi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function mx(e,t,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,d=Cn.Pop,h=null,m=g();m==null&&(m=0,l.replaceState(ys({},l.state,{idx:m}),""));function g(){return(l.state||{idx:null}).idx}function y(){d=Cn.Pop;let C=g(),S=C==null?null:C-m;m=C,h&&h({action:d,location:E.location,delta:S})}function x(C,S){d=Cn.Push;let _=$u(E.location,C,S);m=g()+1;let w=Of(_,m),N=E.createHref(_);try{l.pushState(w,"",N)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(N)}a&&h&&h({action:d,location:E.location,delta:1})}function b(C,S){d=Cn.Replace;let _=$u(E.location,C,S);m=g();let w=Of(_,m),N=E.createHref(_);l.replaceState(w,"",N),a&&h&&h({action:d,location:E.location,delta:0})}function k(C){let S=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof C=="string"?C:ia(C);return _=_.replace(/ $/,"%20"),Le(S,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,S)}let E={get action(){return d},get location(){return e(s,l)},listen(C){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Lf,y),h=C,()=>{s.removeEventListener(Lf,y),h=null}},createHref(C){return t(s,C)},createURL:k,encodeLocation(C){let S=k(C);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:x,replace:b,go(C){return l.go(C)}};return E}var Rf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Rf||(Rf={}));function gx(e,t,n){return n===void 0&&(n="/"),vx(e,t,n)}function vx(e,t,n,i){let s=typeof t=="string"?mi(t):t,a=Xc(s.pathname||"/",n);if(a==null)return null;let l=jg(e);yx(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let m=Cx(a);d=Tx(l[h],m)}return d}function jg(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(a,l,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(Le(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let m=Bn([i,h.relativePath]),g=n.concat(h);a.children&&a.children.length>0&&(Le(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),jg(a.children,t,g,m)),!(a.path==null&&!a.index)&&t.push({path:m,score:Ex(m,a.index),routesMeta:g})};return e.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,l);else for(let h of Tg(a.path))s(a,l,h)}),t}function Tg(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=Tg(i.join("/")),d=[];return d.push(...l.map(h=>h===""?a:[a,h].join("/"))),s&&d.push(...l),d.map(h=>e.startsWith("/")&&h===""?"/":h)}function yx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:jx(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const _x=/^:[\w-]+$/,xx=3,wx=2,bx=1,Sx=10,kx=-2,Af=e=>e==="*";function Ex(e,t){let n=e.split("/"),i=n.length;return n.some(Af)&&(i+=kx),t&&(i+=wx),n.filter(s=>!Af(s)).reduce((s,a)=>s+(_x.test(a)?xx:a===""?bx:Sx),i)}function jx(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function Tx(e,t,n){let{routesMeta:i}=e,s={},a="/",l=[];for(let d=0;d<i.length;++d){let h=i[d],m=d===i.length-1,g=a==="/"?t:t.slice(a.length)||"/",y=Nx({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},g),x=h.route;if(!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Bn([a,y.pathname]),pathnameBase:Ix(Bn([a,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(a=Bn([a,y.pathnameBase]))}return l}function Nx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=Px(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((m,g,y)=>{let{paramName:x,isOptional:b}=g;if(x==="*"){let E=d[y]||"";l=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const k=d[y];return b&&!k?m[x]=void 0:m[x]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:e}}function Px(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Yc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(i.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function Cx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Xc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const Lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ox=e=>Lx.test(e);function Rx(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:s=""}=typeof e=="string"?mi(e):e,a;if(n)if(Ox(n))a=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Yc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?a=If(n.substring(1),"/"):a=If(n,t)}else a=t;return{pathname:a,search:Mx(i),hash:Dx(s)}}function If(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Dl(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ax(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ng(e,t){let n=Ax(e);return t?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Pg(e,t,n,i){i===void 0&&(i=!1);let s;typeof e=="string"?s=mi(e):(s=ys({},e),Le(!s.pathname||!s.pathname.includes("?"),Dl("?","pathname","search",s)),Le(!s.pathname||!s.pathname.includes("#"),Dl("#","pathname","hash",s)),Le(!s.search||!s.search.includes("#"),Dl("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,d;if(l==null)d=n;else{let y=t.length-1;if(!i&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}d=y>=0?t[y]:"/"}let h=Rx(s,d),m=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(m||g)&&(h.pathname+="/"),h}const Bn=e=>e.join("/").replace(/\/\/+/g,"/"),Ix=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Mx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Dx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Cg=["post","put","patch","delete"];new Set(Cg);const Bx=["get",...Cg];new Set(Bx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _s(){return _s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_s.apply(this,arguments)}const ed=P.createContext(null),Ux=P.createContext(null),vr=P.createContext(null),ka=P.createContext(null),yr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Lg=P.createContext(null);function $x(e,t){let{relative:n}=t===void 0?{}:t;Ls()||Le(!1);let{basename:i,navigator:s}=P.useContext(vr),{hash:a,pathname:l,search:d}=Rg(e,{relative:n}),h=l;return i!=="/"&&(h=l==="/"?i:Bn([i,l])),s.createHref({pathname:h,search:d,hash:a})}function Ls(){return P.useContext(ka)!=null}function gi(){return Ls()||Le(!1),P.useContext(ka).location}function Og(e){P.useContext(vr).static||P.useLayoutEffect(e)}function Xt(){let{isDataRoute:e}=P.useContext(yr);return e?ew():Fx()}function Fx(){Ls()||Le(!1);let e=P.useContext(ed),{basename:t,future:n,navigator:i}=P.useContext(vr),{matches:s}=P.useContext(yr),{pathname:a}=gi(),l=JSON.stringify(Ng(s,n.v7_relativeSplatPath)),d=P.useRef(!1);return Og(()=>{d.current=!0}),P.useCallback(function(m,g){if(g===void 0&&(g={}),!d.current)return;if(typeof m=="number"){i.go(m);return}let y=Pg(m,JSON.parse(l),a,g.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Bn([t,y.pathname])),(g.replace?i.replace:i.push)(y,g.state,g)},[t,i,l,a,e])}function Rg(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=P.useContext(vr),{matches:s}=P.useContext(yr),{pathname:a}=gi(),l=JSON.stringify(Ng(s,i.v7_relativeSplatPath));return P.useMemo(()=>Pg(e,JSON.parse(l),a,n==="path"),[e,l,a,n])}function Wx(e,t){return qx(e,t)}function qx(e,t,n,i){Ls()||Le(!1);let{navigator:s}=P.useContext(vr),{matches:a}=P.useContext(yr),l=a[a.length-1],d=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let m=gi(),g;if(t){var y;let C=typeof t=="string"?mi(t):t;h==="/"||(y=C.pathname)!=null&&y.startsWith(h)||Le(!1),g=C}else g=m;let x=g.pathname||"/",b=x;if(h!=="/"){let C=h.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=gx(e,{pathname:b}),E=Gx(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Bn([h,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:Bn([h,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,n,i);return t&&E?P.createElement(ka.Provider,{value:{location:_s({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Cn.Pop}},E):E}function Hx(){let e=Xx(),t=zx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:s},n):null,null)}const Zx=P.createElement(Hx,null);class Vx extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?P.createElement(yr.Provider,{value:this.props.routeContext},P.createElement(Lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kx(e){let{routeContext:t,match:n,children:i}=e,s=P.useContext(ed);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(yr.Provider,{value:t},i)}function Gx(e,t,n,i){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=i)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,d=(s=n)==null?void 0:s.errors;if(d!=null){let g=l.findIndex(y=>y.route.id&&(d==null?void 0:d[y.route.id])!==void 0);g>=0||Le(!1),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,m=-1;if(n&&i&&i.v7_partialHydration)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:x,errors:b}=n,k=y.route.loader&&x[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||k){h=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,y,x)=>{let b,k=!1,E=null,C=null;n&&(b=d&&y.route.id?d[y.route.id]:void 0,E=y.route.errorElement||Zx,h&&(m<0&&x===0?(tw("route-fallback"),k=!0,C=null):m===x&&(k=!0,C=y.route.hydrateFallbackElement||null)));let S=t.concat(l.slice(0,x+1)),_=()=>{let w;return b?w=E:k?w=C:y.route.Component?w=P.createElement(y.route.Component,null):y.route.element?w=y.route.element:w=g,P.createElement(Kx,{match:y,routeContext:{outlet:g,matches:S,isDataRoute:n!=null},children:w})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?P.createElement(Vx,{location:n.location,revalidation:n.revalidation,component:E,error:b,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):_()},null)}var Ag=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ag||{}),Ig=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ig||{});function Jx(e){let t=P.useContext(ed);return t||Le(!1),t}function Qx(e){let t=P.useContext(Ux);return t||Le(!1),t}function Yx(e){let t=P.useContext(yr);return t||Le(!1),t}function Mg(e){let t=Yx(),n=t.matches[t.matches.length-1];return n.route.id||Le(!1),n.route.id}function Xx(){var e;let t=P.useContext(Lg),n=Qx(),i=Mg();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function ew(){let{router:e}=Jx(Ag.UseNavigateStable),t=Mg(Ig.UseNavigateStable),n=P.useRef(!1);return Og(()=>{n.current=!0}),P.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,_s({fromRouteId:t},a)))},[e,t])}const Mf={};function tw(e,t,n){Mf[e]||(Mf[e]=!0)}function nw(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function dt(e){Le(!1)}function rw(e){let{basename:t="/",children:n=null,location:i,navigationType:s=Cn.Pop,navigator:a,static:l=!1,future:d}=e;Ls()&&Le(!1);let h=t.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:h,navigator:a,static:l,future:_s({v7_relativeSplatPath:!1},d)}),[h,d,a,l]);typeof i=="string"&&(i=mi(i));let{pathname:g="/",search:y="",hash:x="",state:b=null,key:k="default"}=i,E=P.useMemo(()=>{let C=Xc(g,h);return C==null?null:{location:{pathname:C,search:y,hash:x,state:b,key:k},navigationType:s}},[h,g,y,x,b,k,s]);return E==null?null:P.createElement(vr.Provider,{value:m},P.createElement(ka.Provider,{children:n,value:E}))}function iw(e){let{children:t,location:n}=e;return Wx(Fu(t),n)}new Promise(()=>{});function Fu(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(i,s)=>{if(!P.isValidElement(i))return;let a=[...t,s];if(i.type===P.Fragment){n.push.apply(n,Fu(i.props.children,a));return}i.type!==dt&&Le(!1),!i.props.index||!i.props.children||Le(!1);let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Fu(i.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Wu.apply(this,arguments)}function sw(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,a;for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ow(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function aw(e,t){return e.button===0&&(!t||t==="_self")&&!ow(e)}const lw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uw="6";try{window.__reactRouterVersion=uw}catch{}const cw="startTransition",Df=n_[cw];function dw(e){let{basename:t,children:n,future:i,window:s}=e,a=P.useRef();a.current==null&&(a.current=fx({window:s,v5Compat:!0}));let l=a.current,[d,h]=P.useState({action:l.action,location:l.location}),{v7_startTransition:m}=i||{},g=P.useCallback(y=>{m&&Df?Df(()=>h(y)):h(y)},[h,m]);return P.useLayoutEffect(()=>l.listen(g),[l,g]),P.useEffect(()=>nw(i),[i]),P.createElement(rw,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:l,future:i})}const hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gt=P.forwardRef(function(t,n){let{onClick:i,relative:s,reloadDocument:a,replace:l,state:d,target:h,to:m,preventScrollReset:g,viewTransition:y}=t,x=sw(t,lw),{basename:b}=P.useContext(vr),k,E=!1;if(typeof m=="string"&&fw.test(m)&&(k=m,hw))try{let w=new URL(window.location.href),N=m.startsWith("//")?new URL(w.protocol+m):new URL(m),I=Xc(N.pathname,b);N.origin===w.origin&&I!=null?m=I+N.search+N.hash:E=!0}catch{}let C=$x(m,{relative:s}),S=pw(m,{replace:l,state:d,target:h,preventScrollReset:g,relative:s,viewTransition:y});function _(w){i&&i(w),w.defaultPrevented||S(w)}return P.createElement("a",Wu({},x,{href:k||C,onClick:E||a?i:_,ref:n,target:h}))});var zf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zf||(zf={}));var Bf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Bf||(Bf={}));function pw(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:l,viewTransition:d}=t===void 0?{}:t,h=Xt(),m=gi(),g=Rg(e,{relative:l});return P.useCallback(y=>{if(aw(y,n)){y.preventDefault();let x=i!==void 0?i:ia(m)===ia(g);h(e,{replace:x,state:s,preventScrollReset:a,relative:l,viewTransition:d})}},[m,h,g,i,s,n,e,a,l,d])}function Ea(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function mw(e,t,n,i){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function d(g){try{m(i.next(g))}catch(y){l(y)}}function h(g){try{m(i.throw(g))}catch(y){l(y)}}function m(g){g.done?a(g.value):s(g.value).then(d,h)}m((i=i.apply(e,t||[])).next())})}const gw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class td extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class vw extends td{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Uf extends td{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $f extends td{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var qu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(qu||(qu={}));class yw{constructor(t,{headers:n={},customFetch:i,region:s=qu.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=gw(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return mw(this,arguments,void 0,function*(n,i={}){var s;let a,l;try{const{headers:d,method:h,body:m,signal:g,timeout:y}=i;let x={},{region:b}=i;b||(b=this.region);const k=new URL(`${this.url}/${n}`);b&&b!=="any"&&(x["x-region"]=b,k.searchParams.set("forceFunctionRegion",b));let E;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",E=m):typeof m=="string"?(x["Content-Type"]="text/plain",E=m):typeof FormData<"u"&&m instanceof FormData?E=m:(x["Content-Type"]="application/json",E=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?E=JSON.stringify(m):E=m;let C=g;y&&(l=new AbortController,a=setTimeout(()=>l.abort(),y),g?(C=l.signal,g.addEventListener("abort",()=>l.abort())):C=l.signal);const S=yield this.fetch(k.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:E,signal:C}).catch(I=>{throw new vw(I)}),_=S.headers.get("x-relay-error");if(_&&_==="true")throw new Uf(S);if(!S.ok)throw new $f(S);let w=((s=S.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),N;return w==="application/json"?N=yield S.json():w==="application/octet-stream"||w==="application/pdf"?N=yield S.blob():w==="text/event-stream"?N=S:w==="multipart/form-data"?N=yield S.formData():N=yield S.text(),{data:N,error:null,response:S}}catch(d){return{data:null,error:d,response:d instanceof $f||d instanceof Uf?d.context:void 0}}finally{a&&clearTimeout(a)}})}}var _w=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},xw=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let s=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,d=null,h=null,m=a.status,g=a.statusText;if(a.ok){var y,x;if(n.method!=="HEAD"){var b;const S=await a.text();S===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((b=n.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=S:d=JSON.parse(S))}const E=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),C=(x=a.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");E&&C&&C.length>1&&(h=parseInt(C[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(d)&&(d.length>1?(l={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var k;const E=await a.text();try{l=JSON.parse(E),Array.isArray(l)&&a.status===404&&(d=[],l=null,m=200,g="OK")}catch{a.status===404&&E===""?(m=204,g="No Content"):l={message:E}}if(l&&n.isMaybeSingle&&(!(l==null||(k=l.details)===null||k===void 0)&&k.includes("0 rows"))&&(l=null,m=200,g="OK"),l&&n.shouldThrowOnError)throw new _w(l)}return{error:l,data:d,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(s=s.catch(a=>{var l;let d="";const h=a==null?void 0:a.cause;if(h){var m,g,y,x;const k=(m=h==null?void 0:h.message)!==null&&m!==void 0?m:"",E=(g=h==null?void 0:h.code)!==null&&g!==void 0?g:"";d=`${(y=a==null?void 0:a.name)!==null&&y!==void 0?y:"FetchError"}: ${a==null?void 0:a.message}`,d+=`

Caused by: ${(x=h==null?void 0:h.name)!==null&&x!==void 0?x:"Error"}: ${k}`,E&&(d+=` (${E})`),h!=null&&h.stack&&(d+=`
${h.stack}`)}else{var b;d=(b=a==null?void 0:a.stack)!==null&&b!==void 0?b:""}return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},ww=class extends xw{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var l;const d=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${h}"; options=${d};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Ff=new RegExp("[,()]");var Ir=class extends ww{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&Ff.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&Ff.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},bw=class{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:i}=t??{},s=n?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(m=>/\s/.test(m)&&!a?"":(m==='"'&&(a=!a),m)).join(""),{url:d,headers:h}=this.cloneRequestState();return d.searchParams.set("select",l),i&&h.append("Prefer",`count=${i}`),new Ir({method:s,url:d,headers:h,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var i;const s="POST",{url:a,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);a.searchParams.set("columns",h.join(","))}}return new Ir({method:s,url:a,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){var a;const l="POST",{url:d,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&d.searchParams.set("on_conflict",t),i&&h.append("Prefer",`count=${i}`),s||h.append("Prefer","missing=default"),Array.isArray(e)){const m=e.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(m.length>0){const g=[...new Set(m)].map(y=>`"${y}"`);d.searchParams.set("columns",g.join(","))}}return new Ir({method:l,url:d,headers:h,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const i="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Ir({method:i,url:s,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Ir({method:n,url:i,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Sw=class Dg{constructor(t,{headers:n={},schema:i,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=i,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new bw(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Dg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:i=!1,get:s=!1,count:a}={}){var l;let d;const h=new URL(`${this.url}/rpc/${t}`);let m;const g=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(g)),y=i&&Object.values(n).some(g);y?(d="POST",m=n):i||s?(d=i?"HEAD":"GET",Object.entries(n).filter(([b,k])=>k!==void 0).map(([b,k])=>[b,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([b,k])=>{h.searchParams.append(b,k)})):(d="POST",m=n);const x=new Headers(this.headers);return y?x.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&x.set("Prefer",`count=${a}`),new Ir({method:d,url:h,headers:x,schema:this.schemaName,body:m,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class kw{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const s=i.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ew="2.90.1",jw=`realtime-js/${Ew}`,zg="1.0.0",Tw="2.0.0",Wf=zg,Hu=1e4,Nw=1e3,Pw=100;var kn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(kn||(kn={}));var Re;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Re||(Re={}));var zt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(zt||(zt={}));var Zu;(function(e){e.websocket="websocket"})(Zu||(Zu={}));var nr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nr||(nr={}));class Cw{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const s=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,i;const s=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,i){var s,a;const l=t.topic,d=(s=t.ref)!==null&&s!==void 0?s:"",h=(a=t.join_ref)!==null&&a!==void 0?a:"",m=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+l.length+m.length+y.length,b=new ArrayBuffer(this.HEADER_LENGTH+x);let k=new DataView(b),E=0;k.setUint8(E++,this.KINDS.userBroadcastPush),k.setUint8(E++,h.length),k.setUint8(E++,d.length),k.setUint8(E++,l.length),k.setUint8(E++,m.length),k.setUint8(E++,y.length),k.setUint8(E++,n),Array.from(h,S=>k.setUint8(E++,S.charCodeAt(0))),Array.from(d,S=>k.setUint8(E++,S.charCodeAt(0))),Array.from(l,S=>k.setUint8(E++,S.charCodeAt(0))),Array.from(m,S=>k.setUint8(E++,S.charCodeAt(0))),Array.from(y,S=>k.setUint8(E++,S.charCodeAt(0)));var C=new Uint8Array(b.byteLength+i.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(i),b.byteLength),C.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[s,a,l,d,h]=i;return n({join_ref:s,ref:a,topic:l,event:d,payload:h})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),s=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,i){const s=n.getUint8(1),a=n.getUint8(2),l=n.getUint8(3),d=n.getUint8(4);let h=this.HEADER_LENGTH+4;const m=i.decode(t.slice(h,h+s));h=h+s;const g=i.decode(t.slice(h,h+a));h=h+a;const y=i.decode(t.slice(h,h+l));h=h+l;const x=t.slice(h,t.byteLength),b=d===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,k={type:this.BROADCAST_EVENT,event:g,payload:b};return l>0&&(k.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class Bg{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var he;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(he||(he={}));const qf=(e,t,n={})=>{var i;const s=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=Lw(l,e,t,s),a),{}):{}},Lw=(e,t,n,i)=>{const s=t.find(d=>d.name===e),a=s==null?void 0:s.type,l=n[e];return a&&!i.includes(a)?Ug(a,l):Vu(l)},Ug=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Iw(t,n)}switch(e){case he.bool:return Ow(t);case he.float4:case he.float8:case he.int2:case he.int4:case he.int8:case he.numeric:case he.oid:return Rw(t);case he.json:case he.jsonb:return Aw(t);case he.timestamp:return Mw(t);case he.abstime:case he.date:case he.daterange:case he.int4range:case he.int8range:case he.money:case he.reltime:case he.text:case he.time:case he.timestamptz:case he.timetz:case he.tsrange:case he.tstzrange:return Vu(t);default:return Vu(t)}},Vu=e=>e,Ow=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Rw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Aw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Iw=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let a;const l=e.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(d=>Ug(t,d))}return e},Mw=e=>typeof e=="string"?e.replace(" ","T"):e,$g=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class zl{constructor(t,n,i={},s=Hu){this.channel=t,this.event=n,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Hf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Hf||(Hf={}));class Xi{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:a,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xi.syncState(this.state,s,a,l),this.pendingDiffs.forEach(h=>{this.state=Xi.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Xi.syncDiff(this.state,s,a,l),d())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,s){const a=this.cloneDeep(t),l=this.transformState(n),d={},h={};return this.map(a,(m,g)=>{l[m]||(h[m]=g)}),this.map(l,(m,g)=>{const y=a[m];if(y){const x=g.map(C=>C.presence_ref),b=y.map(C=>C.presence_ref),k=g.filter(C=>b.indexOf(C.presence_ref)<0),E=y.filter(C=>x.indexOf(C.presence_ref)<0);k.length>0&&(d[m]=k),E.length>0&&(h[m]=E)}else d[m]=g}),this.syncDiff(a,{joins:d,leaves:h},i,s)}static syncDiff(t,n,i,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(a,(d,h)=>{var m;const g=(m=t[d])!==null&&m!==void 0?m:[];if(t[d]=this.cloneDeep(h),g.length>0){const y=t[d].map(b=>b.presence_ref),x=g.filter(b=>y.indexOf(b.presence_ref)<0);t[d].unshift(...x)}i(d,g,h)}),this.map(l,(d,h)=>{let m=t[d];if(!m)return;const g=h.map(y=>y.presence_ref);m=m.filter(y=>g.indexOf(y.presence_ref)<0),t[d]=m,s(d,m,h),m.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const s=t[i];return"metas"in s?n[i]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Zf||(Zf={}));var es;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(es||(es={}));var an;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(an||(an={}));class Jr{constructor(t,n={config:{}},i){var s,a;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Re.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new zl(this,zt.join,this.params,this.timeout),this.rejoinTimer=new Bg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Re.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Re.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zt.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new Xi(this),this.broadcastEndpointURL=$g(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Re.closed){const{config:{broadcast:l,presence:d,private:h}}=this.params,m=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&s!==void 0?s:[],g=!!this.bindings[es.PRESENCE]&&this.bindings[es.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},x={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(an.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(an.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){t==null||t(an.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,C=(k=E==null?void 0:E.length)!==null&&k!==void 0?k:0,S=[];for(let _=0;_<C;_++){const w=E[_],{filter:{event:N,schema:I,table:M,filter:z}}=w,F=b&&b[_];if(F&&F.event===N&&Jr.isFilterValueEqual(F.schema,I)&&Jr.isFilterValueEqual(F.table,M)&&Jr.isFilterValueEqual(F.filter,z))S.push(Object.assign(Object.assign({},w),{id:F.id}));else{this.unsubscribe(),this.state=Re.errored,t==null||t(an.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(an.SUBSCRIBED);return}}).receive("error",b=>{this.state=Re.errored,t==null||t(an.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(an.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Re.joined&&t===es.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(t,n={}){var i,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,d,h;const m=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Re.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new zl(this,zt.leave,{},t),i.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Re.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const s=new AbortController,a=setTimeout(()=>s.abort(),i),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new zl(this,t,n,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Pw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var s,a;const l=t.toLocaleLowerCase(),{close:d,error:h,leave:m,join:g}=zt;if(i&&[d,h,m,g].indexOf(l)>=0&&i!==this._joinRef())return;let x=this._onMessage(l,n,i);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,E,C;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(E=b.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===l}).map(b=>b.callback(x,i)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var k,E,C,S,_,w,N,I;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const M=b.id,z=(k=b.filter)===null||k===void 0?void 0:k.event;return M&&((E=n.ids)===null||E===void 0?void 0:E.includes(M))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))&&(!(!((S=b.filter)===null||S===void 0)&&S.table)||b.filter.table===((_=n.data)===null||_===void 0?void 0:_.table))}else{const M=(N=(w=b==null?void 0:b.filter)===null||w===void 0?void 0:w.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return M==="*"||M===((I=n==null?void 0:n.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:E,table:C,commit_timestamp:S,type:_,errors:w}=k;x=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:S,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(k))}b.callback(x,i)})}_isClosed(){return this.state===Re.closed}_isJoined(){return this.state===Re.joined}_isJoining(){return this.state===Re.joining}_isLeaving(){return this.state===Re.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:i};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&Jr.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(zt.close,{},t)}_onError(t){this._on(zt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Re.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=qf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=qf(t.columns,t.old_record)),n}}const Bl=()=>{},go={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Dw=[1e3,2e3,5e3,1e4],zw=1e4,Bw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Uw{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hu,this.transport=null,this.heartbeatIntervalMs=go.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bl,this.ref=0,this.reconnectTimer=null,this.vsn=Wf,this.logger=Bl,this.conn=null,this.sendBuffer=[],this.serializer=new Cw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Zu.websocket}`,this.httpEndpoint=$g(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kw.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case kn.connecting:return nr.Connecting;case kn.open:return nr.Open;case kn.closing:return nr.Closing;default:return nr.Closed}}isConnected(){return this.connectionState()===nr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===i);if(s)return s;{const a=new Jr(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:i,payload:s,ref:a}=t,l=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${i} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Nw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},go.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",m)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:s,payload:a,ref:l}=n,d=l?`(${l})`:"",h=a.status||"";this.log("receive",`${h} ${i} ${s} ${d}`.trim(),a),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(s,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===kn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===kn.open||this.conn.readyState===kn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(zt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${i}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([Bw],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,i=!1;if(t)n=t,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:jw};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(zt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Bg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},go.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,s,a,l,d,h,m,g,y,x,b;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:Hu,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:go.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:Bl,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:Wf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t==null?void 0:t.reconnectAfterMs)!==null&&m!==void 0?m:k=>Dw[k-1]||zw,this.vsn){case zg:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:(k,E)=>E(JSON.stringify(k)),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:(k,E)=>E(JSON.parse(k));break;case Tw:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(b=t==null?void 0:t.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var xs=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $w(e,t,n){const i=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&i.searchParams.set(s,a);return i.toString()}async function Fw(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Ww(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:s,body:a,headers:l}){const d=$w(e.baseUrl,i,s),h=await Fw(e.auth),m=await t(d,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...h,...l},body:a?JSON.stringify(a):void 0}),g=await m.text(),y=(m.headers.get("content-type")||"").includes("application/json"),x=y&&g?JSON.parse(g):g;if(!m.ok){const b=y?x:void 0,k=b==null?void 0:b.error;throw new xs((k==null?void 0:k.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:b})}return{status:m.status,headers:m.headers,data:x}}}}function vo(e){return e.join("")}var qw=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:vo(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vo(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vo(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vo(e.namespace)}`}),!0}catch(t){if(t instanceof xs&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof xs&&n.status===409)return;throw n}}};function Pr(e){return e.join("")}var Hw=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pr(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof xs&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof xs&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Zw=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Ww({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new qw(this.client,t),this.tableOps=new Hw(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},ja=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ye(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Vw=class extends ja{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ku=class extends ja{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const nd=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Kw=()=>Response,Gu=e=>{if(Array.isArray(e))return e.map(n=>Gu(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Gu(i)}),t},Gw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Jw=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ws(e){"@babel/helpers - typeof";return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ws(e)}function Qw(e,t){if(ws(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(ws(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yw(e){var t=Qw(e,"string");return ws(t)=="symbol"?t:t+""}function Xw(e,t,n){return(t=Yw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vf(Object(n),!0).forEach(function(i){Xw(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const Ul=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},eb=async(e,t,n)=>{e instanceof await Kw()&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new Vw(Ul(i),s,a))}).catch(i=>{t(new Ku(Ul(i),i))}):t(new Ku(Ul(e),e))},tb=(e,t,n,i)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?s:(Gw(i)?(s.headers=Z({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(i)):s.body=i,t!=null&&t.duplex&&(s.duplex=t.duplex),Z(Z({},s),n))};async function Os(e,t,n,i,s,a){return new Promise((l,d)=>{e(n,tb(t,i,s,a)).then(h=>{if(!h.ok)throw h;return i!=null&&i.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>eb(h,d,i))})}async function bs(e,t,n,i){return Os(e,"GET",t,n,i)}async function Mt(e,t,n,i,s){return Os(e,"POST",t,i,s,n)}async function Ju(e,t,n,i,s){return Os(e,"PUT",t,i,s,n)}async function nb(e,t,n,i){return Os(e,"HEAD",t,Z(Z({},n),{},{noResolveJson:!0}),i)}async function rd(e,t,n,i,s){return Os(e,"DELETE",t,i,s,n)}var rb=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}}};let Fg;Fg=Symbol.toStringTag;var ib=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Fg]="BlobDownloadBuilder",this.promise=null}asStream(){return new rb(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}}};const sb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ob=class{constructor(e,t={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=nd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,i){var s=this;try{let a;const l=Z(Z({},Kf),i);let d=Z(Z({},s.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",s.encodeMetadata(h)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),h&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(h))):(a=n,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,h&&(d["x-metadata"]=s.toBase64(s.encodeMetadata(h))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),i!=null&&i.headers&&(d=Z(Z({},d),i.headers));const m=s._removeEmptyFolders(t),g=s._getFinalPath(m),y=await(e=="PUT"?Ju:Mt)(s.fetch,`${s.url}/object/${g}`,a,Z({headers:d},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:y.Id,fullPath:y.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(ye(a))return{data:null,error:a};throw a}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,i){var s=this;const a=s._removeEmptyFolders(e),l=s._getFinalPath(a),d=new URL(s.url+`/object/upload/sign/${l}`);d.searchParams.set("token",t);try{let h;const m=Z({upsert:Kf.upsert},i),g=Z(Z({},s.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",m.cacheControl)):(h=n,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType),{data:{path:a,fullPath:(await Ju(s.fetch,d.toString(),h,{headers:g})).Key},error:null}}catch(h){if(s.shouldThrowOnError)throw h;if(ye(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(e,t){var n=this;try{let i=n._getFinalPath(e);const s=Z({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await Mt(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:s}),l=new URL(n.url+a.url),d=l.searchParams.get("token");if(!d)throw new ja("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:d},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ye(i))return{data:null,error:i};throw i}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var i=this;try{return{data:await Mt(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async copy(e,t,n){var i=this;try{return{data:{path:(await Mt(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var i=this;try{let s=i._getFinalPath(e),a=await Mt(i.fetch,`${i.url}/object/sign/${s}`,Z({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${i.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var i=this;try{const s=await Mt(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:e},{headers:i.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Z(Z({},l),{},{signedUrl:l.signedURL?encodeURI(`${i.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>bs(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new ib(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:Gu(await bs(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ye(i))return{data:null,error:i};throw i}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await nb(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ye(i)&&i instanceof Ku){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${d}`)}}}async remove(e){var t=this;try{return{data:await rd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async list(e,t,n){var i=this;try{const s=Z(Z(Z({},sb),t),{},{prefix:e||""});return{data:await Mt(i.fetch,`${i.url}/object/list/${i.bucketId}`,s,{headers:i.headers},n),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const i=Z({},e);return{data:await Mt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},t),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ye(i))return{data:null,error:i};throw i}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Wg="2.90.1",qg={"X-Client-Info":`storage-js/${Wg}`};var ab=class{constructor(e,t={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Z(Z({},qg),t),this.fetch=nd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await bs(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await bs(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await Mt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ye(i))return{data:null,error:i};throw i}}async updateBucket(e,t){var n=this;try{return{data:await Ju(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ye(i))return{data:null,error:i};throw i}}async emptyBucket(e){var t=this;try{return{data:await Mt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await rd(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},lb=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Z(Z({},qg),t),this.fetch=nd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Mt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),s=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return{data:await bs(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await rd(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!Jw(e))throw new ja("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Zw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const l=s[a];return typeof l!="function"?l:async(...d)=>{try{return{data:await l.apply(s,d),error:null}}catch(h){if(i)throw h;return{data:null,error:h}}}}})}};const id={"X-Client-Info":`storage-js/${Wg}`,"Content-Type":"application/json"};var Hg=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function pt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var $l=class extends Hg{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ub=class extends Hg{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const sd=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cb=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Gf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),db=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new $l(Gf(a),i,l))}).catch(()=>{const a=i+"";t(new $l(s.statusText||`HTTP ${i} error`,i,a))});else{const a=i+"";t(new $l(s.statusText||`HTTP ${i} error`,i,a))}}else t(new ub(Gf(e),e))},hb=(e,t,n,i)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return i?(cb(i)?(s.headers=Z({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(i)):s.body=i,Z(Z({},s),n)):s};async function fb(e,t,n,i,s,a){return new Promise((l,d)=>{e(n,hb(t,i,s,a)).then(h=>{if(!h.ok)throw h;if(i!=null&&i.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>db(h,d,i))})}async function mt(e,t,n,i,s){return fb(e,"POST",t,i,s,n)}var pb=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Z(Z({},id),t),this.fetch=sd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await mt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}async listIndexes(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await mt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}},mb=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Z(Z({},id),t),this.fetch=sd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await mt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await mt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await mt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}},gb=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Z(Z({},id),t),this.fetch=sd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await mt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}},vb=class extends gb{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new yb(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},yb=class extends pb{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Z(Z({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Z(Z({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new _b(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},_b=class extends mb{constructor(e,t,n,i,s){super(e,t,s),this.vectorBucketName=n,this.indexName=i}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Z(Z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Z(Z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Z(Z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Z(Z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Z(Z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},xb=class extends ab{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new ob(this.url,this.headers,e,this.fetch)}get vectors(){return new vb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lb(this.url+"/iceberg",this.headers,this.fetch)}};const Zg="2.90.1",Mr=30*1e3,Qu=3,Fl=Qu*Mr,wb="http://localhost:9999",bb="supabase.auth.token",Sb={"X-Client-Info":`gotrue-js/${Zg}`},Yu="X-Supabase-Api-Version",Vg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Eb=10*60*1e3;class Ss extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function W(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class jb extends Ss{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function Tb(e){return W(e)&&e.name==="AuthApiError"}class rr extends Ss{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class vn extends Ss{constructor(t,n,i,s){super(t,i,s),this.name=n,this.status=i}}class ht extends vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Nb(e){return W(e)&&e.name==="AuthSessionMissingError"}class Cr extends vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yo extends vn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _o extends vn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Pb(e){return W(e)&&e.name==="AuthImplicitGrantRedirectError"}class Jf extends vn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cb extends vn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Xu extends vn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Wl(e){return W(e)&&e.name==="AuthRetryableFetchError"}class Qf extends vn{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class ec extends vn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yf=` 	
\r=`.split(""),Lb=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Yf.length;t+=1)e[Yf[t].charCodeAt(0)]=-2;for(let t=0;t<sa.length;t+=1)e[sa[t].charCodeAt(0)]=t;return e})();function Xf(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(sa[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(sa[i]),t.queuedBits-=6}}function Kg(e,t,n){const i=Lb[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ep(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{Ab(l,i,n)};for(let l=0;l<e.length;l+=1)Kg(e.charCodeAt(l),s,a);return t.join("")}function Ob(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Rb(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Ob(i,t)}}function Ab(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ri(e){const t=[],n={queue:0,queuedBits:0},i=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Kg(e.charCodeAt(s),n,i);return new Uint8Array(t)}function Ib(e){const t=[];return Rb(e,n=>t.push(n)),new Uint8Array(t)}function ar(e){const t=[],n={queue:0,queuedBits:0},i=s=>{t.push(s)};return e.forEach(s=>Xf(s,n,i)),Xf(null,n,i),t.join("")}function Mb(e){return Math.round(Date.now()/1e3)+e}function Db(){return Symbol("auth-callback")}const We=()=>typeof window<"u"&&typeof document<"u",Qn={tested:!1,writable:!1},Gg=()=>{if(!We())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qn.tested)return Qn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qn.tested=!0,Qn.writable=!0}catch{Qn.tested=!0,Qn.writable=!1}return Qn.writable};function zb(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((i,s)=>{t[s]=i}),t}const Jg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Bb=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Dr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Yn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fe=async(e,t)=>{await e.removeItem(t)};class Ta{constructor(){this.promise=new Ta.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ta.promiseConstructor=Promise;function ql(e){const t=e.split(".");if(t.length!==3)throw new ec("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!kb.test(t[i]))throw new ec("JWT not in base64url format");return{header:JSON.parse(ep(t[0])),payload:JSON.parse(ep(t[1])),signature:ri(t[2]),raw:{header:t[0],payload:t[1]}}}async function Ub(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $b(e,t){return new Promise((i,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){i(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function Fb(e){return("0"+e.toString(16)).substr(-2)}function Wb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(t),Array.from(t,Fb).join("")}async function qb(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(i);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Hb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await qb(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lr(e,t,n=!1){const i=Wb();let s=i;n&&(s+="/PASSWORD_RECOVERY"),await Dr(e,`${t}-code-verifier`,s);const a=await Hb(i);return[a,i===a?"plain":"s256"]}const Zb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vb(e){const t=e.headers.get(Yu);if(!t||!t.match(Zb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Kb(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Gb(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Or(e){if(!Jb.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hl(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qb(e,t){return new Proxy(e,{get:(n,i,s)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,s)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,s)}})}function tp(e){return JSON.parse(JSON.stringify(e))}const tr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yb=[502,503,504];async function np(e){var t;if(!Bb(e))throw new Xu(tr(e),0);if(Yb.includes(e.status))throw new Xu(tr(e),e.status);let n;try{n=await e.json()}catch(a){throw new rr(tr(a),a)}let i;const s=Vb(e);if(s&&s.getTime()>=Vg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Qf(tr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new ht}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Qf(tr(n),e.status,n.weak_password.reasons);throw new jb(tr(n),e.status||500,i)}const Xb=(e,t,n,i)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),n))};async function H(e,t,n,i){var s;const a=Object.assign({},i==null?void 0:i.headers);a[Yu]||(a[Yu]=Vg["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const l=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await eS(e,t,n+d,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(h):{data:Object.assign({},h),error:null}}async function eS(e,t,n,i,s,a){const l=Xb(t,i,s,a);let d;try{d=await e(n,Object.assign({},l))}catch(h){throw console.error(h),new Xu(tr(h),0)}if(d.ok||await np(d),i!=null&&i.noResolveJson)return d;try{return await d.json()}catch(h){await np(h)}}function At(e){var t;let n=null;rS(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Mb(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function rp(e){const t=At(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Tn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function tS(e){return{data:e,error:null}}function nS(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:s,verification_type:a}=e,l=Ea(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:i,redirect_to:s,verification_type:a},h=Object.assign({},l);return{data:{properties:d,user:h},error:null}}function ip(e){return e}function rS(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zl=["global","local","others"];class iS{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=Jg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Zl[0]){if(Zl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zl.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(W(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Tn})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=Ea(t,["options"]),s=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:nS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Tn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,s,a,l,d,h;try{const m={nextPage:null,lastPage:0,total:0},g=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:ip});if(g.error)throw g.error;const y=await g.json(),x=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(k=>{const E=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);m[`${C}Page`]=E}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(W(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){Or(t);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Tn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Or(t);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Tn})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Or(t);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Tn})}catch(i){if(W(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Or(t.userId);try{const{data:n,error:i}=await H(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:i}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Or(t.userId),Or(t.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,s,a,l,d,h;try{const m={nextPage:null,lastPage:0,total:0},g=await H(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:ip});if(g.error)throw g.error;const y=await g.json(),x=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(k=>{const E=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);m[`${C}Page`]=E}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(W(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await H(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await H(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await H(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(W(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await H(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await H(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}}function sp(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Rr={debug:!!(globalThis&&Gg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class sS extends Qg{}async function oS(e,t,n){Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new sS(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Rr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function aS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Yg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function lS(e){return parseInt(e,16)}function uS(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function cS(e){var t;const{chainId:n,domain:i,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:d,requestId:h,resources:m,scheme:g,uri:y,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=Yg(e.address),k=g?`${g}://${i}`:i,E=e.statement?`${e.statement}
`:"",C=`${k} wants you to sign in with your Ethereum account:
${b}

${E}`;let S=`URI: ${y}
Version: ${x}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(S+=`
Expiration Time: ${s.toISOString()}`),d&&(S+=`
Not Before: ${d.toISOString()}`),h&&(S+=`
Request ID: ${h}`),m){let _=`
Resources:`;for(const w of m){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);_+=`
- ${w}`}S+=_}return`${C}
${S}`}class Ne extends Error{constructor({message:t,code:n,cause:i,name:s}){var a;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=s??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class oa extends Ne{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function dS({error:e,options:t}){var n,i,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ne({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ne({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ne({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ne({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ne({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Ne({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ne({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(Xg(l)){if(a.rp.id!==l)return new Ne({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ne({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ne({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function hS({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ne({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(Xg(i)){if(n.rpId!==i)return new Ne({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ne({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class fS{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const pS=new fS;function mS(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,s=Ea(e,["challenge","user","excludeCredentials"]),a=ri(t).buffer,l=Object.assign(Object.assign({},n),{id:ri(n.id).buffer}),d=Object.assign(Object.assign({},s),{challenge:a,user:l});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const m=i[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:ri(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function gS(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=Ea(e,["challenge","allowCredentials"]),s=ri(t).buffer,a=Object.assign(Object.assign({},i),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const d=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},d),{id:ri(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function vS(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ar(new Uint8Array(e.response.attestationObject)),clientDataJSON:ar(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yS(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ar(new Uint8Array(s.authenticatorData)),clientDataJSON:ar(new Uint8Array(s.clientDataJSON)),signature:ar(new Uint8Array(s.signature)),userHandle:s.userHandle?ar(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Xg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function op(){var e,t;return!!(We()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function _S(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new oa("Browser returned unexpected credential type",t)}:{data:null,error:new oa("Empty credential response",t)}}catch(t){return{data:null,error:dS({error:t,options:e})}}}async function xS(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new oa("Browser returned unexpected credential type",t)}:{data:null,error:new oa("Empty credential response",t)}}catch(t){return{data:null,error:hS({error:t,options:e})}}}const wS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function aa(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),i={};for(const s of e)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))i[a]=l;else if(n(l))i[a]=l;else if(t(l)){const d=i[a];t(d)?i[a]=aa(d,l):i[a]=aa(l)}else i[a]=l}return i}function SS(e,t){return aa(wS,e,t||{})}function kS(e,t){return aa(bS,e,t||{})}class ES{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:s},a){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:d};const h=s??pS.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${i}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=SS(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:g,error:y}=await _S({publicKey:m,signal:h});return g?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const m=kS(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:g,error:y}=await xS(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:h}));return g?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new rr("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Ss("rpId is required for WebAuthn authentication")};try{if(!op())return{data:null,error:new rr("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:s},{request:a});if(!l)return{data:null,error:d};const{webauthn:h}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:i,credential_response:h.credential_response}})}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new rr("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Ss("rpId is required for WebAuthn registration")};try{if(!op())return{data:null,error:new rr("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:s},{create:a});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:i,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new rr("Unexpected error in register",l)}}}}aS();const jS={url:wb,storageKey:bb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ap(e,t,n){return await n()}const Ar={};class ks{get jwks(){var t,n;return(n=(t=Ar[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ar[this.storageKey]=Object.assign(Object.assign({},Ar[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ar[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ar[this.storageKey]=Object.assign(Object.assign({},Ar[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},jS),t);if(this.storageKey=a.storageKey,this.instanceID=(n=ks.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ks.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&We()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new iS({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Jg(a.fetch),this.lock=a.lock||ap,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&We()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=oS:this.lock=ap,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ES(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Gg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sp(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=sp(this.memoryStorage)),We()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zg}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(We()&&(n=zb(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),We()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Pb(a)){const h=(t=a.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:l,redirectType:d}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return W(n)?this._returnResult({error:n}):this._returnResult({error:new rr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,s;try{const a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:At}),{data:l,error:d}=a;if(d||!l)return this._returnResult({data:{user:null,session:null},error:d});const h=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(a){if(W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,i,s;try{let a;if("email"in t){const{email:g,password:y,options:x}=t;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await Lr(this.storage,this.storageKey)),a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:g,password:y,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:k},xform:At})}else if("phone"in t){const{phone:g,password:y,options:x}=t;a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(i=x==null?void 0:x.data)!==null&&i!==void 0?i:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:At})}else throw new yo("You must provide either an email or phone number and a password");const{data:l,error:d}=a;if(d||!l)return await Fe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:l,options:d}=t;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:rp})}else if("phone"in t){const{phone:a,password:l,options:d}=t;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:rp})}else throw new yo("You must provide either an email or phone number and a password");const{data:i,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){const a=new Cr;return this._returnResult({data:{user:null,session:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,s,a,l,d,h,m,g,y,x;let b,k;if("message"in t)b=t.message,k=t.signature;else{const{chain:E,wallet:C,statement:S,options:_}=t;let w;if(We())if(typeof C=="object")w=C;else{const ne=window;if("ethereum"in ne&&typeof ne.ethereum=="object"&&"request"in ne.ethereum&&typeof ne.ethereum.request=="function")w=ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=C}const N=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),I=await w.request({method:"eth_requestAccounts"}).then(ne=>ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=Yg(I[0]);let z=(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!z){const ne=await w.request({method:"eth_chainId"});z=lS(ne)}const F={domain:N.host,address:M,statement:S,uri:N.href,version:"1",chainId:z,nonce:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=_==null?void 0:_.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=_==null?void 0:_.signInWithEthereum)===null||g===void 0?void 0:g.resources};b=cS(F),k=await w.request({method:"personal_sign",params:[uS(b),M]})}try{const{data:E,error:C}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:k},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:At});if(C)throw C;if(!E||!E.session||!E.user){const S=new Cr;return this._returnResult({data:{user:null,session:null},error:S})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(W(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(t){var n,i,s,a,l,d,h,m,g,y,x,b;let k,E;if("message"in t)k=t.message,E=t.signature;else{const{chain:C,wallet:S,statement:_,options:w}=t;let N;if(We())if(typeof S=="object")N=S;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))N=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=S}const I=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const M=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),_?{statement:_}:null));let z;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")z=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)z=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)k=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),E=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${I.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(s=(i=w==null?void 0:w.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((h=w==null?void 0:w.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((m=w==null?void 0:w.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((y=(g=w==null?void 0:w.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...w.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const M=await N.signMessage(new TextEncoder().encode(k),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=M}}try{const{data:C,error:S}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:ar(E)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:At});if(S)throw S;if(!C||!C.session||!C.user){const _=new Cr;return this._returnResult({data:{user:null,session:null},error:_})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:S})}catch(C){if(W(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(t){const n=await Yn(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Cb;const{data:a,error:l}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:At});if(await Fe(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const d=new Cr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:i,token:s,access_token:a,nonce:l}=t,d=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:At}),{data:h,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const g=new Cr;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,s,a,l;try{if("email"in t){const{email:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Lr(this.storage,this.storageKey));const{error:y}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:d,options:h}=t,{data:m,error:g}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:g})}throw new yo("You must provide either an email or phone number.")}catch(d){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var n,i;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:d}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:At});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,m=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(s){if(W(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,i,s,a,l;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Lr(this.storage,this.storageKey));const m=await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:tS});return!((a=m.data)===null||a===void 0)&&a.url&&We()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new ht;const{error:s}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(W(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:s,options:a}=t,{error:l}=await H(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:i,type:s,options:a}=t,{data:l,error:d}=await H(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d})}throw new yo("You must provide either an email or phone number and a type")}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Fl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const l=await Yn(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Hl()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=Qb(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Tn}):await this._useSession(async n=>{var i,s,a;const{data:l,error:d}=n;if(d)throw d;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Tn})})}catch(n){if(W(n))return Nb(n)&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:s,error:a}=i;if(a)throw a;if(!s.session)throw new ht;const l=s.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await Lr(this.storage,this.storageKey));const{data:m,error:g}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:l.access_token,xform:Tn});if(g)throw g;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(i){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ht;const n=Date.now()/1e3;let i=n,s=!0,a=null;const{payload:l}=ql(t.access_token);if(l.exp&&(i=l.exp,s=i<=n),s){const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;a={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(W(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:l,error:d}=n;if(d)throw d;t=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new ht;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!We())throw new _o("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _o(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Jf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _o("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Jf("No code detected.");const{data:_,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:d,expires_at:h,token_type:m}=t;if(!a||!d||!l||!m)throw new _o("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(d);let x=g+y;h&&(x=parseInt(h));const b=x-g;b*1e3<=Mr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const k=x-y;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,g);const{data:E,error:C}=await this._getUser(a);if(C)throw C;const S={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:y,expires_at:x,refresh_token:l,token_type:m,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:t.type},error:null})}catch(i){if(W(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Yn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const l=(i=s.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:d}=await this.admin.signOut(l,t);if(d&&!(Tb(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Db(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await Lr(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:s}=await this._useSession(async a=>{var l,d,h,m,g;const{data:y,error:x}=a;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return We()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(W(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:l,provider:d,token:h,access_token:m,nonce:g}=t,y=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:h,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:At}),{data:x,error:b}=y;return b?this._returnResult({data:{user:null,session:null},error:b}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Cr}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:b}))}catch(s){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),W(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,s;const{data:a,error:l}=n;if(l)throw l;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await $b(async s=>(s>0&&await Ub(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:At})),(s,a)=>{const l=200*Math.pow(2,s);return a&&Wl(a)&&Date.now()+l-i<Mr})}catch(i){if(this._debug(n,"error",i),W(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),We()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await Yn(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Yn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Dr(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Hl()}else if(s&&!s.user&&!s.user){const l=await Yn(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Fe(this.storage,this.storageKey+"-user"),await Dr(this.storage,this.storageKey,s)):s.user=Hl()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Fl;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Fl}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Wl(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(s.access_token);!d&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ta;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new ht;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={data:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(s,"error",a),W(a)){const l={data:null,error:a};return Wl(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,i=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Dr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=tp(s);await Dr(this.storage,this.storageKey,a)}else{const s=tp(n);await Dr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fe(this.storage,this.storageKey),await Fe(this.storage,this.storageKey+"-code-verifier"),await Fe(this.storage,this.storageKey+"-user"),this.userStorage&&await Fe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&We()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-t)/Mr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mr}ms, refresh threshold is ${Qu} ticks`),s<=Qu&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!We()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const s=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,l]=await Lr(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(d.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);s.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await H(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:m}=await H(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?vS(t.webauthn.credential_response):yS(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:h}=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:mS(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:gS(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ql(i.access_token);let l=null;a.aal&&(l=a.aal);let d=l;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const m=a.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;return s?this._returnResult({data:null,error:s}):i?await H(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ht})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new ht});const l=await H(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&We()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new ht});const l=await H(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&We()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await H(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ht})})}catch(t){if(W(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;return s?this._returnResult({data:null,error:s}):i?(await H(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ht})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(d=>d.kid===t);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+Eb>s)return i;const{data:a,error:l}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,i=a.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:b,error:k}=await this.getSession();if(k||!b.session)return this._returnResult({data:null,error:k});i=b.session.access_token}const{header:s,payload:a,signature:l,raw:{header:d,payload:h}}=ql(i);n!=null&&n.allowExpired||Kb(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:a,header:s,signature:l},error:null}}const g=Gb(s.alg),y=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,l,Ib(`${d}.${h}`)))throw new ec("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}}ks.nextInstanceID={};const TS=ks,NS="2.90.1";let Wi="";typeof Deno<"u"?Wi="deno":typeof document<"u"?Wi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wi="react-native":Wi="node";const PS={"X-Client-Info":`supabase-js-${Wi}/${NS}`},CS={headers:PS},LS={schema:"public"},OS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RS={};function Es(e){"@babel/helpers - typeof";return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(e)}function AS(e,t){if(Es(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Es(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IS(e){var t=AS(e,"string");return Es(t)=="symbol"?t:t+""}function MS(e,t,n){return(t=IS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lp(Object(n),!0).forEach(function(i){MS(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lp(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const DS=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),zS=()=>Headers,BS=(e,t,n)=>{const i=DS(n),s=zS();return async(a,l)=>{var d;const h=(d=await t())!==null&&d!==void 0?d:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),i(a,be(be({},l),{},{headers:m}))}};function US(e){return e.endsWith("/")?e:e+"/"}function $S(e,t){var n,i;const{db:s,auth:a,realtime:l,global:d}=e,{db:h,auth:m,realtime:g,global:y}=t,x={db:be(be({},h),s),auth:be(be({},m),a),realtime:be(be({},g),l),storage:{},global:be(be(be({},y),d),{},{headers:be(be({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(i=d==null?void 0:d.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function FS(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(US(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var WS=class extends TS{constructor(e){super(e)}},qS=class{constructor(e,t,n){var i,s;this.supabaseUrl=e,this.supabaseKey=t;const a=FS(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,d={db:LS,realtime:RS,auth:be(be({},OS),{},{storageKey:l}),global:CS},h=$S(n??{},d);if(this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=h.auth)!==null&&m!==void 0?m:{},this.headers,h.global.fetch)}this.fetch=BS(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(be({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new Sw(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new xb(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new yw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(t=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:a,flowType:l,lock:d,debug:h,throwOnError:m},g,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WS({url:this.authUrl.href,headers:be(be({},x),g),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:s,flowType:l,lock:d,debug:h,throwOnError:m,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Uw(this.realtimeUrl.href,be(be({},e),{},{params:be(be({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const HS=(e,t,n)=>new qS(e,t,n);function ZS(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}ZS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Vl="https://luzbesnqjlulbqnvsfqe.supabase.co",up="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1emJlc25xamx1bGJxbnZzZnFlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0NDEzODksImV4cCI6MjA4NDAxNzM4OX0.Eq5qvHEGu2njZO6AnkSf8yeb-YZ0w1cu4jHT8l4Rv20";let Ge=null;try{Vl&&up&&!Vl.includes("placeholder")?Ge=HS(Vl,up):Ge={auth:{getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signInWithPassword:async()=>({data:null,error:{message:"Supabase not configured"}}),signUp:async()=>({data:null,error:{message:"Supabase not configured"}}),signOut:async()=>({error:null})}}}catch(e){console.warn("Supabase initialization error:",e),Ge={auth:{getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signInWithPassword:async()=>({data:null,error:{message:"Supabase not configured"}}),signUp:async()=>({data:null,error:{message:"Supabase not configured"}}),signOut:async()=>({error:null})}}}const ev=P.createContext({}),od=()=>{const e=P.useContext(ev);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},VS=({children:e})=>{const[t,n]=P.useState(null),[i,s]=P.useState(!0);P.useEffect(()=>{if(Ge&&Ge.auth){Ge.auth.getSession().then(({data:{session:d}})=>{n((d==null?void 0:d.user)??null),s(!1)}).catch(d=>{console.warn("Auth session error:",d),n(null),s(!1)});const{data:{subscription:l}}=Ge.auth.onAuthStateChange((d,h)=>{n((h==null?void 0:h.user)??null),s(!1)});return()=>{l&&l.unsubscribe()}}else s(!1)},[]);const a={user:t,loading:i,signIn:async(l,d)=>{if(!Ge||!Ge.auth)throw new Error("Supabase is not configured");const{data:h,error:m}=await Ge.auth.signInWithPassword({email:l,password:d});if(m)throw m;return h},signUp:async(l,d)=>{if(!Ge||!Ge.auth)throw new Error("Supabase is not configured");const{data:h,error:m}=await Ge.auth.signUp({email:l,password:d});if(m)throw m;return h},signOut:async()=>{if(!Ge||!Ge.auth)return;const{error:l}=await Ge.auth.signOut();if(l)throw l}};return c.jsx(ev.Provider,{value:a,children:e})},tv=P.createContext({}),ct=()=>{const e=P.useContext(tv);if(!e)throw new Error("useData must be used within a DataProvider");return e},KS=({children:e})=>{const[t,n]=P.useState([]),[i,s]=P.useState([]),[a,l]=P.useState([]),[d,h]=P.useState([]),[m,g]=P.useState(!1);P.useEffect(()=>{const _=localStorage.getItem("bloodRequests"),w=localStorage.getItem("donors"),N=localStorage.getItem("hospitals"),I=localStorage.getItem("emergencies");_&&n(JSON.parse(_)),w&&s(JSON.parse(w)),N&&l(JSON.parse(N)),I&&h(JSON.parse(I))},[]),P.useEffect(()=>{localStorage.setItem("bloodRequests",JSON.stringify(t))},[t]),P.useEffect(()=>{localStorage.setItem("donors",JSON.stringify(i))},[i]),P.useEffect(()=>{localStorage.setItem("hospitals",JSON.stringify(a))},[a]),P.useEffect(()=>{localStorage.setItem("emergencies",JSON.stringify(d))},[d]);const S={bloodRequests:t,donors:i,hospitals:a,emergencies:d,loading:m,setLoading:g,addBloodRequest:_=>{const w={..._,id:Date.now(),status:"Pending",createdAt:new Date().toISOString()};return n([...t,w]),w},updateBloodRequest:(_,w)=>{n(t.map(N=>N.id===_?{...N,...w}:N))},addDonor:_=>{const w={..._,id:Date.now(),available:!0,registeredAt:new Date().toISOString()};return s([...i,w]),w},updateDonor:(_,w)=>{s(i.map(N=>N.id===_?{...N,...w}:N))},addEmergency:_=>{const w={..._,id:Date.now(),time:new Date().toLocaleString(),createdAt:new Date().toISOString()};return h([...d,w]),w},getStats:()=>({totalRequests:t.length,activeRequests:t.filter(_=>_.status==="Pending").length,fulfilledRequests:t.filter(_=>_.status==="Fulfilled").length,totalDonors:i.length,availableDonors:i.filter(_=>_.available).length,totalEmergencies:d.length,activeEmergencies:d.filter(_=>_.urgency==="Critical").length})};return c.jsx(tv.Provider,{value:S,children:e})};class GS extends ii.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n)}render(){return this.state.hasError?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Something went wrong"}),c.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Try again"})]})}):this.props.children}}function JS(){const{pathname:e}=gi();return P.useEffect(()=>{window.scrollTo(0,0)},[e]),null}const QS=({size:e=32})=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[c.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"0",y:"0",width:"32",height:"32",rx:"8",fill:"#E53935"}),c.jsx("path",{d:`M16 22.5s-6.5-4.3-6.5-8.3c0-2.1 1.6-3.7 3.6-3.7\r
             1.4 0 2.6.8 3.2 1.9\r
             .6-1.1 1.8-1.9 3.2-1.9\r
             2 0 3.6 1.6 3.6 3.7\r
             0 4-6.5 8.3-6.5 8.3z`,stroke:"#FFFFFF",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),c.jsx("span",{style:{fontSize:"25px",fontWeight:700,color:"#111111",fontFamily:"Inter, system-ui, sans-serif"},children:"BloodConnect"})]});function YS(){const e=od(),t=(e==null?void 0:e.user)||null,n=(e==null?void 0:e.signOut)||(async()=>{}),i=gi(),s=Xt(),[a,l]=P.useState(!1),[d,h]=P.useState(!1),m=P.useRef(null),g=i.pathname;P.useEffect(()=>{const k=E=>{m.current&&!m.current.contains(E.target)&&h(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const y=()=>{h(!d)},x=()=>{l(!a),s("/critical-alerts")},b=[{path:"/emergency-dashboard",label:"Emergency Dashboard"},{path:"/donor-registration",label:"Become a Donor"},{path:"/blood-request-portal",label:"Request Blood"},{path:"/live-donor-map",label:"Live Map"},{path:"/hospital-management-center",label:"Hospital Center"}];return c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-50",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(Gt,{to:"/",children:c.jsx(QS,{})}),c.jsx("nav",{className:"hidden md:flex gap-1 items-center",children:b.map(k=>{const E=g===k.path||k.path==="/hospital-management-center"&&g.startsWith("/hospital");return c.jsx(Gt,{to:k.path,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${E?"bg-red-600 text-white shadow-md":"text-gray-700 hover:bg-red-50 hover:text-red-600"}`,children:k.label},k.path)})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:x,className:"relative p-2 text-gray-700 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 group",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-600 rounded-full animate-pulse"}),c.jsx("span",{className:"hidden md:inline ml-2 group-hover:font-medium",children:"Alerts"})]}),c.jsxs("div",{className:"relative",ref:m,children:[c.jsxs("button",{onClick:y,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 ${t?"bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-lg":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-red-300"}`,children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{className:"hidden md:inline",children:"Profile"})]}),d&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50 border border-gray-200",children:c.jsx("div",{className:"py-1",children:t?c.jsxs(c.Fragment,{children:[c.jsx(Gt,{to:"/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:()=>h(!1),children:"Dashboard"}),c.jsx("button",{onClick:async()=>{await n(),h(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:"Logout"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Gt,{to:"/login",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:()=>h(!1),children:"Login"}),c.jsx(Gt,{to:"/register",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:()=>h(!1),children:"Register"})]})})})]})]})]}),c.jsx("nav",{className:"md:hidden mt-4 flex flex-wrap gap-2",children:b.map(k=>{const E=g===k.path;return c.jsx(Gt,{to:k.path,className:`text-sm px-3 py-2 rounded transition-all duration-200 ${E?"bg-red-600 text-white":"text-gray-700 hover:bg-red-50 hover:text-red-600"}`,children:k.label},k.path)})})]})})}function XS(){return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-6xl font-bold text-gray-800 mb-4",children:"404"}),c.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Page not found"}),c.jsx(Gt,{to:"/",className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Home"})]})})}function Na(...e){return e.filter(Boolean).join(" ")}function ad({children:e,className:t="",variant:n="primary",size:i="md",disabled:s=!1,onClick:a,type:l="button",...d}){const h={primary:"bg-red-600 hover:bg-red-700 active:bg-red-800 text-white shadow-md hover:shadow-lg",secondary:"bg-white hover:bg-gray-50 active:bg-gray-100 text-gray-700 border border-gray-300",danger:"bg-red-600 hover:bg-red-700 active:bg-red-800 text-white",success:"bg-green-600 hover:bg-green-700 active:bg-green-800 text-white",ghost:"bg-transparent hover:bg-gray-100 active:bg-gray-200 text-gray-700"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},g=s?"opacity-50 cursor-not-allowed pointer-events-none":"transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95";return c.jsx("button",{type:l,className:Na("rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",h[n],m[i],g,t),onClick:a,disabled:s,...d,children:e})}function Ce({className:e="",...t}){return c.jsx("input",{className:Na("w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",e),...t})}function tc({className:e="",children:t,...n}){return c.jsx("select",{className:Na("w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",e),...n,children:t})}function Ro({className:e="",...t}){return c.jsx("input",{type:"checkbox",className:Na("w-4 h-4 text-blue-600 rounded focus:ring-blue-500",e),...t})}function ek(){const{addBloodRequest:e,addEmergency:t}=ct(),[n,i]=P.useState({patientName:"",bloodType:"",unitsRequired:"",urgencyLevel:"",hospitalName:"",contactNumber:"",emailAddress:"",additionalNotes:"",consent:!1}),[s,a]=P.useState(!1),[l,d]=P.useState(!1),h=async g=>{g.preventDefault(),a(!0);try{const y=e({patientName:n.patientName,bloodType:n.bloodType,quantity:parseInt(n.unitsRequired),urgency:n.urgencyLevel.toLowerCase(),location:n.hospitalName,contact:n.contactNumber,email:n.emailAddress,notes:n.additionalNotes});(n.urgencyLevel==="Urgent"||n.urgencyLevel==="Critical")&&t({bloodType:n.bloodType,location:n.hospitalName,urgency:n.urgencyLevel,quantity:n.unitsRequired}),d(!0),i({patientName:"",bloodType:"",unitsRequired:"",urgencyLevel:"",hospitalName:"",contactNumber:"",emailAddress:"",additionalNotes:"",consent:!1}),setTimeout(()=>d(!1),5e3)}catch(y){console.error("Error submitting request:",y),alert("Failed to submit request. Please try again.")}finally{a(!1)}},m=()=>{i({patientName:"",bloodType:"",unitsRequired:"",urgencyLevel:"",hospitalName:"",contactNumber:"",emailAddress:"",additionalNotes:"",consent:!1})};return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 md:p-8",children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Blood Request Form"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Fill in the details below to submit your blood request. All fields marked with * are required."}),l&&c.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",children:" Blood request submitted successfully!"}),c.jsxs("form",{onSubmit:h,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Patient Information"})]}),c.jsxs("div",{className:"space-y-4 pl-8",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name *"}),c.jsx(Ce,{value:n.patientName,onChange:g=>i({...n,patientName:g.target.value}),required:!0,placeholder:"Enter patient's full name"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Type Required *"}),c.jsxs(tc,{value:n.bloodType,onChange:g=>i({...n,bloodType:g.target.value}),required:!0,children:[c.jsx("option",{value:"",children:"Select blood type"}),c.jsx("option",{value:"A+",children:"A+"}),c.jsx("option",{value:"A-",children:"A-"}),c.jsx("option",{value:"B+",children:"B+"}),c.jsx("option",{value:"B-",children:"B-"}),c.jsx("option",{value:"AB+",children:"AB+"}),c.jsx("option",{value:"AB-",children:"AB-"}),c.jsx("option",{value:"O+",children:"O+"}),c.jsx("option",{value:"O-",children:"O-"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Units Required *"}),c.jsx(Ce,{type:"number",min:"1",value:n.unitsRequired,onChange:g=>i({...n,unitsRequired:g.target.value}),required:!0,placeholder:"Number of units"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Urgency Level *"}),c.jsxs(tc,{value:n.urgencyLevel,onChange:g=>i({...n,urgencyLevel:g.target.value}),required:!0,children:[c.jsx("option",{value:"",children:"Select urgency level"}),c.jsx("option",{value:"Normal",children:"Normal"}),c.jsx("option",{value:"Urgent",children:"Urgent"}),c.jsx("option",{value:"Critical",children:"Critical"})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hospital & Contact Details"})]}),c.jsxs("div",{className:"space-y-4 pl-8",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hospital Name *"}),c.jsx(Ce,{value:n.hospitalName,onChange:g=>i({...n,hospitalName:g.target.value}),required:!0,placeholder:"Enter hospital or medical facility name"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number *"}),c.jsx(Ce,{type:"tel",value:n.contactNumber,onChange:g=>i({...n,contactNumber:g.target.value}),required:!0,placeholder:"Enter contact number"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsx(Ce,{type:"email",value:n.emailAddress,onChange:g=>i({...n,emailAddress:g.target.value}),required:!0,placeholder:"Enter email address"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes (Optional)"}),c.jsx("textarea",{value:n.additionalNotes,onChange:g=>i({...n,additionalNotes:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",rows:"4",placeholder:"Any additional information that might help donors..."})]}),c.jsxs("div",{className:"flex items-start",children:[c.jsx(Ro,{checked:n.consent,onChange:g=>i({...n,consent:g.target.checked}),className:"mt-1",required:!0}),c.jsxs("label",{className:"ml-2 text-sm text-gray-700",children:["I consent to share this information with potential donors *",c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your contact details will be shared with verified donors who match your requirements"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("button",{type:"submit",disabled:s,onMouseEnter:g=>{s||g.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105")},onMouseLeave:g=>{g.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105")},className:"flex-1 bg-red-600 hover:bg-red-700 active:bg-red-800 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[c.jsx("span",{children:"Submit Blood Request"}),c.jsx("span",{className:`transition-transform duration-200 ${s?"animate-pulse":""}`,children:""})]}),c.jsx("button",{type:"button",onClick:m,onMouseEnter:g=>g.currentTarget.classList.add("bg-gray-100","border-gray-400","scale-105"),onMouseLeave:g=>g.currentTarget.classList.remove("bg-gray-100","border-gray-400","scale-105"),className:"flex-1 bg-white border border-gray-300 text-gray-700 font-medium py-3 px-6 rounded-lg hover:bg-gray-50 active:bg-gray-100 transition-all duration-200 transform hover:scale-105 active:scale-95",children:"Clear Form"})]})]}),c.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("span",{className:"text-blue-600 text-2xl",children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Need Help?"})]}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Our support team is available 24/7 to assist with emergency blood requests and donor coordination."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("button",{onClick:()=>window.open("tel:+1234567890"),onMouseEnter:g=>g.currentTarget.classList.add("bg-blue-700","shadow-lg","scale-105"),onMouseLeave:g=>g.currentTarget.classList.remove("bg-blue-700","shadow-lg","scale-105"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2 transform hover:scale-105 active:scale-95 font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Call Emergency Hotline"})]}),c.jsxs("button",{onClick:()=>alert("Live chat support will open in a new window."),onMouseEnter:g=>g.currentTarget.classList.add("bg-gray-200","border-gray-300","scale-105"),onMouseLeave:g=>g.currentTarget.classList.remove("bg-gray-200","border-gray-300","scale-105"),className:"px-4 py-2 bg-gray-100 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 flex items-center justify-center gap-2 transform hover:scale-105 active:scale-95 font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Live Chat Support"})]})]})]})]})}function tk({stats:e}){const t=[{label:"Active Requests",value:e.activeRequests||12,icon:"",color:"blue"},{label:"Donors Notified",value:e.activeRequests*20||247,icon:"",color:"orange"},{label:"Responses Received",value:Math.floor(e.activeRequests*20*.36)||89,icon:"",color:"green"},{label:"Avg Response Time",value:"8 min",icon:"",color:"purple"}],n={blue:"bg-blue-50 border-blue-200",orange:"bg-orange-50 border-orange-200",green:"bg-green-50 border-green-200",purple:"bg-purple-50 border-purple-200"};return c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map((i,s)=>c.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 border ${n[i.color]}`,children:[c.jsx("div",{className:"text-3xl mb-3",children:i.icon}),c.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:i.value}),c.jsx("div",{className:"text-sm text-gray-600",children:i.label})]},s))})}function nk(){const{addEmergency:e}=ct(),[t,n]=P.useState(!1),[i,s]=P.useState(!1),a=async()=>{if(confirm("Are you sure you want to send an emergency broadcast to all compatible donors?")){s(!0);try{e({bloodType:"URGENT",location:"All Areas",urgency:"Critical",message:"Emergency blood request - All donors please respond"}),setTimeout(()=>{alert("Emergency broadcast sent to all nearby donors!"),s(!1)},500)}catch(l){console.error("Error sending broadcast:",l),alert("Failed to send broadcast. Please try again."),s(!1)}}};return c.jsxs("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:"bg-gradient-to-r from-red-600 to-orange-600 rounded-lg shadow-lg p-6 md:p-8 text-white transition-all duration-300 transform hover:shadow-xl",children:[c.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[c.jsx("div",{className:`w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0 transition-transform duration-300 ${t?"scale-110 rotate-12":""}`,children:c.jsx("span",{className:"text-2xl",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-2",children:"Critical Emergency? Use Emergency Broadcast"}),c.jsx("p",{className:"text-red-50 text-sm md:text-base",children:"For life-threatening situations, instantly notify all compatible donors within your selected radius."})]})]}),c.jsxs("button",{onClick:a,disabled:i,onMouseEnter:l=>l.currentTarget.classList.add("bg-green-700","shadow-lg","scale-105"),onMouseLeave:l=>l.currentTarget.classList.remove("bg-green-700","shadow-lg","scale-105"),className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("span",{className:`transition-transform duration-200 ${i?"animate-spin":""}`,children:""}),c.jsx("span",{children:i?"Broadcasting...":"Show Emergency Broadcast"})]})]})}function rk(){const{getStats:e}=ct(),t=e();return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-6 md:py-8",children:[c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6 text-center",children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx("span",{className:"text-red-600",children:""}),c.jsx("span",{className:"text-red-800 font-medium",children:"Emergency Blood Request System"})]})}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:"Request Blood Donation"}),c.jsx("p",{className:"text-gray-600 text-lg",children:"Connect with nearby compatible donors instantly. Our intelligent matching system broadcasts your request to verified donors in real-time."})]}),c.jsx(tk,{stats:t}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8",children:[c.jsx("div",{className:"lg:col-span-2",children:c.jsx(ek,{})}),c.jsx("div",{children:c.jsx(nk,{})})]})]})})}function ik({currentStep:e,totalSteps:t}){const n=[{number:1,label:"Personal Info"},{number:2,label:"Medical History"},{number:3,label:"Location"},{number:4,label:"Verification"},{number:5,label:"Review"}];return c.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:c.jsx("div",{className:"flex items-center justify-between",children:n.map((i,s)=>c.jsxs("div",{className:"flex items-center flex-1",children:[c.jsxs("div",{className:"flex flex-col items-center flex-1",children:[c.jsx("div",{className:`w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center font-bold text-lg md:text-xl border-2 transition-all duration-300 ${i.number<=e?"bg-red-600 text-white border-red-600 shadow-md scale-110":"bg-white text-gray-400 border-gray-300 hover:border-gray-400"}`,children:i.number}),c.jsx("span",{className:`mt-2 text-xs md:text-sm font-medium transition-colors duration-200 ${i.number<=e?"text-red-600":"text-gray-400"}`,children:i.label})]}),s<n.length-1&&c.jsx("div",{className:`h-1 flex-1 mx-2 md:mx-4 transition-all duration-300 ${i.number<e?"bg-red-600":"bg-gray-300"}`})]},i.number))})})}function sk({data:e,onChange:t}){return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-2xl",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Personal Information"}),c.jsx("p",{className:"text-gray-600",children:"Help us identify you and ensure accurate matching with recipients."})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),c.jsx(Ce,{value:e.firstName||"",onChange:n=>t({...e,firstName:n.target.value}),required:!0,placeholder:"Enter your first name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),c.jsx(Ce,{value:e.lastName||"",onChange:n=>t({...e,lastName:n.target.value}),required:!0,placeholder:"Enter your last name"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsx(Ce,{type:"email",value:e.email||"",onChange:n=>t({...e,email:n.target.value}),required:!0,placeholder:"your.email@example.com"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll use this for important notifications and account recovery."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),c.jsx(Ce,{type:"tel",value:e.phone||"",onChange:n=>t({...e,phone:n.target.value}),required:!0,placeholder:"Enter your phone number"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Type *"}),c.jsxs(tc,{value:e.bloodType||"",onChange:n=>t({...e,bloodType:n.target.value}),required:!0,children:[c.jsx("option",{value:"",children:"Select blood type"}),c.jsx("option",{value:"A+",children:"A+"}),c.jsx("option",{value:"A-",children:"A-"}),c.jsx("option",{value:"B+",children:"B+"}),c.jsx("option",{value:"B-",children:"B-"}),c.jsx("option",{value:"AB+",children:"AB+"}),c.jsx("option",{value:"AB-",children:"AB-"}),c.jsx("option",{value:"O+",children:"O+"}),c.jsx("option",{value:"O-",children:"O-"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age *"}),c.jsx(Ce,{type:"number",min:"18",max:"65",value:e.age||"",onChange:n=>t({...e,age:n.target.value}),required:!0,placeholder:"18-65"})]})]})]})]})}function ok({data:e,onChange:t}){return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-2xl",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Medical History"}),c.jsx("p",{className:"text-gray-600",children:"Please provide your medical history information."})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Donation Date"}),c.jsx(Ce,{type:"date",value:e.lastDonation||"",onChange:n=>t({...e,lastDonation:n.target.value})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Medical Conditions"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx(Ro,{checked:e.noMedicalConditions||!1,onChange:n=>t({...e,noMedicalConditions:n.target.checked})}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"I confirm I have no medical conditions that prevent donation"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx(Ro,{checked:e.notPregnant||!1,onChange:n=>t({...e,notPregnant:n.target.checked})}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Not pregnant or breastfeeding (if applicable)"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx(Ro,{checked:e.noRecentSurgery||!1,onChange:n=>t({...e,noRecentSurgery:n.target.checked})}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"No recent surgery in the last 6 months"})]})]})]})]})]})}function ak({data:e,onChange:t}){return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-2xl",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Location"}),c.jsx("p",{className:"text-gray-600",children:"Help us find nearby blood requests."})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),c.jsx(Ce,{value:e.address||"",onChange:n=>t({...e,address:n.target.value}),required:!0,placeholder:"Enter your street address"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),c.jsx(Ce,{value:e.city||"",onChange:n=>t({...e,city:n.target.value}),required:!0,placeholder:"City"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),c.jsx(Ce,{value:e.state||"",onChange:n=>t({...e,state:n.target.value}),required:!0,placeholder:"State"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),c.jsx(Ce,{value:e.zipCode||"",onChange:n=>t({...e,zipCode:n.target.value}),required:!0,placeholder:"ZIP Code"})]})]})]})]})}function lk(){return c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Verification Email Sent"}),c.jsx("p",{className:"text-gray-600 mb-2",children:"Please check your email and click the verification link to complete your registration."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you don't see the email, please check your spam folder."})]})}function uk({data:e}){return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-2xl",children:""})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review Your Information"}),c.jsx("p",{className:"text-gray-600",children:"Please review all information before submitting."})]})]}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Full Name"}),c.jsxs("p",{className:"text-gray-900",children:[e.firstName," ",e.lastName]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Email"}),c.jsx("p",{className:"text-gray-900",children:e.email})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Phone"}),c.jsx("p",{className:"text-gray-900",children:e.phone})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Blood Type"}),c.jsx("p",{className:"text-gray-900",children:e.bloodType})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Age"}),c.jsx("p",{className:"text-gray-900",children:e.age})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Address"}),c.jsxs("p",{className:"text-gray-900",children:[e.address,", ",e.city,", ",e.state," ",e.zipCode]})]})]})})]})}function ck({isOpen:e,onClose:t}){const[n,i]=P.useState(!1);if(!e)return null;const s=()=>{i(!0),setTimeout(()=>{t(),i(!1)},300)};return c.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-300 ${n?"opacity-0":"opacity-100"}`,onClick:s,children:c.jsxs("div",{onClick:a=>a.stopPropagation(),className:`bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-md w-full mx-4 text-center transform transition-all duration-300 ${n?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[c.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),c.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-gray-800 mb-2",children:"Registration Successful!"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for registering as a blood donor. Your information has been saved."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Gt,{to:"/",children:c.jsx("button",{onClick:s,onMouseEnter:a=>a.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105"),onMouseLeave:a=>a.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105"),className:"w-full px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105 active:scale-95 font-medium",children:"Go to Home"})}),c.jsx("button",{onClick:s,onMouseEnter:a=>a.currentTarget.classList.add("bg-gray-200","scale-105"),onMouseLeave:a=>a.currentTarget.classList.remove("bg-gray-200","scale-105"),className:"w-full px-6 py-3 bg-gray-100 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 transform hover:scale-105 active:scale-95 font-medium",children:"Close"})]})]})})}function dk(){const e=Xt(),{addDonor:t,getStats:n}=ct(),i=n(),[s,a]=P.useState(1),[l,d]=P.useState({firstName:"",lastName:"",email:"",phone:"",bloodType:"",age:"",address:"",city:"",state:"",zipCode:"",medicalHistory:{},lastDonation:""}),[h,m]=P.useState(!1),g=5,y=()=>{s<g&&a(s+1)},x=()=>{s>1&&a(s-1)},b=async()=>{try{t({name:`${l.firstName} ${l.lastName}`,email:l.email,phone:l.phone,bloodType:l.bloodType,age:parseInt(l.age),address:`${l.address}, ${l.city}, ${l.state} ${l.zipCode}`,city:l.city,state:l.state,zipCode:l.zipCode,lastDonation:l.lastDonation,available:!0,distance:`${(Math.random()*5+1).toFixed(1)} km`}),m(!0)}catch(E){console.error("Error registering donor:",E),alert("Failed to register. Please try again.")}},k=()=>{switch(s){case 1:return c.jsx(sk,{data:l,onChange:d});case 2:return c.jsx(ok,{data:l,onChange:d});case 3:return c.jsx(ak,{data:l,onChange:d});case 4:return c.jsx(lk,{});case 5:return c.jsx(uk,{data:l});default:return null}};return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-6 md:py-12",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[c.jsx("span",{className:"text-red-600 text-2xl",children:""}),c.jsx("span",{className:"text-lg text-gray-700",children:"Join Our Life-Saving Community"})]}),c.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Become a Blood Donor"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Complete your registration to start saving lives. Your generosity creates miracles."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 max-w-4xl mx-auto",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[c.jsx("div",{className:"text-red-600 text-4xl mb-3",children:""}),c.jsx("div",{className:"text-3xl md:text-4xl font-bold text-red-600 mb-2",children:i.totalDonors.toLocaleString()}),c.jsx("div",{className:"text-gray-600",children:"Active Donors"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[c.jsx("div",{className:"text-green-600 text-4xl mb-3",children:""}),c.jsx("div",{className:"text-3xl md:text-4xl font-bold text-green-600 mb-2",children:(i.totalDonors*2.67).toLocaleString()}),c.jsx("div",{className:"text-gray-600",children:"Lives Saved"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[c.jsx("div",{className:"text-orange-600 text-4xl mb-3",children:""}),c.jsx("div",{className:"text-3xl md:text-4xl font-bold text-orange-600 mb-2",children:"8 min"}),c.jsx("div",{className:"text-gray-600",children:"Avg Response"})]})]}),c.jsx(ik,{currentStep:s,totalSteps:g}),c.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-lg border-2 border-yellow-400 p-6 md:p-8",children:[k(),c.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[c.jsx("button",{onClick:x,disabled:s===1,onMouseEnter:E=>{s>1&&E.currentTarget.classList.add("bg-gray-300","shadow-md","scale-105")},onMouseLeave:E=>{E.currentTarget.classList.remove("bg-gray-300","shadow-md","scale-105")},className:`px-6 py-2 rounded font-medium transition-all duration-200 ${s===1?"bg-gray-200 text-gray-400 cursor-not-allowed opacity-50":"bg-gray-200 text-gray-700 hover:bg-gray-300 active:bg-gray-400 transform hover:scale-105 active:scale-95"}`,children:"Previous"}),s<g?c.jsx("button",{onClick:y,onMouseEnter:E=>E.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105"),onMouseLeave:E=>E.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105"),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105 active:scale-95 font-medium",children:"Next "}):c.jsx("button",{onClick:b,onMouseEnter:E=>E.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105"),onMouseLeave:E=>E.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105"),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105 active:scale-95 font-medium",children:" Submit Registration"})]})]})]}),c.jsx(ck,{isOpen:h,onClose:()=>{m(!1),e("/")}})]})}function nv({kpi:e}){const t={green:"bg-green-50 border-green-200",red:"bg-red-50 border-red-200",blue:"bg-blue-50 border-blue-200",orange:"bg-orange-50 border-orange-200"},n={green:"text-green-600",red:"text-red-600",blue:"text-blue-600",orange:"text-orange-600"};return c.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 border ${t[e.color]}`,children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("div",{className:`text-3xl ${n[e.color]}`,children:e.icon})}),c.jsxs("div",{className:"mb-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase mb-1",children:e.title}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.value})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[e.trendUp?c.jsx("span",{className:"text-green-600",children:""}):c.jsx("span",{className:"text-red-600",children:""}),c.jsx("span",{className:`text-xs ${e.trendUp?"text-green-600":"text-red-600"}`,children:e.trend})]})]})}function rv({activeTab:e,setActiveTab:t}){const n=[{id:"overview",label:"Overview",icon:""},{id:"alerts",label:"Emergency Alerts",icon:""},{id:"requests",label:"Active Requests",icon:""},{id:"donors",label:"Available Donors",icon:""}];return c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:n.map(i=>c.jsxs("button",{onClick:()=>t(i.id),onMouseEnter:s=>{e!==i.id&&s.currentTarget.classList.add("bg-gray-50")},onMouseLeave:s=>{e!==i.id&&s.currentTarget.classList.remove("bg-gray-50")},className:`px-4 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap flex items-center gap-2 ${e===i.id?"bg-red-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 hover:border-gray-300"}`,children:[c.jsx("span",{children:i.icon}),c.jsx("span",{children:i.label})]},i.id))})}function iv(e,t){const n=P.useRef(t);P.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const hk=1;function fk(e){return Object.freeze({__version:hk,map:e})}function pk(e,t){return Object.freeze({...e,...t})}const sv=P.createContext(null),ov=sv.Provider;function av(){const e=P.useContext(sv);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function mk(e){function t(n,i){const{instance:s,context:a}=e(n).current;return P.useImperativeHandle(i,()=>s),n.children==null?null:ii.createElement(ov,{value:a},n.children)}return P.forwardRef(t)}function gk(e){function t(n,i){const[s,a]=P.useState(!1),{instance:l}=e(n,a).current;P.useImperativeHandle(i,()=>l),P.useEffect(function(){s&&l.update()},[l,s,n.children]);const d=l._contentNode;return d?Eg.createPortal(n.children,d):null}return P.forwardRef(t)}function vk(e){function t(n,i){const{instance:s}=e(n).current;return P.useImperativeHandle(i,()=>s),null}return P.forwardRef(t)}function lv(e,t){const n=P.useRef();P.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function ld(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function yk(e,t){return function(i,s){const a=av(),l=e(ld(i,a),a);return iv(a.map,i.attribution),lv(l.current,i.eventHandlers),t(l.current,a,i,s),l}}var nc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(By,function(n){var i="1.9.4";function s(r){var o,u,f,p;for(u=1,f=arguments.length;u<f;u++){p=arguments[u];for(o in p)r[o]=p[o]}return r}var a=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function l(r,o){var u=Array.prototype.slice;if(r.bind)return r.bind.apply(r,u.call(arguments,1));var f=u.call(arguments,2);return function(){return r.apply(o,f.length?f.concat(u.call(arguments)):arguments)}}var d=0;function h(r){return"_leaflet_id"in r||(r._leaflet_id=++d),r._leaflet_id}function m(r,o,u){var f,p,v,j;return j=function(){f=!1,p&&(v.apply(u,p),p=!1)},v=function(){f?p=arguments:(r.apply(u,arguments),setTimeout(j,o),f=!0)},v}function g(r,o,u){var f=o[1],p=o[0],v=f-p;return r===f&&u?r:((r-p)%v+v)%v+p}function y(){return!1}function x(r,o){if(o===!1)return r;var u=Math.pow(10,o===void 0?6:o);return Math.round(r*u)/u}function b(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function k(r){return b(r).split(/\s+/)}function E(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var u in o)r.options[u]=o[u];return r.options}function C(r,o,u){var f=[];for(var p in r)f.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(r[p]));return(!o||o.indexOf("?")===-1?"?":"&")+f.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function _(r,o){return r.replace(S,function(u,f){var p=o[f];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(o)),p})}var w=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function N(r,o){for(var u=0;u<r.length;u++)if(r[u]===o)return u;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var z=0;function F(r){var o=+new Date,u=Math.max(0,16-(o-z));return z=o+u,window.setTimeout(r,u)}var ne=window.requestAnimationFrame||M("RequestAnimationFrame")||F,X=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function ce(r,o,u){if(u&&ne===F)r.call(o);else return ne.call(window,l(r,o))}function Me(r){r&&X.call(window,r)}var Hn={__proto__:null,extend:s,create:a,bind:l,get lastId(){return d},stamp:h,throttle:m,wrapNum:g,falseFn:y,formatNum:x,trim:b,splitWords:k,setOptions:E,getParamString:C,template:_,isArray:w,indexOf:N,emptyImageUrl:I,requestFn:ne,cancelFn:X,requestAnimFrame:ce,cancelAnimFrame:Me};function wt(){}wt.extend=function(r){var o=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,f=a(u);f.constructor=o,o.prototype=f;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(o[p]=this[p]);return r.statics&&s(o,r.statics),r.includes&&(Ca(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=u.options?a(u.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,j=f._initHooks.length;v<j;v++)f._initHooks[v].call(this)}},o},wt.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},wt.mergeOptions=function(r){return s(this.prototype.options,r),this},wt.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),u=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Ca(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=w(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ue={on:function(r,o,u){if(typeof r=="object")for(var f in r)this._on(f,r[f],o);else{r=k(r);for(var p=0,v=r.length;p<v;p++)this._on(r[p],o,u)}return this},off:function(r,o,u){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],o);else{r=k(r);for(var p=arguments.length===1,v=0,j=r.length;v<j;v++)p?this._off(r[v]):this._off(r[v],o,u)}return this},_on:function(r,o,u,f){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,u)===!1){u===this&&(u=void 0);var p={fn:o,ctx:u};f&&(p.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(p)}},_off:function(r,o,u){var f,p,v;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(p=0,v=f.length;p<v;p++)f[p].fn=y;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var j=this._listens(r,o,u);if(j!==!1){var T=f[j];this._firingCount&&(T.fn=y,this._events[r]=f=f.slice()),f.splice(j,1)}}},fire:function(r,o,u){if(!this.listens(r,u))return this;var f=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var p=this._events[r];if(p){this._firingCount=this._firingCount+1||1;for(var v=0,j=p.length;v<j;v++){var T=p[v],O=T.fn;T.once&&this.off(r,O,T.ctx),O.call(T.ctx||this,f)}this._firingCount--}}return u&&this._propagateEvent(f),this},listens:function(r,o,u,f){typeof r!="string"&&console.warn('"string" type argument expected');var p=o;typeof o!="function"&&(f=!!o,p=void 0,u=void 0);var v=this._events&&this._events[r];if(v&&v.length&&this._listens(r,p,u)!==!1)return!0;if(f){for(var j in this._eventParents)if(this._eventParents[j].listens(r,o,u,f))return!0}return!1},_listens:function(r,o,u){if(!this._events)return!1;var f=this._events[r]||[];if(!o)return!!f.length;u===this&&(u=void 0);for(var p=0,v=f.length;p<v;p++)if(f[p].fn===o&&f[p].ctx===u)return p;return!1},once:function(r,o,u){if(typeof r=="object")for(var f in r)this._on(f,r[f],o,!0);else{r=k(r);for(var p=0,v=r.length;p<v;p++)this._on(r[p],o,u,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[h(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[h(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Ue.addEventListener=Ue.on,Ue.removeEventListener=Ue.clearAllEventListeners=Ue.off,Ue.addOneTimeEventListener=Ue.once,Ue.fireEvent=Ue.fire,Ue.hasEventListeners=Ue.listens;var en=wt.extend(Ue);function R(r,o,u){this.x=u?Math.round(r):r,this.y=u?Math.round(o):o}var G=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(r){return this.clone()._add(B(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(B(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new R(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new R(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(r){r=B(r);var o=r.x-this.x,u=r.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(r){return r=B(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=B(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function B(r,o,u){return r instanceof R?r:w(r)?new R(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new R(r.x,r.y):new R(r,o,u)}function K(r,o){if(r)for(var u=o?[r,o]:r,f=0,p=u.length;f<p;f++)this.extend(u[f])}K.prototype={extend:function(r){var o,u;if(!r)return this;if(r instanceof R||typeof r[0]=="number"||"x"in r)o=u=B(r);else if(r=ie(r),o=r.min,u=r.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(r){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,u;return typeof r[0]=="number"||r instanceof R?r=B(r):r=ie(r),r instanceof K?(o=r.min,u=r.max):o=u=r,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(r){r=ie(r);var o=this.min,u=this.max,f=r.min,p=r.max,v=p.x>=o.x&&f.x<=u.x,j=p.y>=o.y&&f.y<=u.y;return v&&j},overlaps:function(r){r=ie(r);var o=this.min,u=this.max,f=r.min,p=r.max,v=p.x>o.x&&f.x<u.x,j=p.y>o.y&&f.y<u.y;return v&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,u=this.max,f=Math.abs(o.x-u.x)*r,p=Math.abs(o.y-u.y)*r;return ie(B(o.x-f,o.y-p),B(u.x+f,u.y+p))},equals:function(r){return r?(r=ie(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ie(r,o){return!r||r instanceof K?r:new K(r,o)}function Oe(r,o){if(r)for(var u=o?[r,o]:r,f=0,p=u.length;f<p;f++)this.extend(u[f])}Oe.prototype={extend:function(r){var o=this._southWest,u=this._northEast,f,p;if(r instanceof oe)f=r,p=r;else if(r instanceof Oe){if(f=r._southWest,p=r._northEast,!f||!p)return this}else return r?this.extend(J(r)||ue(r)):this;return!o&&!u?(this._southWest=new oe(f.lat,f.lng),this._northEast=new oe(p.lat,p.lng)):(o.lat=Math.min(f.lat,o.lat),o.lng=Math.min(f.lng,o.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(r){var o=this._southWest,u=this._northEast,f=Math.abs(o.lat-u.lat)*r,p=Math.abs(o.lng-u.lng)*r;return new Oe(new oe(o.lat-f,o.lng-p),new oe(u.lat+f,u.lng+p))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof oe||"lat"in r?r=J(r):r=ue(r);var o=this._southWest,u=this._northEast,f,p;return r instanceof Oe?(f=r.getSouthWest(),p=r.getNorthEast()):f=p=r,f.lat>=o.lat&&p.lat<=u.lat&&f.lng>=o.lng&&p.lng<=u.lng},intersects:function(r){r=ue(r);var o=this._southWest,u=this._northEast,f=r.getSouthWest(),p=r.getNorthEast(),v=p.lat>=o.lat&&f.lat<=u.lat,j=p.lng>=o.lng&&f.lng<=u.lng;return v&&j},overlaps:function(r){r=ue(r);var o=this._southWest,u=this._northEast,f=r.getSouthWest(),p=r.getNorthEast(),v=p.lat>o.lat&&f.lat<u.lat,j=p.lng>o.lng&&f.lng<u.lng;return v&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=ue(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(r,o){return r instanceof Oe?r:new Oe(r,o)}function oe(r,o,u){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,u!==void 0&&(this.alt=+u)}oe.prototype={equals:function(r,o){if(!r)return!1;r=J(r);var u=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return u<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+x(this.lat,r)+", "+x(this.lng,r)+")"},distanceTo:function(r){return yn.distance(this,J(r))},wrap:function(){return yn.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return ue([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function J(r,o,u){return r instanceof oe?r:w(r)&&typeof r[0]!="object"?r.length===3?new oe(r[0],r[1],r[2]):r.length===2?new oe(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new oe(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new oe(r,o,u)}var rt={latLngToPoint:function(r,o){var u=this.projection.project(r),f=this.scale(o);return this.transformation._transform(u,f)},pointToLatLng:function(r,o){var u=this.scale(o),f=this.transformation.untransform(r,u);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(r),f=this.transformation.transform(o.min,u),p=this.transformation.transform(o.max,u);return new K(f,p)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?g(r.lng,this.wrapLng,!0):r.lng,u=this.wrapLat?g(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new oe(u,o,f)},wrapLatLngBounds:function(r){var o=r.getCenter(),u=this.wrapLatLng(o),f=o.lat-u.lat,p=o.lng-u.lng;if(f===0&&p===0)return r;var v=r.getSouthWest(),j=r.getNorthEast(),T=new oe(v.lat-f,v.lng-p),O=new oe(j.lat-f,j.lng-p);return new Oe(T,O)}},yn=s({},rt,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var u=Math.PI/180,f=r.lat*u,p=o.lat*u,v=Math.sin((o.lat-r.lat)*u/2),j=Math.sin((o.lng-r.lng)*u/2),T=v*v+Math.cos(f)*Math.cos(p)*j*j,O=2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T));return this.R*O}}),dd=6378137,La={R:dd,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,u=this.MAX_LATITUDE,f=Math.max(Math.min(u,r.lat),-u),p=Math.sin(f*o);return new R(this.R*r.lng*o,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(r){var o=180/Math.PI;return new oe((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=dd*Math.PI;return new K([-r,-r],[r,r])}()};function Oa(r,o,u,f){if(w(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=u,this._d=f}Oa.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new R((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function vi(r,o,u,f){return new Oa(r,o,u,f)}var Ra=s({},yn,{code:"EPSG:3857",projection:La,transformation:function(){var r=.5/(Math.PI*La.R);return vi(r,.5,-r,.5)}()}),pv=s({},Ra,{code:"EPSG:900913"});function hd(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function fd(r,o){var u="",f,p,v,j,T,O;for(f=0,v=r.length;f<v;f++){for(T=r[f],p=0,j=T.length;p<j;p++)O=T[p],u+=(p?"L":"M")+O.x+" "+O.y;u+=o?q.svg?"z":"x":""}return u||"M0 0"}var Aa=document.documentElement.style,Rs="ActiveXObject"in window,mv=Rs&&!document.addEventListener,pd="msLaunchUri"in navigator&&!("documentMode"in document),Ia=Wt("webkit"),md=Wt("android"),gd=Wt("android 2")||Wt("android 3"),gv=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vv=md&&Wt("Google")&&gv<537&&!("AudioNode"in window),Ma=!!window.opera,vd=!pd&&Wt("chrome"),yd=Wt("gecko")&&!Ia&&!Ma&&!Rs,yv=!vd&&Wt("safari"),_d=Wt("phantom"),xd="OTransition"in Aa,_v=navigator.platform.indexOf("Win")===0,wd=Rs&&"transition"in Aa,Da="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!gd,bd="MozPerspective"in Aa,xv=!window.L_DISABLE_3D&&(wd||Da||bd)&&!xd&&!_d,yi=typeof orientation<"u"||Wt("mobile"),wv=yi&&Ia,bv=yi&&Da,Sd=!window.PointerEvent&&window.MSPointerEvent,kd=!!(window.PointerEvent||Sd),Ed="ontouchstart"in window||!!window.TouchEvent,Sv=!window.L_NO_TOUCH&&(Ed||kd),kv=yi&&Ma,Ev=yi&&yd,jv=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tv=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",y,o),window.removeEventListener("testPassiveEventSupport",y,o)}catch{}return r}(),Nv=function(){return!!document.createElement("canvas").getContext}(),za=!!(document.createElementNS&&hd("svg").createSVGRect),Pv=!!za&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cv=!za&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Lv=navigator.platform.indexOf("Mac")===0,Ov=navigator.platform.indexOf("Linux")===0;function Wt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var q={ie:Rs,ielt9:mv,edge:pd,webkit:Ia,android:md,android23:gd,androidStock:vv,opera:Ma,chrome:vd,gecko:yd,safari:yv,phantom:_d,opera12:xd,win:_v,ie3d:wd,webkit3d:Da,gecko3d:bd,any3d:xv,mobile:yi,mobileWebkit:wv,mobileWebkit3d:bv,msPointer:Sd,pointer:kd,touch:Sv,touchNative:Ed,mobileOpera:kv,mobileGecko:Ev,retina:jv,passiveEvents:Tv,canvas:Nv,svg:za,vml:Cv,inlineSvg:Pv,mac:Lv,linux:Ov},jd=q.msPointer?"MSPointerDown":"pointerdown",Td=q.msPointer?"MSPointerMove":"pointermove",Nd=q.msPointer?"MSPointerUp":"pointerup",Pd=q.msPointer?"MSPointerCancel":"pointercancel",Ba={touchstart:jd,touchmove:Td,touchend:Nd,touchcancel:Pd},Cd={touchstart:zv,touchmove:As,touchend:As,touchcancel:As},_r={},Ld=!1;function Rv(r,o,u){return o==="touchstart"&&Dv(),Cd[o]?(u=Cd[o].bind(this,u),r.addEventListener(Ba[o],u,!1),u):(console.warn("wrong event specified:",o),y)}function Av(r,o,u){if(!Ba[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(Ba[o],u,!1)}function Iv(r){_r[r.pointerId]=r}function Mv(r){_r[r.pointerId]&&(_r[r.pointerId]=r)}function Od(r){delete _r[r.pointerId]}function Dv(){Ld||(document.addEventListener(jd,Iv,!0),document.addEventListener(Td,Mv,!0),document.addEventListener(Nd,Od,!0),document.addEventListener(Pd,Od,!0),Ld=!0)}function As(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in _r)o.touches.push(_r[u]);o.changedTouches=[o],r(o)}}function zv(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&$e(o),As(r,o)}function Bv(r){var o={},u,f;for(f in r)u=r[f],o[f]=u&&u.bind?u.bind(r):u;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Uv=200;function $v(r,o){r.addEventListener("dblclick",o);var u=0,f;function p(v){if(v.detail!==1){f=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var j=Dd(v);if(!(j.some(function(O){return O instanceof HTMLLabelElement&&O.attributes.for})&&!j.some(function(O){return O instanceof HTMLInputElement||O instanceof HTMLSelectElement}))){var T=Date.now();T-u<=Uv?(f++,f===2&&o(Bv(v))):f=1,u=T}}}return r.addEventListener("click",p),{dblclick:o,simDblclick:p}}function Fv(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var Ua=Ds(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_i=Ds(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Rd=_i==="webkitTransition"||_i==="OTransition"?_i+"End":"transitionend";function Ad(r){return typeof r=="string"?document.getElementById(r):r}function xi(r,o){var u=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);u=f?f[o]:null}return u==="auto"?null:u}function ae(r,o,u){var f=document.createElement(r);return f.className=o||"",u&&u.appendChild(f),f}function ve(r){var o=r.parentNode;o&&o.removeChild(r)}function Is(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function xr(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function wr(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function $a(r,o){if(r.classList!==void 0)return r.classList.contains(o);var u=Ms(r);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function Y(r,o){if(r.classList!==void 0)for(var u=k(o),f=0,p=u.length;f<p;f++)r.classList.add(u[f]);else if(!$a(r,o)){var v=Ms(r);Fa(r,(v?v+" ":"")+o)}}function ke(r,o){r.classList!==void 0?r.classList.remove(o):Fa(r,b((" "+Ms(r)+" ").replace(" "+o+" "," ")))}function Fa(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function Ms(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function bt(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&Wv(r,o)}function Wv(r,o){var u=!1,f="DXImageTransform.Microsoft.Alpha";try{u=r.filters.item(f)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):r.style.filter+=" progid:"+f+"(opacity="+o+")"}function Ds(r){for(var o=document.documentElement.style,u=0;u<r.length;u++)if(r[u]in o)return r[u];return!1}function Zn(r,o,u){var f=o||new R(0,0);r.style[Ua]=(q.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(u?" scale("+u+")":"")}function je(r,o){r._leaflet_pos=o,q.any3d?Zn(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function Vn(r){return r._leaflet_pos||new R(0,0)}var wi,bi,Wa;if("onselectstart"in document)wi=function(){Q(window,"selectstart",$e)},bi=function(){de(window,"selectstart",$e)};else{var Si=Ds(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);wi=function(){if(Si){var r=document.documentElement.style;Wa=r[Si],r[Si]="none"}},bi=function(){Si&&(document.documentElement.style[Si]=Wa,Wa=void 0)}}function qa(){Q(window,"dragstart",$e)}function Ha(){de(window,"dragstart",$e)}var zs,Za;function Va(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Bs(),zs=r,Za=r.style.outlineStyle,r.style.outlineStyle="none",Q(window,"keydown",Bs))}function Bs(){zs&&(zs.style.outlineStyle=Za,zs=void 0,Za=void 0,de(window,"keydown",Bs))}function Id(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ka(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var qv={__proto__:null,TRANSFORM:Ua,TRANSITION:_i,TRANSITION_END:Rd,get:Ad,getStyle:xi,create:ae,remove:ve,empty:Is,toFront:xr,toBack:wr,hasClass:$a,addClass:Y,removeClass:ke,setClass:Fa,getClass:Ms,setOpacity:bt,testProp:Ds,setTransform:Zn,setPosition:je,getPosition:Vn,get disableTextSelection(){return wi},get enableTextSelection(){return bi},disableImageDrag:qa,enableImageDrag:Ha,preventOutline:Va,restoreOutline:Bs,getSizedParentNode:Id,getScale:Ka};function Q(r,o,u,f){if(o&&typeof o=="object")for(var p in o)Ja(r,p,o[p],u);else{o=k(o);for(var v=0,j=o.length;v<j;v++)Ja(r,o[v],u,f)}return this}var qt="_leaflet_events";function de(r,o,u,f){if(arguments.length===1)Md(r),delete r[qt];else if(o&&typeof o=="object")for(var p in o)Qa(r,p,o[p],u);else if(o=k(o),arguments.length===2)Md(r,function(T){return N(o,T)!==-1});else for(var v=0,j=o.length;v<j;v++)Qa(r,o[v],u,f);return this}function Md(r,o){for(var u in r[qt]){var f=u.split(/\d/)[0];(!o||o(f))&&Qa(r,f,null,null,u)}}var Ga={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ja(r,o,u,f){var p=o+h(u)+(f?"_"+h(f):"");if(r[qt]&&r[qt][p])return this;var v=function(T){return u.call(f||r,T||window.event)},j=v;!q.touchNative&&q.pointer&&o.indexOf("touch")===0?v=Rv(r,o,v):q.touch&&o==="dblclick"?v=$v(r,v):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(Ga[o]||o,v,q.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(v=function(T){T=T||window.event,Xa(r,T)&&j(T)},r.addEventListener(Ga[o],v,!1)):r.addEventListener(o,j,!1):r.attachEvent("on"+o,v),r[qt]=r[qt]||{},r[qt][p]=v}function Qa(r,o,u,f,p){p=p||o+h(u)+(f?"_"+h(f):"");var v=r[qt]&&r[qt][p];if(!v)return this;!q.touchNative&&q.pointer&&o.indexOf("touch")===0?Av(r,o,v):q.touch&&o==="dblclick"?Fv(r,v):"removeEventListener"in r?r.removeEventListener(Ga[o]||o,v,!1):r.detachEvent("on"+o,v),r[qt][p]=null}function Kn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ya(r){return Ja(r,"wheel",Kn),this}function ki(r){return Q(r,"mousedown touchstart dblclick contextmenu",Kn),r._leaflet_disable_click=!0,this}function $e(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Gn(r){return $e(r),Kn(r),this}function Dd(r){if(r.composedPath)return r.composedPath();for(var o=[],u=r.target;u;)o.push(u),u=u.parentNode;return o}function zd(r,o){if(!o)return new R(r.clientX,r.clientY);var u=Ka(o),f=u.boundingClientRect;return new R((r.clientX-f.left)/u.x-o.clientLeft,(r.clientY-f.top)/u.y-o.clientTop)}var Hv=q.linux&&q.chrome?window.devicePixelRatio:q.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bd(r){return q.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Hv:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Xa(r,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==r;)u=u.parentNode}catch{return!1}return u!==r}var Zv={__proto__:null,on:Q,off:de,stopPropagation:Kn,disableScrollPropagation:Ya,disableClickPropagation:ki,preventDefault:$e,stop:Gn,getPropagationPath:Dd,getMousePosition:zd,getWheelDelta:Bd,isExternalTarget:Xa,addListener:Q,removeListener:de},Ud=en.extend({run:function(r,o,u,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Vn(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ce(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var u=this._startPos.add(this._offset.multiplyBy(r));o&&u._round(),je(this._el,u),this.fire("step")},_complete:function(){Me(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),re=en.extend({options:{crs:Ra,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=E(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(J(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_i&&q.any3d&&!q.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Q(this._proxy,Rd,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(J(r),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var f=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,u.zoom):this._tryAnimatedPan(r,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(q.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(q.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,u){var f=this.getZoomScale(o),p=this.getSize().divideBy(2),v=r instanceof R?r:this.latLngToContainerPoint(r),j=v.subtract(p).multiplyBy(1-1/f),T=this.containerPointToLatLng(p.add(j));return this.setView(T,o,{zoom:u})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():ue(r);var u=B(o.paddingTopLeft||o.padding||[0,0]),f=B(o.paddingBottomRight||o.padding||[0,0]),p=this.getBoundsZoom(r,!1,u.add(f));if(p=typeof o.maxZoom=="number"?Math.min(o.maxZoom,p):p,p===1/0)return{center:r.getCenter(),zoom:p};var v=f.subtract(u).divideBy(2),j=this.project(r.getSouthWest(),p),T=this.project(r.getNorthEast(),p),O=this.unproject(j.add(T).divideBy(2).add(v),p);return{center:O,zoom:p}},fitBounds:function(r,o){if(r=ue(r),!r.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(r,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=B(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ud,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Y(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,u){if(u=u||{},u.animate===!1||!q.any3d)return this.setView(r,o,u);this._stop();var f=this.project(this.getCenter()),p=this.project(r),v=this.getSize(),j=this._zoom;r=J(r),o=o===void 0?j:o;var T=Math.max(v.x,v.y),O=T*this.getZoomScale(j,o),A=p.distanceTo(f)||1,U=1.42,V=U*U;function ee(Te){var Qs=Te?-1:1,Ay=Te?O:T,Iy=O*O-T*T+Qs*V*V*A*A,My=2*Ay*V*A,cl=Iy/My,xh=Math.sqrt(cl*cl+1)-cl,Dy=xh<1e-9?-18:Math.log(xh);return Dy}function Ye(Te){return(Math.exp(Te)-Math.exp(-Te))/2}function De(Te){return(Math.exp(Te)+Math.exp(-Te))/2}function kt(Te){return Ye(Te)/De(Te)}var it=ee(0);function Tr(Te){return T*(De(it)/De(it+U*Te))}function Cy(Te){return T*(De(it)*kt(it+U*Te)-Ye(it))/V}function Ly(Te){return 1-Math.pow(1-Te,1.5)}var Oy=Date.now(),yh=(ee(1)-it)/U,Ry=u.duration?1e3*u.duration:1e3*yh*.8;function _h(){var Te=(Date.now()-Oy)/Ry,Qs=Ly(Te)*yh;Te<=1?(this._flyToFrame=ce(_h,this),this._move(this.unproject(f.add(p.subtract(f).multiplyBy(Cy(Qs)/A)),j),this.getScaleZoom(T/Tr(Qs),j),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),_h.call(this),this},flyToBounds:function(r,o){var u=this._getBoundsCenterZoom(r,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(r){return r=ue(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var u=this.getCenter(),f=this._limitCenter(u,this._zoom,ue(r));return u.equals(f)||this.panTo(f,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var u=B(o.paddingTopLeft||o.padding||[0,0]),f=B(o.paddingBottomRight||o.padding||[0,0]),p=this.project(this.getCenter()),v=this.project(r),j=this.getPixelBounds(),T=ie([j.min.add(u),j.max.subtract(f)]),O=T.getSize();if(!T.contains(v)){this._enforcingBounds=!0;var A=v.subtract(T.getCenter()),U=T.extend(v).getSize().subtract(O);p.x+=A.x<0?-U.x:U.x,p.y+=A.y<0?-U.y:U.y,this.panTo(this.unproject(p),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),f=o.divideBy(2).round(),p=u.divideBy(2).round(),v=f.subtract(p);return!v.x&&!v.y?this:(r.animate&&r.pan?this.panBy(v):(r.pan&&this._rawPanBy(v),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,r):navigator.geolocation.getCurrentPosition(o,u,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,u=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,u=r.coords.longitude,f=new oe(o,u),p=f.toBounds(r.coords.accuracy*2),v=this._locateOptions;if(v.setView){var j=this.getBoundsZoom(p);this.setView(f,v.maxZoom?Math.min(j,v.maxZoom):j)}var T={latlng:f,bounds:p,timestamp:r.timestamp};for(var O in r.coords)typeof r.coords[O]=="number"&&(T[O]=r.coords[O]);this.fire("locationfound",T)}},addHandler:function(r,o){if(!o)return this;var u=this[r]=new o(this);return this._handlers.push(u),this.options[r]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Me(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)ve(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var u="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=ae("div",u,o||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),u=this.unproject(r.getTopRight());return new Oe(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,u){r=ue(r),u=B(u||[0,0]);var f=this.getZoom()||0,p=this.getMinZoom(),v=this.getMaxZoom(),j=r.getNorthWest(),T=r.getSouthEast(),O=this.getSize().subtract(u),A=ie(this.project(T,f),this.project(j,f)).getSize(),U=q.any3d?this.options.zoomSnap:1,V=O.x/A.x,ee=O.y/A.y,Ye=o?Math.max(V,ee):Math.min(V,ee);return f=this.getScaleZoom(Ye,f),U&&(f=Math.round(f/(U/100))*(U/100),f=o?Math.ceil(f/U)*U:Math.floor(f/U)*U),Math.max(p,Math.min(v,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var u=this._getTopLeftPoint(r,o);return new K(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(r)/u.scale(o)},getScaleZoom:function(r,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var f=u.zoom(r*u.scale(o));return isNaN(f)?1/0:f},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(J(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(B(r),o)},layerPointToLatLng:function(r){var o=B(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(J(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(J(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ue(r))},distance:function(r,o){return this.options.crs.distance(J(r),J(o))},containerPointToLayerPoint:function(r){return B(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return B(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(B(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(r)))},mouseEventToContainerPoint:function(r){return zd(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=Ad(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Q(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&q.any3d,Y(r,"leaflet-container"+(q.touch?" leaflet-touch":"")+(q.retina?" leaflet-retina":"")+(q.ielt9?" leaflet-oldie":"")+(q.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=xi(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),je(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Y(r.markerPane,"leaflet-zoom-hide"),Y(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,u){je(this._mapPane,new R(0,0));var f=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var p=this._zoom!==o;this._moveStart(p,u)._move(r,o)._moveEnd(p),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,u,f){o===void 0&&(o=this._zoom);var p=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Me(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){je(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[h(this._container)]=this;var o=r?de:Q;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),q.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Me(this._resizeRequest),this._resizeRequest=ce(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var u=[],f,p=o==="mouseout"||o==="mouseover",v=r.target||r.srcElement,j=!1;v;){if(f=this._targets[h(v)],f&&(o==="click"||o==="preclick")&&this._draggableMoved(f)){j=!0;break}if(f&&f.listens(o,!0)&&(p&&!Xa(v,r)||(u.push(f),p))||v===this._container)break;v=v.parentNode}return!u.length&&!j&&!p&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var u=r.type;u==="mousedown"&&Va(o),this._fireDOMEvent(r,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,u){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,u)}var p=this._findEventTargets(r,o);if(u){for(var v=[],j=0;j<u.length;j++)u[j].listens(o,!0)&&v.push(u[j]);p=v.concat(p)}if(p.length){o==="contextmenu"&&$e(r);var T=p[0],O={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var A=T.getLatLng&&(!T._radius||T._radius<=10);O.containerPoint=A?this.latLngToContainerPoint(T.getLatLng()):this.mouseEventToContainerPoint(r),O.layerPoint=this.containerPointToLayerPoint(O.containerPoint),O.latlng=A?T.getLatLng():this.layerPointToLatLng(O.layerPoint)}for(j=0;j<p.length;j++)if(p[j].fire(o,O,!0),O.originalEvent._stopped||p[j].options.bubblingMouseEvents===!1&&N(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return Vn(this._mapPane)||new R(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var u=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var u=this.getSize()._divideBy(2);return this.project(r,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,u){var f=this._getNewPixelOrigin(u,o);return this.project(r,o)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,o,u){var f=this._getNewPixelOrigin(u,o);return ie([this.project(r.getSouthWest(),o)._subtract(f),this.project(r.getNorthWest(),o)._subtract(f),this.project(r.getSouthEast(),o)._subtract(f),this.project(r.getNorthEast(),o)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,u){if(!u)return r;var f=this.project(r,o),p=this.getSize().divideBy(2),v=new K(f.subtract(p),f.add(p)),j=this._getBoundsOffset(v,u,o);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?r:this.unproject(f.add(j),o)},_limitOffset:function(r,o){if(!o)return r;var u=this.getPixelBounds(),f=new K(u.min.add(r),u.max.add(r));return r.add(this._getBoundsOffset(f,o))},_getBoundsOffset:function(r,o,u){var f=ie(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),p=f.min.subtract(r.min),v=f.max.subtract(r.max),j=this._rebound(p.x,-v.x),T=this._rebound(p.y,-v.y);return new R(j,T)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),u=this.getMaxZoom(),f=q.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(o,Math.min(u,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var u=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var r=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var u=Ua,f=this._proxy.style[u];Zn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),f===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();Zn(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(o),p=this._getCenterOffset(r)._divideBy(1-1/f);return u.animate!==!0&&!this.getSize().contains(p)?!1:(ce(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,u,f){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,Y(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vv(r,o){return new re(r,o)}var Lt=wt.extend({options:{position:"topright"},initialize:function(r){E(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),u=this.getPosition(),f=r._controlCorners[u];return Y(o,"leaflet-control"),u.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Ei=function(r){return new Lt(r)};re.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",u=this._controlContainer=ae("div",o+"control-container",this._container);function f(p,v){var j=o+p+" "+o+v;r[p+v]=ae("div",j,u)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)ve(this._controlCorners[r]);ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $d=Lt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,u,f){return u<f?-1:f<u?1:0}},initialize:function(r,o,u){E(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in o)this._addLayer(o[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Lt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Y(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(Y(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=ae("div",r),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),ki(o),Ya(o);var f=this._section=ae("section",r+"-list");u&&(this._map.on("click",this.collapse,this),Q(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=ae("a",r+"-toggle",o);p.href="#",p.title="Layers",p.setAttribute("role","button"),Q(p,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){$e(v),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=ae("div",r+"-base",f),this._separator=ae("div",r+"-separator",f),this._overlaysList=ae("div",r+"-overlays",f),o.appendChild(f)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,u){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(f,p){return this.options.sortFunction(f.layer,p.layer,f.name,p.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Is(this._baseLayersList),Is(this._overlaysList),this._layerControlInputs=[];var r,o,u,f,p=0;for(u=0;u<this._layers.length;u++)f=this._layers[u],this._addItem(f),o=o||f.overlay,r=r||!f.overlay,p+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&p>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(h(r.target)),u=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(r,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=u,f.firstChild},_addItem:function(r){var o=document.createElement("label"),u=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=u):f=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(f),f.layerId=h(r.layer),Q(f,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+r.name;var v=document.createElement("span");o.appendChild(v),v.appendChild(f),v.appendChild(p);var j=r.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,u,f=[],p=[];this._handlingClick=!0;for(var v=r.length-1;v>=0;v--)o=r[v],u=this._getLayer(o.layerId).layer,o.checked?f.push(u):o.checked||p.push(u);for(v=0;v<p.length;v++)this._map.hasLayer(p[v])&&this._map.removeLayer(p[v]);for(v=0;v<f.length;v++)this._map.hasLayer(f[v])||this._map.addLayer(f[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,u,f=this._map.getZoom(),p=r.length-1;p>=0;p--)o=r[p],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&f<u.options.minZoom||u.options.maxZoom!==void 0&&f>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Q(r,"click",$e),this.expand();var o=this;setTimeout(function(){de(r,"click",$e),o._preventClick=!1})}}),Kv=function(r,o,u){return new $d(r,o,u)},el=Lt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",u=ae("div",o+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,u,f,p){var v=ae("a",u,f);return v.innerHTML=r,v.href="#",v.title=o,v.setAttribute("role","button"),v.setAttribute("aria-label",o),ki(v),Q(v,"click",Gn),Q(v,"click",p,this),Q(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";ke(this._zoomInButton,o),ke(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(Y(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(Y(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});re.mergeOptions({zoomControl:!0}),re.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new el,this.addControl(this.zoomControl))});var Gv=function(r){return new el(r)},Fd=Lt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",u=ae("div",o),f=this.options;return this._addScales(f,o+"-line",u),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),u},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,u){r.metric&&(this._mScale=ae("div",o,u)),r.imperial&&(this._iScale=ae("div",o,u))},_update:function(){var r=this._map,o=r.getSize().y/2,u=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/r)},_updateImperial:function(r){var o=r*3.2808399,u,f,p;o>5280?(u=o/5280,f=this._getRoundNum(u),this._updateScale(this._iScale,f+" mi",f/u)):(p=this._getRoundNum(o),this._updateScale(this._iScale,p+" ft",p/o))},_updateScale:function(r,o,u){r.style.width=Math.round(this.options.maxWidth*u)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),u=r/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),Jv=function(r){return new Fd(r)},Qv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tl=Lt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(q.inlineSvg?Qv+" ":"")+"Leaflet</a>"},initialize:function(r){E(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),ki(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),r.length&&u.push(r.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});re.mergeOptions({attributionControl:!0}),re.addInitHook(function(){this.options.attributionControl&&new tl().addTo(this)});var Yv=function(r){return new tl(r)};Lt.Layers=$d,Lt.Zoom=el,Lt.Scale=Fd,Lt.Attribution=tl,Ei.layers=Kv,Ei.zoom=Gv,Ei.scale=Jv,Ei.attribution=Yv;var Ht=wt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ht.addTo=function(r,o){return r.addHandler(o,this),this};var Xv={Events:Ue},Wd=q.touch?"touchstart mousedown":"mousedown",_n=en.extend({options:{clickTolerance:3},initialize:function(r,o,u,f){E(this,f),this._element=r,this._dragStartTarget=o||r,this._preventOutline=u},enable:function(){this._enabled||(Q(this._dragStartTarget,Wd,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),de(this._dragStartTarget,Wd,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!$a(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){_n._dragging===this&&this.finishDrag();return}if(!(_n._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(_n._dragging=this,this._preventOutline&&Va(this._element),qa(),wi(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,u=Id(this._element);this._startPoint=new R(o.clientX,o.clientY),this._startPos=Vn(this._element),this._parentScale=Ka(u);var f=r.type==="mousedown";Q(document,f?"mousemove":"touchmove",this._onMove,this),Q(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,u=new R(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,$e(r),this._moved||(this.fire("dragstart"),this._moved=!0,Y(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Y(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),je(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){ke(document.body,"leaflet-dragging"),this._lastTarget&&(ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),de(document,"mousemove touchmove",this._onMove,this),de(document,"mouseup touchend touchcancel",this._onUp,this),Ha(),bi();var o=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function qd(r,o,u){var f,p=[1,4,2,8],v,j,T,O,A,U,V,ee;for(v=0,U=r.length;v<U;v++)r[v]._code=Jn(r[v],o);for(T=0;T<4;T++){for(V=p[T],f=[],v=0,U=r.length,j=U-1;v<U;j=v++)O=r[v],A=r[j],O._code&V?A._code&V||(ee=Us(A,O,V,o,u),ee._code=Jn(ee,o),f.push(ee)):(A._code&V&&(ee=Us(A,O,V,o,u),ee._code=Jn(ee,o),f.push(ee)),f.push(O));r=f}return r}function Hd(r,o){var u,f,p,v,j,T,O,A,U;if(!r||r.length===0)throw new Error("latlngs not passed");St(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var V=J([0,0]),ee=ue(r),Ye=ee.getNorthWest().distanceTo(ee.getSouthWest())*ee.getNorthEast().distanceTo(ee.getNorthWest());Ye<1700&&(V=nl(r));var De=r.length,kt=[];for(u=0;u<De;u++){var it=J(r[u]);kt.push(o.project(J([it.lat-V.lat,it.lng-V.lng])))}for(T=O=A=0,u=0,f=De-1;u<De;f=u++)p=kt[u],v=kt[f],j=p.y*v.x-v.y*p.x,O+=(p.x+v.x)*j,A+=(p.y+v.y)*j,T+=j*3;T===0?U=kt[0]:U=[O/T,A/T];var Tr=o.unproject(B(U));return J([Tr.lat+V.lat,Tr.lng+V.lng])}function nl(r){for(var o=0,u=0,f=0,p=0;p<r.length;p++){var v=J(r[p]);o+=v.lat,u+=v.lng,f++}return J([o/f,u/f])}var ey={__proto__:null,clipPolygon:qd,polygonCenter:Hd,centroid:nl};function Zd(r,o){if(!o||!r.length)return r.slice();var u=o*o;return r=ry(r,u),r=ny(r,u),r}function Vd(r,o,u){return Math.sqrt(ji(r,o,u,!0))}function ty(r,o,u){return ji(r,o,u)}function ny(r,o){var u=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,p=new f(u);p[0]=p[u-1]=1,rl(r,p,o,0,u-1);var v,j=[];for(v=0;v<u;v++)p[v]&&j.push(r[v]);return j}function rl(r,o,u,f,p){var v=0,j,T,O;for(T=f+1;T<=p-1;T++)O=ji(r[T],r[f],r[p],!0),O>v&&(j=T,v=O);v>u&&(o[j]=1,rl(r,o,u,f,j),rl(r,o,u,j,p))}function ry(r,o){for(var u=[r[0]],f=1,p=0,v=r.length;f<v;f++)iy(r[f],r[p])>o&&(u.push(r[f]),p=f);return p<v-1&&u.push(r[v-1]),u}var Kd;function Gd(r,o,u,f,p){var v=f?Kd:Jn(r,u),j=Jn(o,u),T,O,A;for(Kd=j;;){if(!(v|j))return[r,o];if(v&j)return!1;T=v||j,O=Us(r,o,T,u,p),A=Jn(O,u),T===v?(r=O,v=A):(o=O,j=A)}}function Us(r,o,u,f,p){var v=o.x-r.x,j=o.y-r.y,T=f.min,O=f.max,A,U;return u&8?(A=r.x+v*(O.y-r.y)/j,U=O.y):u&4?(A=r.x+v*(T.y-r.y)/j,U=T.y):u&2?(A=O.x,U=r.y+j*(O.x-r.x)/v):u&1&&(A=T.x,U=r.y+j*(T.x-r.x)/v),new R(A,U,p)}function Jn(r,o){var u=0;return r.x<o.min.x?u|=1:r.x>o.max.x&&(u|=2),r.y<o.min.y?u|=4:r.y>o.max.y&&(u|=8),u}function iy(r,o){var u=o.x-r.x,f=o.y-r.y;return u*u+f*f}function ji(r,o,u,f){var p=o.x,v=o.y,j=u.x-p,T=u.y-v,O=j*j+T*T,A;return O>0&&(A=((r.x-p)*j+(r.y-v)*T)/O,A>1?(p=u.x,v=u.y):A>0&&(p+=j*A,v+=T*A)),j=r.x-p,T=r.y-v,f?j*j+T*T:new R(p,v)}function St(r){return!w(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Jd(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(r)}function Qd(r,o){var u,f,p,v,j,T,O,A;if(!r||r.length===0)throw new Error("latlngs not passed");St(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var U=J([0,0]),V=ue(r),ee=V.getNorthWest().distanceTo(V.getSouthWest())*V.getNorthEast().distanceTo(V.getNorthWest());ee<1700&&(U=nl(r));var Ye=r.length,De=[];for(u=0;u<Ye;u++){var kt=J(r[u]);De.push(o.project(J([kt.lat-U.lat,kt.lng-U.lng])))}for(u=0,f=0;u<Ye-1;u++)f+=De[u].distanceTo(De[u+1])/2;if(f===0)A=De[0];else for(u=0,v=0;u<Ye-1;u++)if(j=De[u],T=De[u+1],p=j.distanceTo(T),v+=p,v>f){O=(v-f)/p,A=[T.x-O*(T.x-j.x),T.y-O*(T.y-j.y)];break}var it=o.unproject(B(A));return J([it.lat+U.lat,it.lng+U.lng])}var sy={__proto__:null,simplify:Zd,pointToSegmentDistance:Vd,closestPointOnSegment:ty,clipSegment:Gd,_getEdgeIntersection:Us,_getBitCode:Jn,_sqClosestPointOnSegment:ji,isFlat:St,_flat:Jd,polylineCenter:Qd},il={project:function(r){return new R(r.lng,r.lat)},unproject:function(r){return new oe(r.y,r.x)},bounds:new K([-180,-90],[180,90])},sl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,u=this.R,f=r.lat*o,p=this.R_MINOR/u,v=Math.sqrt(1-p*p),j=v*Math.sin(f),T=Math.tan(Math.PI/4-f/2)/Math.pow((1-j)/(1+j),v/2);return f=-u*Math.log(Math.max(T,1e-10)),new R(r.lng*o*u,f)},unproject:function(r){for(var o=180/Math.PI,u=this.R,f=this.R_MINOR/u,p=Math.sqrt(1-f*f),v=Math.exp(-r.y/u),j=Math.PI/2-2*Math.atan(v),T=0,O=.1,A;T<15&&Math.abs(O)>1e-7;T++)A=p*Math.sin(j),A=Math.pow((1-A)/(1+A),p/2),O=Math.PI/2-2*Math.atan(v*A)-j,j+=O;return new oe(j*o,r.x*o/u)}},oy={__proto__:null,LonLat:il,Mercator:sl,SphericalMercator:La},ay=s({},yn,{code:"EPSG:3395",projection:sl,transformation:function(){var r=.5/(Math.PI*sl.R);return vi(r,.5,-r,.5)}()}),Yd=s({},yn,{code:"EPSG:4326",projection:il,transformation:vi(1/180,1,-1/180,.5)}),ly=s({},rt,{projection:il,transformation:vi(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var u=o.lng-r.lng,f=o.lat-r.lat;return Math.sqrt(u*u+f*f)},infinite:!0});rt.Earth=yn,rt.EPSG3395=ay,rt.EPSG3857=Ra,rt.EPSG900913=pv,rt.EPSG4326=Yd,rt.Simple=ly;var Ot=en.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[h(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[h(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});re.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=h(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return h(r)in this._layers},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},_addLayers:function(r){r=r?w(r)?r:[r]:[];for(var o=0,u=r.length;o<u;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[h(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=h(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,u=this._getZoomSpan();for(var f in this._zoomBoundLayers){var p=this._zoomBoundLayers[f].options;r=p.minZoom===void 0?r:Math.min(r,p.minZoom),o=p.maxZoom===void 0?o:Math.max(o,p.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var br=Ot.extend({initialize:function(r,o){E(this,o),this._layers={};var u,f;if(r)for(u=0,f=r.length;u<f;u++)this.addLayer(r[u])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),u,f;for(u in this._layers)f=this._layers[u],f[r]&&f[r].apply(f,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return h(r)}}),uy=function(r,o){return new br(r,o)},tn=br.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),br.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),br.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Oe;for(var o in this._layers){var u=this._layers[o];r.extend(u.getBounds?u.getBounds():u.getLatLng())}return r}}),cy=function(r,o){return new tn(r,o)},Sr=wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){E(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var u=this._getIconUrl(r);if(!u){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,o){var u=this.options,f=u[o+"Size"];typeof f=="number"&&(f=[f,f]);var p=B(f),v=B(o==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(u.className||""),v&&(r.style.marginLeft=-v.x+"px",r.style.marginTop=-v.y+"px"),p&&(r.style.width=p.x+"px",r.style.height=p.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return q.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function dy(r){return new Sr(r)}var Ti=Sr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ti.imagePath!="string"&&(Ti.imagePath=this._detectIconPath()),(this.options.imagePath||Ti.imagePath)+Sr.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(u,f,p){var v=f.exec(u);return v&&v[p]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=ae("div","leaflet-default-icon-path",document.body),o=xi(r,"background-image")||xi(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Xd=Ht.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new _n(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Y(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,u=o._map,f=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,v=Vn(o._icon),j=u.getPixelBounds(),T=u.getPixelOrigin(),O=ie(j.min._subtract(T).add(p),j.max._subtract(T).subtract(p));if(!O.contains(v)){var A=B((Math.max(O.max.x,v.x)-O.max.x)/(j.max.x-O.max.x)-(Math.min(O.min.x,v.x)-O.min.x)/(j.min.x-O.min.x),(Math.max(O.max.y,v.y)-O.max.y)/(j.max.y-O.max.y)-(Math.min(O.min.y,v.y)-O.min.y)/(j.min.y-O.min.y)).multiplyBy(f);u.panBy(A,{animate:!1}),this._draggable._newPos._add(A),this._draggable._startPos._add(A),je(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=ce(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(Me(this._panRequest),this._panRequest=ce(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,u=o._shadow,f=Vn(o._icon),p=o._map.layerPointToLatLng(f);u&&je(u,f),o._latlng=p,r.latlng=p,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){Me(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),$s=Ot.extend({options:{icon:new Ti,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){E(this,o),this._latlng=J(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=J(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=r.icon.createIcon(this._icon),f=!1;u!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(u.title=r.title),u.tagName==="IMG"&&(u.alt=r.alt||"")),Y(u,o),r.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Q(u,"focus",this._panOnFocus,this);var p=r.icon.createShadow(this._shadow),v=!1;p!==this._shadow&&(this._removeShadow(),v=!0),p&&(Y(p,o),p.alt=""),this._shadow=p,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&v&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&de(this._icon,"focus",this._panOnFocus,this),ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ve(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&je(this._icon,r),this._shadow&&je(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Y(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xd)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xd(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&bt(this._icon,r),this._shadow&&bt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,u=o.iconSize?B(o.iconSize):B(0,0),f=o.iconAnchor?B(o.iconAnchor):B(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:u.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function hy(r,o){return new $s(r,o)}var xn=Ot.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return E(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Fs=xn.extend({options:{fill:!0,radius:10},initialize:function(r,o){E(this,o),this._latlng=J(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=J(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return xn.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,u=this._clickTolerance(),f=[r+u,o+u];this._pxBounds=new K(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fy(r,o){return new Fs(r,o)}var ol=Fs.extend({initialize:function(r,o,u){if(typeof o=="number"&&(o=s({},u,{radius:o})),E(this,o),this._latlng=J(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Oe(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:xn.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,u=this._map,f=u.options.crs;if(f.distance===yn.distance){var p=Math.PI/180,v=this._mRadius/yn.R/p,j=u.project([o+v,r]),T=u.project([o-v,r]),O=j.add(T).divideBy(2),A=u.unproject(O).lat,U=Math.acos((Math.cos(v*p)-Math.sin(o*p)*Math.sin(A*p))/(Math.cos(o*p)*Math.cos(A*p)))/p;(isNaN(U)||U===0)&&(U=v/Math.cos(Math.PI/180*o)),this._point=O.subtract(u.getPixelOrigin()),this._radius=isNaN(U)?0:O.x-u.project([A,r-U]).x,this._radiusY=O.y-j.y}else{var V=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(V).x}this._updateBounds()}});function py(r,o,u){return new ol(r,o,u)}var nn=xn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){E(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,u=null,f=ji,p,v,j=0,T=this._parts.length;j<T;j++)for(var O=this._parts[j],A=1,U=O.length;A<U;A++){p=O[A-1],v=O[A];var V=f(r,p,v,!0);V<o&&(o=V,u=f(r,p,v))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qd(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=J(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Oe,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],u=St(r),f=0,p=r.length;f<p;f++)u?(o[f]=J(r[f]),this._bounds.extend(o[f])):o[f]=this._convertLatLngs(r[f]);return o},_project:function(){var r=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new R(r,r);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,u){var f=r[0]instanceof oe,p=r.length,v,j;if(f){for(j=[],v=0;v<p;v++)j[v]=this._map.latLngToLayerPoint(r[v]),u.extend(j[v]);o.push(j)}else for(v=0;v<p;v++)this._projectLatlngs(r[v],o,u)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,f,p,v,j,T,O;for(u=0,p=0,v=this._rings.length;u<v;u++)for(O=this._rings[u],f=0,j=O.length;f<j-1;f++)T=Gd(O[f],O[f+1],r,f,!0),T&&(o[p]=o[p]||[],o[p].push(T[0]),(T[1]!==O[f+1]||f===j-2)&&(o[p].push(T[1]),p++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,u=0,f=r.length;u<f;u++)r[u]=Zd(r[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var u,f,p,v,j,T,O=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(u=0,v=this._parts.length;u<v;u++)for(T=this._parts[u],f=0,j=T.length,p=j-1;f<j;p=f++)if(!(!o&&f===0)&&Vd(r,T[p],T[f])<=O)return!0;return!1}});function my(r,o){return new nn(r,o)}nn._flat=Jd;var kr=nn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=nn.prototype._convertLatLngs.call(this,r),u=o.length;return u>=2&&o[0]instanceof oe&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(r){nn.prototype._setLatLngs.call(this,r),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,u=new R(o,o);if(r=new K(r.min.subtract(u),r.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,p=this._rings.length,v;f<p;f++)v=qd(this._rings[f],r,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,u,f,p,v,j,T,O,A;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(v=0,O=this._parts.length;v<O;v++)for(u=this._parts[v],j=0,A=u.length,T=A-1;j<A;T=j++)f=u[j],p=u[T],f.y>r.y!=p.y>r.y&&r.x<(p.x-f.x)*(r.y-f.y)/(p.y-f.y)+f.x&&(o=!o);return o||nn.prototype._containsPoint.call(this,r,!0)}});function gy(r,o){return new kr(r,o)}var rn=tn.extend({initialize:function(r,o){E(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=w(r)?r:r.features,u,f,p;if(o){for(u=0,f=o.length;u<f;u++)p=o[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var v=this.options;if(v.filter&&!v.filter(r))return this;var j=Ws(r,v);return j?(j.feature=Zs(r),j.defaultOptions=j.options,this.resetStyle(j),v.onEachFeature&&v.onEachFeature(r,j),this.addLayer(j)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function Ws(r,o){var u=r.type==="Feature"?r.geometry:r,f=u?u.coordinates:null,p=[],v=o&&o.pointToLayer,j=o&&o.coordsToLatLng||al,T,O,A,U;if(!f&&!u)return null;switch(u.type){case"Point":return T=j(f),eh(v,r,T,o);case"MultiPoint":for(A=0,U=f.length;A<U;A++)T=j(f[A]),p.push(eh(v,r,T,o));return new tn(p);case"LineString":case"MultiLineString":return O=qs(f,u.type==="LineString"?0:1,j),new nn(O,o);case"Polygon":case"MultiPolygon":return O=qs(f,u.type==="Polygon"?1:2,j),new kr(O,o);case"GeometryCollection":for(A=0,U=u.geometries.length;A<U;A++){var V=Ws({geometry:u.geometries[A],type:"Feature",properties:r.properties},o);V&&p.push(V)}return new tn(p);case"FeatureCollection":for(A=0,U=u.features.length;A<U;A++){var ee=Ws(u.features[A],o);ee&&p.push(ee)}return new tn(p);default:throw new Error("Invalid GeoJSON object.")}}function eh(r,o,u,f){return r?r(o,u):new $s(u,f&&f.markersInheritOptions&&f)}function al(r){return new oe(r[1],r[0],r[2])}function qs(r,o,u){for(var f=[],p=0,v=r.length,j;p<v;p++)j=o?qs(r[p],o-1,u):(u||al)(r[p]),f.push(j);return f}function ll(r,o){return r=J(r),r.alt!==void 0?[x(r.lng,o),x(r.lat,o),x(r.alt,o)]:[x(r.lng,o),x(r.lat,o)]}function Hs(r,o,u,f){for(var p=[],v=0,j=r.length;v<j;v++)p.push(o?Hs(r[v],St(r[v])?0:o-1,u,f):ll(r[v],f));return!o&&u&&p.length>0&&p.push(p[0].slice()),p}function Er(r,o){return r.feature?s({},r.feature,{geometry:o}):Zs(o)}function Zs(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var ul={toGeoJSON:function(r){return Er(this,{type:"Point",coordinates:ll(this.getLatLng(),r)})}};$s.include(ul),ol.include(ul),Fs.include(ul),nn.include({toGeoJSON:function(r){var o=!St(this._latlngs),u=Hs(this._latlngs,o?1:0,!1,r);return Er(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),kr.include({toGeoJSON:function(r){var o=!St(this._latlngs),u=o&&!St(this._latlngs[0]),f=Hs(this._latlngs,u?2:o?1:0,!0,r);return o||(f=[f]),Er(this,{type:(u?"Multi":"")+"Polygon",coordinates:f})}}),br.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(r).geometry.coordinates)}),Er(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var u=o==="GeometryCollection",f=[];return this.eachLayer(function(p){if(p.toGeoJSON){var v=p.toGeoJSON(r);if(u)f.push(v.geometry);else{var j=Zs(v);j.type==="FeatureCollection"?f.push.apply(f,j.features):f.push(j)}}}),u?Er(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function th(r,o){return new rn(r,o)}var vy=th,Vs=Ot.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,u){this._url=r,this._bounds=ue(o),E(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Y(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&xr(this._image),this},bringToBack:function(){return this._map&&wr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ue(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:ae("img");if(Y(o,"leaflet-image-layer"),this._zoomAnimated&&Y(o,"leaflet-zoom-animated"),this.options.className&&Y(o,this.options.className),o.onselectstart=y,o.onmousemove=y,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Zn(this._image,u,o)},_reset:function(){var r=this._image,o=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();je(r,o.min),r.style.width=u.x+"px",r.style.height=u.y+"px"},_updateOpacity:function(){bt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),yy=function(r,o,u){return new Vs(r,o,u)},nh=Vs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:ae("video");if(Y(o,"leaflet-image-layer"),this._zoomAnimated&&Y(o,"leaflet-zoom-animated"),this.options.className&&Y(o,this.options.className),o.onselectstart=y,o.onmousemove=y,o.onloadeddata=l(this.fire,this,"load"),r){for(var u=o.getElementsByTagName("source"),f=[],p=0;p<u.length;p++)f.push(u[p].src);this._url=u.length>0?f:[o.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var j=ae("source");j.src=this._url[v],o.appendChild(j)}}});function _y(r,o,u){return new nh(r,o,u)}var rh=Vs.extend({_initImage:function(){var r=this._image=this._url;Y(r,"leaflet-image-layer"),this._zoomAnimated&&Y(r,"leaflet-zoom-animated"),this.options.className&&Y(r,this.options.className),r.onselectstart=y,r.onmousemove=y}});function xy(r,o,u){return new rh(r,o,u)}var Zt=Ot.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof oe||w(r))?(this._latlng=J(r),E(this,o)):(E(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&bt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&bt(this._container,1),this.bringToFront(),this.options.interactive&&(Y(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(bt(this._container,0),this._removeTimeout=setTimeout(l(ve,void 0,this._container),200)):ve(this._container),this.options.interactive&&(ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=J(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&xr(this._container),this},bringToBack:function(){return this._map&&wr(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof tn){o=null;var u=this._source._layers;for(var f in u)if(u[f]._map){o=u[f];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=B(this.options.offset),u=this._getAnchor();this._zoomAnimated?je(this._container,r.add(u)):o=o.add(r).add(u);var f=this._containerBottom=-o.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=f+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});re.include({_initOverlay:function(r,o,u,f){var p=o;return p instanceof r||(p=new r(f).setContent(o)),u&&p.setLatLng(u),p}}),Ot.include({_initOverlay:function(r,o,u,f){var p=u;return p instanceof r?(E(p,f),p._source=this):(p=o&&!f?o:new r(f,this),p.setContent(u)),p}});var Ks=Zt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Zt.prototype.openOn.call(this,r)},onAdd:function(r){Zt.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xn||this._source.on("preclick",Kn))},onRemove:function(r){Zt.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xn||this._source.off("preclick",Kn))},getEvents:function(){var r=Zt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=ae("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=ae("div",r+"-content-wrapper",o);if(this._contentNode=ae("div",r+"-content",u),ki(o),Ya(this._contentNode),Q(o,"contextmenu",Kn),this._tipContainer=ae("div",r+"-tip-container",o),this._tip=ae("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=ae("a",r+"-close-button",o);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',Q(f,"click",function(p){$e(p),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var u=r.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var f=r.offsetHeight,p=this.options.maxHeight,v="leaflet-popup-scrolled";p&&f>p?(o.height=p+"px",Y(r,v)):ke(r,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),u=this._getAnchor();je(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(xi(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,f=this._containerWidth,p=new R(this._containerLeft,-u-this._containerBottom);p._add(Vn(this._container));var v=r.layerPointToContainerPoint(p),j=B(this.options.autoPanPadding),T=B(this.options.autoPanPaddingTopLeft||j),O=B(this.options.autoPanPaddingBottomRight||j),A=r.getSize(),U=0,V=0;v.x+f+O.x>A.x&&(U=v.x+f-A.x+O.x),v.x-U-T.x<0&&(U=v.x-T.x),v.y+u+O.y>A.y&&(V=v.y+u-A.y+O.y),v.y-V-T.y<0&&(V=v.y-T.y),(U||V)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([U,V]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),wy=function(r,o){return new Ks(r,o)};re.mergeOptions({closePopupOnClick:!0}),re.include({openPopup:function(r,o,u){return this._initOverlay(Ks,r,o,u).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Ot.include({bindPopup:function(r,o){return this._popup=this._initOverlay(Ks,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof tn||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Gn(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof xn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Gs=Zt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Zt.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Zt.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Zt.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,u,f=this._map,p=this._container,v=f.latLngToContainerPoint(f.getCenter()),j=f.layerPointToContainerPoint(r),T=this.options.direction,O=p.offsetWidth,A=p.offsetHeight,U=B(this.options.offset),V=this._getAnchor();T==="top"?(o=O/2,u=A):T==="bottom"?(o=O/2,u=0):T==="center"?(o=O/2,u=A/2):T==="right"?(o=0,u=A/2):T==="left"?(o=O,u=A/2):j.x<v.x?(T="right",o=0,u=A/2):(T="left",o=O+(U.x+V.x)*2,u=A/2),r=r.subtract(B(o,u,!0)).add(U).add(V),ke(p,"leaflet-tooltip-right"),ke(p,"leaflet-tooltip-left"),ke(p,"leaflet-tooltip-top"),ke(p,"leaflet-tooltip-bottom"),Y(p,"leaflet-tooltip-"+T),je(p,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&bt(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),by=function(r,o){return new Gs(r,o)};re.include({openTooltip:function(r,o,u){return this._initOverlay(Gs,r,o,u).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Ot.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gs,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof tn||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(Q(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Q(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,u,f;this._tooltip.options.sticky&&r.originalEvent&&(u=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(o)}});var ih=Sr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Is(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var f=B(u.bgPos);o.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Sy(r){return new ih(r)}Sr.Default=Ti;var Ni=Ot.extend({options:{tileSize:256,opacity:1,updateWhenIdle:q.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){E(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),ve(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(xr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof R?r:new R(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,u=-r(-1/0,1/0),f=0,p=o.length,v;f<p;f++)v=o[f].style.zIndex,o[f]!==this._container&&v&&(u=r(u,+v));isFinite(u)&&(this.options.zIndex=u+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!q.ielt9){bt(this._container,this.options.opacity);var r=+new Date,o=!1,u=!1;for(var f in this._tiles){var p=this._tiles[f];if(!(!p.current||!p.loaded)){var v=Math.min(1,(r-p.loaded)/200);bt(p.el,v),v<1?o=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(Me(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===r?(this._levels[u].el.style.zIndex=o-Math.abs(r-u),this._onUpdateLevel(u)):(ve(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var f=this._levels[r],p=this._map;return f||(f=this._levels[r]={},f.el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=o,f.origin=p.project(p.unproject(p.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,p.getCenter(),p.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var r,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var f=o.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)ve(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,u,f){var p=Math.floor(r/2),v=Math.floor(o/2),j=u-1,T=new R(+p,+v);T.z=+j;var O=this._tileCoordsToKey(T),A=this._tiles[O];return A&&A.active?(A.retain=!0,!0):(A&&A.loaded&&(A.retain=!0),j>f?this._retainParent(p,v,j,f):!1)},_retainChildren:function(r,o,u,f){for(var p=2*r;p<2*r+2;p++)for(var v=2*o;v<2*o+2;v++){var j=new R(p,v);j.z=u+1;var T=this._tileCoordsToKey(j),O=this._tiles[T];if(O&&O.active){O.retain=!0;continue}else O&&O.loaded&&(O.retain=!0);u+1<f&&this._retainChildren(p,v,u+1,f)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,u,f){var p=Math.round(o);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var v=this.options.updateWhenZooming&&p!==this._tileZoom;(!f||v)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(r),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],r,o)},_setZoomTransform:function(r,o,u){var f=this._map.getZoomScale(u,r.zoom),p=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(o,u)).round();q.any3d?Zn(r.el,p,f):je(r.el,p)},_resetGrid:function(){var r=this._map,o=r.options.crs,u=this._tileSize=this.getTileSize(),f=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],f).x/u.x),Math.ceil(r.project([0,o.wrapLng[1]],f).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],f).y/u.x),Math.ceil(r.project([o.wrapLat[1],0],f).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),f=o.getZoomScale(u,this._tileZoom),p=o.project(r,this._tileZoom).floor(),v=o.getSize().divideBy(f*2);return new K(p.subtract(v),p.add(v))},_update:function(r){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),p=this._pxBoundsToTileRange(f),v=p.getCenter(),j=[],T=this.options.keepBuffer,O=new K(p.getBottomLeft().subtract([T,-T]),p.getTopRight().add([T,-T]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var A in this._tiles){var U=this._tiles[A].coords;(U.z!==this._tileZoom||!O.contains(new R(U.x,U.y)))&&(this._tiles[A].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(r,u);return}for(var V=p.min.y;V<=p.max.y;V++)for(var ee=p.min.x;ee<=p.max.x;ee++){var Ye=new R(ee,V);if(Ye.z=this._tileZoom,!!this._isValidTile(Ye)){var De=this._tiles[this._tileCoordsToKey(Ye)];De?De.current=!0:j.push(Ye)}}if(j.sort(function(it,Tr){return it.distanceTo(v)-Tr.distanceTo(v)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var kt=document.createDocumentFragment();for(ee=0;ee<j.length;ee++)this._addTile(j[ee],kt);this._level.el.appendChild(kt)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(r.x<u.min.x||r.x>u.max.x)||!o.wrapLat&&(r.y<u.min.y||r.y>u.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return ue(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,u=this.getTileSize(),f=r.scaleBy(u),p=f.add(u),v=o.unproject(f,r.z),j=o.unproject(p,r.z);return[v,j]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),u=new Oe(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),u=new R(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(r){var o=this._tiles[r];o&&(ve(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){Y(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=y,r.onmousemove=y,q.ielt9&&this.options.opacity<1&&bt(r,this.options.opacity)},_addTile:function(r,o){var u=this._getTilePos(r),f=this._tileCoordsToKey(r),p=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(p),this.createTile.length<2&&ce(l(this._tileReady,this,r,null,p)),je(p,u),this._tiles[f]={el:p,coords:r,current:!0},o.appendChild(p),this.fire("tileloadstart",{tile:p,coords:r})},_tileReady:function(r,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:r});var f=this._tileCoordsToKey(r);u=this._tiles[f],u&&(u.loaded=+new Date,this._map._fadeAnimated?(bt(u.el,0),Me(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(Y(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),q.ielt9||!this._map._fadeAnimated?ce(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new R(this._wrapX?g(r.x,this._wrapX):r.x,this._wrapY?g(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new K(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function ky(r){return new Ni(r)}var jr=Ni.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=E(this,o),o.detectRetina&&q.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var u=document.createElement("img");return Q(u,"load",l(this._tileOnLoad,this,o,u)),Q(u,"error",l(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(r),u},getTileUrl:function(r){var o={r:q.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=u),o["-y"]=u}return _(this._url,s(o,this.options))},_tileOnLoad:function(r,o){q.ielt9?setTimeout(l(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,u){var f=this.options.errorTileUrl;f&&o.getAttribute("src")!==f&&(o.src=f),r(u,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,f=this.options.zoomOffset;return u&&(r=o-r),r+f},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=y,o.onerror=y,!o.complete)){o.src=I;var u=this._tiles[r].coords;ve(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",I),Ni.prototype._removeTile.call(this,r)},_tileReady:function(r,o,u){if(!(!this._map||u&&u.getAttribute("src")===I))return Ni.prototype._tileReady.call(this,r,o,u)}});function sh(r,o){return new jr(r,o)}var oh=jr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var u=s({},this.defaultWmsParams);for(var f in o)f in this.options||(u[f]=o[f]);o=E(this,o);var p=o.detectRetina&&q.retina?2:1,v=this.getTileSize();u.width=v.x*p,u.height=v.y*p,this.wmsParams=u},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,jr.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),u=this._crs,f=ie(u.project(o[0]),u.project(o[1])),p=f.min,v=f.max,j=(this._wmsVersion>=1.3&&this._crs===Yd?[p.y,p.x,v.y,v.x]:[p.x,p.y,v.x,v.y]).join(","),T=jr.prototype.getTileUrl.call(this,r);return T+C(this.wmsParams,T,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function Ey(r,o){return new oh(r,o)}jr.WMS=oh,sh.wms=Ey;var sn=Ot.extend({options:{padding:.1},initialize:function(r){E(this,r),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Y(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var u=this._map.getZoomScale(o,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,o),v=f.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(r,o));q.any3d?Zn(this._container,v,u):je(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new K(u,u.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ah=sn.extend({options:{tolerance:0},getEvents:function(){var r=sn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){sn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Q(r,"mousemove",this._onMouseMove,this),Q(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Q(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){Me(this._redrawRequest),delete this._ctx,ve(this._container),de(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sn.prototype._update.call(this);var r=this._bounds,o=this._container,u=r.getSize(),f=q.retina?2:1;je(o,r.min),o.width=f*u.x,o.height=f*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",q.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){sn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[h(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,u=o.next,f=o.prev;u?u.prev=f:this._drawLast=f,f?f.next=u:this._drawFirst=u,delete r._order,delete this._layers[h(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),u=[],f,p;for(p=0;p<o.length;p++){if(f=Number(o[p]),isNaN(f))return;u.push(f)}r.options._dashArray=u}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||ce(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var u,f,p,v,j=r._parts,T=j.length,O=this._ctx;if(T){for(O.beginPath(),u=0;u<T;u++){for(f=0,p=j[u].length;f<p;f++)v=j[u][f],O[f?"lineTo":"moveTo"](v.x,v.y);o&&O.closePath()}this._fillStroke(O,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,u=this._ctx,f=Math.max(Math.round(r._radius),1),p=(Math.max(Math.round(r._radiusY),1)||f)/f;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(o.x,o.y/p,f,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,r)}},_fillStroke:function(r,o){var u=o.options;u.fill&&(r.globalAlpha=u.fillOpacity,r.fillStyle=u.fillColor||u.color,r.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=u.opacity,r.lineWidth=u.weight,r.strokeStyle=u.color,r.lineCap=u.lineCap,r.lineJoin=u.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),u,f,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(u))&&(f=u);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(ke(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var u,f,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(f=u);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(Y(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,u){this._map._fireDOMEvent(o,u||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var u=o.next,f=o.prev;if(u)u.prev=f;else return;f?f.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var u=o.next,f=o.prev;if(f)f.next=u;else return;u?u.prev=f:f&&(this._drawLast=f),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function lh(r){return q.canvas?new ah(r):null}var Pi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jy={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(sn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=Pi("shape");Y(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=Pi("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;ve(o),r.removeInteractiveTarget(o),delete this._layers[h(r)]},_updateStyle:function(r){var o=r._stroke,u=r._fill,f=r.options,p=r._container;p.stroked=!!f.stroke,p.filled=!!f.fill,f.stroke?(o||(o=r._stroke=Pi("stroke")),p.appendChild(o),o.weight=f.weight+"px",o.color=f.color,o.opacity=f.opacity,f.dashArray?o.dashStyle=w(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=f.lineCap.replace("butt","flat"),o.joinstyle=f.lineJoin):o&&(p.removeChild(o),r._stroke=null),f.fill?(u||(u=r._fill=Pi("fill")),p.appendChild(u),u.color=f.fillColor||f.color,u.opacity=f.fillOpacity):u&&(p.removeChild(u),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),u=Math.round(r._radius),f=Math.round(r._radiusY||u);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+f+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){xr(r._container)},_bringToBack:function(r){wr(r._container)}},Js=q.vml?Pi:hd,Ci=sn.extend({_initContainer:function(){this._container=Js("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Js("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ve(this._container),de(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sn.prototype._update.call(this);var r=this._bounds,o=r.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),je(u,r.min),u.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=Js("path");r.options.className&&Y(o,r.options.className),r.options.interactive&&Y(o,"leaflet-interactive"),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){ve(r._path),r.removeInteractiveTarget(r._path),delete this._layers[h(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,u=r.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,fd(r._parts,o))},_updateCircle:function(r){var o=r._point,u=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||u,p="a"+u+","+f+" 0 1,0 ",v=r._empty()?"M0 0":"M"+(o.x-u)+","+o.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(r,v)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){xr(r._path)},_bringToBack:function(r){wr(r._path)}});q.vml&&Ci.include(jy);function uh(r){return q.svg||q.vml?new Ci(r):null}re.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&lh(r)||uh(r)}});var ch=kr.extend({initialize:function(r,o){kr.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ue(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Ty(r,o){return new ch(r,o)}Ci.create=Js,Ci.pointsToPath=fd,rn.geometryToLayer=Ws,rn.coordsToLatLng=al,rn.coordsToLatLngs=qs,rn.latLngToCoords=ll,rn.latLngsToCoords=Hs,rn.getFeature=Er,rn.asFeature=Zs,re.mergeOptions({boxZoom:!0});var dh=Ht.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Q(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),wi(),qa(),this._startPoint=this._map.mouseEventToContainerPoint(r),Q(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),Y(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new K(this._point,this._startPoint),u=o.getSize();je(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ve(this._box),ke(this._container,"leaflet-crosshair")),bi(),Ha(),de(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new Oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});re.addInitHook("addHandler","boxZoom",dh),re.mergeOptions({doubleClickZoom:!0});var hh=Ht.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,u=o.getZoom(),f=o.options.zoomDelta,p=r.originalEvent.shiftKey?u-f:u+f;o.options.doubleClickZoom==="center"?o.setZoom(p):o.setZoomAround(r.containerPoint,p)}});re.addInitHook("addHandler","doubleClickZoom",hh),re.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var fh=Ht.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new _n(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}Y(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ke(this._map._container,"leaflet-grab"),ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ue(this._map.options.maxBounds);this._offsetLimit=ie(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),u=this._initialWorldOffset,f=this._draggable._newPos.x,p=(f-o+u)%r+o-u,v=(f+o+u)%r-o-u,j=Math.abs(p+u)<Math.abs(v+u)?p:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(r){var o=this._map,u=o.options,f=!u.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),f)o.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,j=u.easeLinearity,T=p.multiplyBy(j/v),O=T.distanceTo([0,0]),A=Math.min(u.inertiaMaxSpeed,O),U=T.multiplyBy(A/O),V=A/(u.inertiaDeceleration*j),ee=U.multiplyBy(-V/2).round();!ee.x&&!ee.y?o.fire("moveend"):(ee=o._limitOffset(ee,o.options.maxBounds),ce(function(){o.panBy(ee,{duration:V,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});re.addInitHook("addHandler","dragging",fh),re.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ph=Ht.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Q(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),de(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,u=r.scrollTop||o.scrollTop,f=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(f,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},u=this.keyCodes,f,p;for(f=0,p=u.left.length;f<p;f++)o[u.left[f]]=[-1*r,0];for(f=0,p=u.right.length;f<p;f++)o[u.right[f]]=[r,0];for(f=0,p=u.down.length;f<p;f++)o[u.down[f]]=[0,r];for(f=0,p=u.up.length;f<p;f++)o[u.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},u=this.keyCodes,f,p;for(f=0,p=u.zoomIn.length;f<p;f++)o[u.zoomIn[f]]=r;for(f=0,p=u.zoomOut.length;f<p;f++)o[u.zoomOut[f]]=-r},_addHooks:function(){Q(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){de(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,u=this._map,f;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(f=this._panKeys[o],r.shiftKey&&(f=B(f).multiplyBy(3)),u.options.maxBounds&&(f=u._limitOffset(B(f),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(f)));u.panTo(p)}else u.panBy(f)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Gn(r)}}});re.addInitHook("addHandler","keyboard",ph),re.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var mh=Ht.extend({addHooks:function(){Q(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){de(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=Bd(r),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Gn(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),u=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,v=u?Math.ceil(p/u)*u:p,j=r._limitZoom(o+(this._delta>0?v:-v))-o;this._delta=0,this._startTime=null,j&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+j):r.setZoomAround(this._lastMousePos,o+j))}});re.addInitHook("addHandler","scrollWheelZoom",mh);var Ny=600;re.mergeOptions({tapHold:q.touchNative&&q.safari&&q.mobile,tapTolerance:15});var gh=Ht.extend({addHooks:function(){Q(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new R(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Q(document,"touchend",$e),Q(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Ny),Q(document,"touchend touchcancel contextmenu",this._cancel,this),Q(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){de(document,"touchend",$e),de(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),de(document,"touchend touchcancel contextmenu",this._cancel,this),de(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new R(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});re.addInitHook("addHandler","tapHold",gh),re.mergeOptions({touchZoom:q.touch,bounceAtZoomLimits:!0});var vh=Ht.extend({addHooks:function(){Y(this._map._container,"leaflet-touch-zoom"),Q(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ke(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(r.touches[0]),f=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(f)._divideBy(2))),this._startDist=u.distanceTo(f),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),Q(document,"touchmove",this._onTouchMove,this),Q(document,"touchend touchcancel",this._onTouchEnd,this),$e(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(r.touches[0]),f=o.mouseEventToContainerPoint(r.touches[1]),p=u.distanceTo(f)/this._startDist;if(this._zoom=o.getScaleZoom(p,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&p<1||this._zoom>o.getMaxZoom()&&p>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var v=u._add(f)._divideBy(2)._subtract(this._centerPoint);if(p===1&&v.x===0&&v.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Me(this._animRequest);var j=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ce(j,this,!0),$e(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Me(this._animRequest),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});re.addInitHook("addHandler","touchZoom",vh),re.BoxZoom=dh,re.DoubleClickZoom=hh,re.Drag=fh,re.Keyboard=ph,re.ScrollWheelZoom=mh,re.TapHold=gh,re.TouchZoom=vh,n.Bounds=K,n.Browser=q,n.CRS=rt,n.Canvas=ah,n.Circle=ol,n.CircleMarker=Fs,n.Class=wt,n.Control=Lt,n.DivIcon=ih,n.DivOverlay=Zt,n.DomEvent=Zv,n.DomUtil=qv,n.Draggable=_n,n.Evented=en,n.FeatureGroup=tn,n.GeoJSON=rn,n.GridLayer=Ni,n.Handler=Ht,n.Icon=Sr,n.ImageOverlay=Vs,n.LatLng=oe,n.LatLngBounds=Oe,n.Layer=Ot,n.LayerGroup=br,n.LineUtil=sy,n.Map=re,n.Marker=$s,n.Mixin=Xv,n.Path=xn,n.Point=R,n.PolyUtil=ey,n.Polygon=kr,n.Polyline=nn,n.Popup=Ks,n.PosAnimation=Ud,n.Projection=oy,n.Rectangle=ch,n.Renderer=sn,n.SVG=Ci,n.SVGOverlay=rh,n.TileLayer=jr,n.Tooltip=Gs,n.Transformation=Oa,n.Util=Hn,n.VideoOverlay=nh,n.bind=l,n.bounds=ie,n.canvas=lh,n.circle=py,n.circleMarker=fy,n.control=Ei,n.divIcon=Sy,n.extend=s,n.featureGroup=cy,n.geoJSON=th,n.geoJson=vy,n.gridLayer=ky,n.icon=dy,n.imageOverlay=yy,n.latLng=J,n.latLngBounds=ue,n.layerGroup=uy,n.map=Vv,n.marker=hy,n.point=B,n.polygon=gy,n.polyline=my,n.popup=wy,n.rectangle=Ty,n.setOptions=E,n.stamp=h,n.svg=uh,n.svgOverlay=xy,n.tileLayer=sh,n.tooltip=by,n.transformation=vi,n.version=i,n.videoOverlay=_y;var Py=window.L;n.noConflict=function(){return window.L=Py,this},window.L=n})})(nc,nc.exports);var Pa=nc.exports;function ud(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function cd(e,t){return t==null?function(i,s){const a=P.useRef();return a.current||(a.current=e(i,s)),a}:function(i,s){const a=P.useRef();a.current||(a.current=e(i,s));const l=P.useRef(i),{instance:d}=a.current;return P.useEffect(function(){l.current!==i&&(t(d,i,l.current),l.current=i)},[d,i,s]),a}}function _k(e,t){P.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function uv(e){return function(n){const i=av(),s=e(ld(n,i),i);return iv(i.map,n.attribution),lv(s.current,n.eventHandlers),_k(s.current,i),s}}function xk(e,t){const n=cd(e,t),i=uv(n);return mk(i)}function wk(e,t){const n=cd(e),i=yk(n,t);return gk(i)}function bk(e,t){const n=cd(e,t),i=uv(n);return vk(i)}function Sk(e,t,n){const{opacity:i,zIndex:s}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),s!=null&&s!==n.zIndex&&e.setZIndex(s)}function rc(){return rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rc.apply(this,arguments)}function kk({bounds:e,boundsOptions:t,center:n,children:i,className:s,id:a,placeholder:l,style:d,whenReady:h,zoom:m,...g},y){const[x]=P.useState({className:s,id:a,style:d}),[b,k]=P.useState(null);P.useImperativeHandle(y,()=>(b==null?void 0:b.map)??null,[b]);const E=P.useCallback(S=>{if(S!==null&&b===null){const _=new Pa.Map(S,g);n!=null&&m!=null?_.setView(n,m):e!=null&&_.fitBounds(e,t),h!=null&&_.whenReady(h),k(fk(_))}},[]);P.useEffect(()=>()=>{b==null||b.map.remove()},[b]);const C=b?ii.createElement(ov,{value:b},i):l??null;return ii.createElement("div",rc({},x,{ref:E}),C)}const cv=P.forwardRef(kk),dv=xk(function({position:t,...n},i){const s=new Pa.Marker(t,n);return ud(s,pk(i,{overlayContainer:s}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Ek=wk(function(t,n){const i=new Pa.Popup(t,n.overlayContainer);return ud(i,n)},function(t,n,{position:i},s){P.useEffect(function(){const{instance:l}=t;function d(m){m.popup===l&&(l.update(),s(!0))}function h(m){m.popup===l&&s(!1)}return n.map.on({popupopen:d,popupclose:h}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var g;n.map.off({popupopen:d,popupclose:h}),(g=n.overlayContainer)==null||g.unbindPopup(),n.map.removeLayer(l)}},[t,n,s,i])}),hv=bk(function({url:t,...n},i){const s=new Pa.TileLayer(t,ld(n,i));return ud(s,i)},function(t,n,i){Sk(t,n,i);const{url:s}=n;s!=null&&s!==i.url&&t.setUrl(s)}),cp=[40.7128,-74.006],jk=["All Types","A+","A-","B+","B-","AB+","AB-","O+","O-"];function Tk(){const e=Xt(),[t,n]=P.useState("All Types"),[i,s]=P.useState(null),[a,l]=P.useState(null),[d,h]=P.useState(null),m=()=>{e("/live-donor-map")};return P.useCallback(g=>{s(g),h(null)},[]),P.useCallback(()=>{h("Failed to load Google Maps")},[]),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[c.jsx("span",{className:"text-red-600",children:""})," Live Donor Map"]}),c.jsx("button",{onClick:m,onMouseEnter:g=>g.currentTarget.classList.add("bg-gray-200","scale-105"),onMouseLeave:g=>g.currentTarget.classList.remove("bg-gray-200","scale-105"),className:"px-3 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200 transition-all duration-200 transform hover:scale-105 active:scale-95",children:"Full View"})]}),c.jsxs(cv,{center:cp,zoom:12,style:{height:"400px",width:"100%"},children:[c.jsx(hv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),c.jsx(dv,{position:cp})]}),c.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 scrollbar-hide",children:jk.map(g=>c.jsx("button",{onClick:()=>n(g),onMouseEnter:()=>l(g),onMouseLeave:()=>l(null),className:`px-3 py-1 rounded text-sm whitespace-nowrap transition-all duration-200 ${t===g?"bg-red-600 text-white shadow-md scale-105":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-red-300"} transform ${a===g&&t!==g?"scale-105":""}`,children:g},g))})]})}function fv(){const e=Xt(),[t,n]=P.useState(null),i=[{icon:"+",title:"New Blood Request",subtitle:"Submit urgent or scheduled blood requirement",color:"blue",onClick:()=>e("/blood-request-portal")},{icon:"",title:"Emergency Protocols",subtitle:"Activate pre-configured emergency responses",color:"red",onClick:()=>e("/emergency-dashboard")},{icon:"",title:"View Donors",subtitle:"Browse and contact matched donors",color:"green",onClick:()=>e("/live-donor-map")}];return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((s,a)=>c.jsx("button",{onClick:s.onClick,onMouseEnter:()=>n(a),onMouseLeave:()=>n(null),className:`p-6 rounded-lg text-left transition-all duration-200 min-h-[140px] ${s.color==="red"?"bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-lg":s.color==="blue"?"bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg":s.color==="green"?"bg-green-600 text-white hover:bg-green-700 shadow-md hover:shadow-lg":"bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400"} transform ${t===a?"scale-105 -translate-y-1":"scale-100"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`text-2xl transition-transform duration-200 ${t===a?"scale-110":""}`,children:s.icon}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:s.title}),c.jsx("p",{className:`text-sm ${s.color==="red"?"text-red-100":s.color==="blue"?"text-blue-100":s.color==="green"?"text-green-100":"text-gray-600"}`,children:s.subtitle})]})]})},a))})]})}function Nk(){const{getStats:e,bloodRequests:t,donors:n,emergencies:i}=ct(),s=e(),[a,l]=P.useState("overview"),d=[{title:"ACTIVE DONORS",value:s.totalDonors.toLocaleString(),trend:"+12.5% vs last week",trendUp:!0,icon:"",color:"green"},{title:"ACTIVE REQUESTS",value:s.activeRequests.toString(),trend:"-8.3% vs yesterday",trendUp:!1,icon:"",color:"red"},{title:"SUCCESSFUL MATCHES",value:s.fulfilledRequests.toString(),trend:"+18.2% this month",trendUp:!0,icon:"",color:"blue"},{title:"LIVES SAVED",value:(s.fulfilledRequests*3).toLocaleString(),trend:"+25.7% all time",trendUp:!0,icon:"",color:"orange"}];return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-6 md:py-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Emergency Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Real-time monitoring and emergency response coordination"})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[c.jsx("span",{className:"text-green-600 text-xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-green-800 font-medium",children:"System Status: All services operational"}),c.jsx("span",{className:"text-green-600 mx-2",children:""}),c.jsxs("span",{className:"text-green-600",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6",children:d.map((h,m)=>c.jsx(nv,{kpi:h},m))}),c.jsx(rv,{activeTab:a,setActiveTab:l}),a==="overview"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[c.jsx("div",{className:"lg:col-span-2",children:c.jsx(Tk,{})}),c.jsx("div",{children:c.jsx(fv,{})})]}),a==="alerts"&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Emergency Alerts"}),c.jsx("div",{className:"space-y-4",children:i.length>0?i.map(h=>c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-red-500",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:[h.bloodType," - ",h.urgency]}),c.jsx("p",{className:"text-gray-600 mt-1",children:h.location}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:h.time})]}),c.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:h.urgency})]})},h.id)):c.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:"No emergency alerts at this time"})})]}),a==="requests"&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Active Requests"}),c.jsx("div",{className:"space-y-4",children:t.filter(h=>h.status==="Pending").map(h=>c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:h.bloodType}),c.jsx("p",{className:"text-gray-600",children:h.location})]}),c.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded text-xs",children:h.status})]})},h.id))})]}),a==="donors"&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Donors"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.filter(h=>h.available).map(h=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[c.jsx("h3",{className:"font-semibold",children:h.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Blood Type: ",h.bloodType]})]},h.id))})]})]})})}function Pk({alert:e}){const{updateBloodRequest:t}=ct(),[n,i]=P.useState(!1),s=async()=>{i(!0),setTimeout(()=>{e("Thank you for responding! A coordinator will contact you shortly."),i(!1)},1e3)},a=()=>{const d={title:`Emergency Blood Request - ${e.bloodType}`,text:`Emergency situation: ${e.location}. Blood type needed: ${e.bloodType}`,url:window.location.href};navigator.share?navigator.share(d).catch(h=>{console.error("Error sharing:",h),l()}):l()},l=()=>{const d=`Emergency Blood Request - ${e.bloodType}
Location: ${e.location}`;navigator.clipboard?(navigator.clipboard.writeText(d),e("Alert details copied to clipboard!")):e(`Share this: ${d}`)};return c.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 transition-all duration-300 hover:shadow-xl ${e.color==="red"?"border-red-500":"border-orange-500"}`,children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 transition-transform duration-300 hover:scale-110 ${e.color==="red"?"bg-red-100":"bg-orange-100"}`,children:c.jsx("span",{className:"text-2xl",children:""})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[e.urgency==="Critical"?"Critical Blood Shortage":"Urgent Request"," - ",e.bloodType]}),c.jsx("span",{className:"text-xs text-gray-500",children:e.postedTime})]}),c.jsx("p",{className:"text-gray-700 mb-4",children:e.location==="All Areas"?"Emergency situation requiring immediate blood transfusion. Multiple units needed for ongoing treatment and stabilization.":`Emergency situation at ${e.location}. Patient requires immediate transfusion for major surgery scheduled in 2 hours.`}),c.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Blood Type:"}),c.jsx("span",{className:"ml-2 text-gray-900",children:e.bloodType})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Location:"}),c.jsx("span",{className:"ml-2 text-gray-900",children:e.location})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Doctor:"}),c.jsxs("span",{className:"ml-2 text-gray-900",children:["Dr. ",e.urgency==="Critical"?"Sarah Mitchell":"James Rodriguez"]})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:s,disabled:n,onMouseEnter:d=>{n||d.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105")},onMouseLeave:d=>{d.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2 transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:n?"Responding...":"Respond Now"})]}),c.jsxs("button",{onClick:a,onMouseEnter:d=>{d.currentTarget.classList.add("bg-gray-100","border-gray-400","scale-105")},onMouseLeave:d=>{d.currentTarget.classList.remove("bg-gray-100","border-gray-400","scale-105")},className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 active:bg-gray-100 transition-all duration-200 flex items-center gap-2 transform hover:scale-105 active:scale-95 font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Share Alert"})]})]})]})]})})}function Ck({activities:e=[]}){return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),c.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:e.map((t,n)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${t.color==="blue"?"bg-blue-100":t.color==="red"?"bg-red-100":t.color==="yellow"?"bg-yellow-100":"bg-green-100"}`,children:c.jsx("span",{className:"text-lg",children:t.icon})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-800",children:t.message}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.time})]})]},n))})]})}function Lk(){const{emergencies:e,bloodRequests:t,donors:n}=ct(),i=e.filter(a=>a.urgency==="Critical"||a.urgency==="Urgent").sort((a,l)=>new Date(l.createdAt)-new Date(a.createdAt)).map((a,l)=>({...a,type:a.urgency==="Critical"?"critical":"urgent",color:a.urgency==="Critical"?"red":"orange",postedTime:`${l*10+5}m ago`})),s=[{icon:"",color:"blue",message:"request for O- blood type",time:"8 minutes ago"},{icon:"",color:"red",message:"New blood request created by Memorial Medical Center",time:"15 minutes ago"},{icon:"",color:"yellow",message:"Sarah Johnson registered as new donor with AB+ blood type",time:"23 minutes ago"},{icon:"",color:"green",message:"David Chen scheduled donation appointment for next week",time:"35 minutes ago"}];return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsx("div",{className:"container mx-auto px-4 md:px-8 py-6 md:py-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Critical Alerts"}),c.jsx("a",{href:"#",className:"text-red-600 hover:underline",children:"View All"})]}),c.jsx("div",{className:"space-y-4",children:i.length>0?i.map(a=>c.jsx(Pk,{alert:a},a.id)):c.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:c.jsx("p",{className:"text-gray-500",children:"No critical alerts at this time"})})})]}),c.jsx("div",{children:c.jsx(Ck,{activities:s})})]})})})}function Ok({action:e}){const t=Xt(),[n,i]=P.useState(!1),s={red:"bg-red-50 border-red-200 hover:bg-red-100 hover:border-red-400 hover:shadow-lg",green:"bg-green-50 border-green-200 hover:bg-green-100 hover:border-green-400 hover:shadow-lg",orange:"bg-orange-50 border-orange-200 hover:bg-orange-100 hover:border-orange-400 hover:shadow-lg"},a={red:"text-red-600",green:"text-green-600",orange:"text-orange-600"},l=()=>{t(e.action)};return c.jsxs("div",{onClick:l,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:`bg-white rounded-lg shadow-md p-6 border-2 ${s[e.color]} transition-all duration-300 cursor-pointer h-full transform ${n?"scale-105 -translate-y-1":"scale-100"}`,children:[c.jsx("div",{className:`text-4xl mb-4 transition-transform duration-300 ${n?"scale-110 rotate-3":""} ${a[e.color]}`,children:e.icon}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),c.jsx("p",{className:"text-gray-600 text-sm",children:e.description})]})}function dp({request:e}){const{updateBloodRequest:t}=ct(),[n,i]=P.useState(!1),s=()=>{const h=e.status==="Pending"?"In Progress":"Fulfilled";t(e.id,{status:h}),alert(`Request ${e.requestId} updated to ${h}`)},a=()=>{const h=`
Request ID: ${e.requestId}
Blood Type: ${e.bloodType}
Quantity: ${e.quantity} units
Patient: ${e.patientName||"Anonymous"}
Location: ${e.location}
Status: ${e.status}
Urgency: ${e.urgency||"Normal"}
Donors Matched: ${e.donorsMatched||0}
Time Elapsed: ${e.timeElapsed}
    `;alert(h.trim())},l=e.urgency==="critical"||e.urgency==="Critical",d=e.donorsMatched>0;return c.jsx("div",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:`bg-white rounded-lg shadow-md p-6 border border-gray-200 transition-all duration-300 ${n?"shadow-xl border-red-300":""}`,children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[c.jsxs("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:["Request #",e.requestId]}),l&&c.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold uppercase animate-pulse",children:"Critical"}),d&&c.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold",children:"matched"})]}),c.jsxs("p",{className:"text-gray-700 font-medium mb-4",children:[e.patientName?`${e.patientName} - `:"Emergency Surgery - ","Patient ID: P-",String(e.id).slice(-5)]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-red-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Blood Type"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.bloodType})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Units Needed"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.quantity})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-blue-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Donors Matched"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.donorsMatched||0})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Time Elapsed"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.timeElapsed||"Just now"})]})]})]}),c.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.location||"Trauma case - Multiple injuries requiring immediate transfusion"]})})]}),c.jsxs("div",{className:"flex flex-col gap-2 lg:min-w-[120px]",children:[c.jsxs("button",{onClick:a,onMouseEnter:h=>h.currentTarget.classList.add("bg-gray-100"),onMouseLeave:h=>h.currentTarget.classList.remove("bg-gray-100"),className:"flex items-center justify-center gap-2 w-full px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 hover:border-gray-400 transition-all duration-200 font-medium",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{children:"Details"})]}),c.jsxs("button",{onClick:s,onMouseEnter:h=>h.currentTarget.classList.add("bg-red-700","shadow-lg"),onMouseLeave:h=>h.currentTarget.classList.remove("bg-red-700","shadow-lg"),className:"flex items-center justify-center gap-2 w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105 active:scale-95 font-medium",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{children:"Update"})]})]})]})})}function Rk(){return c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"City General Hospital"}),c.jsx("p",{className:"text-gray-600",children:"Emergency Department - Verified Institution"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Verified"}),c.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Priority Access"})]})]})})}function Ak({stats:e}){const t=[{label:"Active Requests",value:e.activeRequests||12,trend:"+3",trendUp:!0,icon:"",color:"pink"},{label:"Matched Donors",value:e.availableDonors||47,trend:"+8",trendUp:!0,icon:"",color:"green"},{label:"Units Pending",value:e.activeRequests*2||28,trend:"-5",trendUp:!1,icon:"",color:"yellow"},{label:"Completed Today",value:e.fulfilledRequests||15,trend:"+2",trendUp:!0,icon:"",color:"green"}],n={pink:"bg-pink-50 border-pink-200",green:"bg-green-50 border-green-200",yellow:"bg-yellow-50 border-yellow-200"};return c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:t.map((i,s)=>c.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 border ${n[i.color]}`,children:[c.jsx("div",{className:"text-3xl mb-3",children:i.icon}),c.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:i.value}),c.jsx("div",{className:"text-sm text-gray-600 mb-2",children:i.label}),c.jsxs("div",{className:"flex items-center gap-1",children:[i.trendUp?c.jsx("span",{className:"text-green-600",children:""}):c.jsx("span",{className:"text-red-600",children:""}),c.jsx("span",{className:`text-xs ${i.trendUp?"text-green-600":"text-red-600"}`,children:i.trend})]})]},s))})}function Ik({activeTab:e,setActiveTab:t}){const n=[{id:"overview",label:"Overview",icon:""},{id:"requests",label:"Active Requests",icon:""},{id:"donors",label:"Matched Donors",icon:""},{id:"protocols",label:"Emergency Protocols",icon:""},{id:"activity",label:"Recent Activity",icon:""}];return c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-6 scrollbar-hide",children:n.map(i=>c.jsxs("button",{onClick:()=>t(i.id),onMouseEnter:s=>{e!==i.id&&s.currentTarget.classList.add("bg-gray-50")},onMouseLeave:s=>{e!==i.id&&s.currentTarget.classList.remove("bg-gray-50")},className:`px-4 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap flex items-center gap-2 ${e===i.id?"bg-red-600 text-white shadow-md transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 hover:border-gray-300"}`,children:[c.jsx("span",{children:i.icon}),c.jsx("span",{children:i.label})]},i.id))})}function Mk(){const e=Xt(),{bloodRequests:t,getStats:n}=ct(),i=n(),[s,a]=P.useState("overview"),[l,d]=P.useState(!1),h=[{id:1,icon:"",title:"New Blood Request",description:"Submit urgent or scheduled blood requirement",color:"red",action:"/blood-request-portal"},{id:2,icon:"",title:"Emergency Protocols",description:"Activate pre-configured emergency responses",color:"green",action:"/emergency-dashboard"},{id:3,icon:"",title:"View Donors",description:"Browse and contact matched donors",color:"orange",action:"/live-donor-map"}],m=t.sort((b,k)=>new Date(k.createdAt)-new Date(b.createdAt)).slice(0,10).map((b,k)=>({...b,requestId:`REQ-2026-${String(k+1).padStart(3,"0")}`,donorsMatched:Math.floor(Math.random()*10)+1,timeElapsed:g(b.createdAt)}));function g(b){if(!b)return"Just now";const k=new Date,E=new Date(b),C=k-E,S=Math.floor(C/6e4);if(S<1)return"Just now";if(S<60)return`${S} mins`;const _=Math.floor(S/60);return _<24?`${_} hours`:`${Math.floor(_/24)} days`}const y=()=>{e("/blood-request-portal")},x=()=>{d(!l),e("/critical-alerts")};return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-6 md:py-8",children:[c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"flex items-center justify-between mb-2 flex-wrap gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Hospital Management Center"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Institutional dashboard for emergency blood supply coordination"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:x,className:"relative px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all duration-200 flex items-center gap-2 transform hover:scale-105 active:scale-95",children:[c.jsx("span",{children:""}),c.jsx("span",{className:"hidden md:inline",children:"Notifications"}),c.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-600 rounded-full animate-pulse"})]}),c.jsxs("button",{onClick:y,onMouseEnter:b=>b.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105"),onMouseLeave:b=>b.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2 transform hover:scale-105 active:scale-95 font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{className:"hidden md:inline",children:"New Request"})]})]})]})}),c.jsx(Rk,{}),c.jsx(Ak,{stats:i}),c.jsx(Ik,{activeTab:s,setActiveTab:a}),s==="overview"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-8 mt-6",children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-6",children:"Quick Actions"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:h.map(b=>c.jsx(Ok,{action:b},b.id))})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-6",children:"Recent Requests"}),c.jsx("div",{className:"space-y-4",children:m.length>0?m.map(b=>c.jsx(dp,{request:b},b.id)):c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[c.jsx("p",{className:"text-gray-500 text-lg",children:"No recent requests"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Create a new blood request to get started"})]})})]})]}),s==="requests"&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Active Requests"}),c.jsx("div",{className:"space-y-4",children:m.filter(b=>b.status==="Pending").map(b=>c.jsx(dp,{request:b},b.id))})]}),s==="donors"&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Matched Donors"}),c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:c.jsx("p",{className:"text-gray-500 text-center",children:"Donor matching feature coming soon"})})]}),s==="protocols"&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Emergency Protocols"}),c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:c.jsx("p",{className:"text-gray-500 text-center",children:"Emergency protocols feature coming soon"})})]}),s==="activity"&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Activity"}),c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:c.jsx("p",{className:"text-gray-500 text-center",children:"Activity feed feature coming soon"})})]})]})})}function Dk(){const e=[{icon:"",color:"green",label:"Available Donor",description:"Ready to donate"},{icon:"",color:"yellow",label:"Busy Donor",description:"Currently engaged"},{icon:"",color:"gray",label:"Unavailable",description:"Not available now"},{icon:"",color:"red",label:"Your Location",description:"Current position"}];return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"text-blue-600",children:""})," Map Legend"]}),c.jsx("div",{className:"space-y-3",children:e.map((t,n)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${t.color==="green"?"bg-green-500":t.color==="yellow"?"bg-yellow-500":t.color==="gray"?"bg-gray-400":"bg-red-500"}`,children:c.jsx("span",{className:"text-white text-xs",children:t.icon})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.label}),c.jsx("p",{className:"text-xs text-gray-600",children:t.description})]})]},n))}),c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-600",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Real-time updates every 30 seconds"})]})})]})}function zk({selectedBloodType:e,searchRadius:t,onBloodTypeChange:n,onRadiusChange:i,onUseCurrentLocation:s,availableDonors:a}){const[l,d]=P.useState(!1),h=()=>{d(!0),setTimeout(()=>{d(!1),alert("Filters refreshed!")},500)},m=()=>{s()};return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx("span",{className:"text-red-600",children:""})," Search Filters"]}),c.jsx("button",{onClick:h,disabled:l,onMouseEnter:g=>g.currentTarget.classList.add("bg-gray-100","rotate-180"),onMouseLeave:g=>{g.currentTarget.classList.remove("bg-gray-100"),l||g.currentTarget.classList.remove("rotate-180")},className:`p-2 hover:bg-gray-100 rounded transition-all duration-300 ${l?"animate-spin":""}`,children:c.jsx("span",{className:"text-lg",children:""})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Type"}),c.jsxs("select",{value:e,onChange:g=>n(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-200 hover:border-red-300",children:[c.jsx("option",{value:"All Types",children:"All Blood Types"}),c.jsx("option",{value:"A+",children:"A+"}),c.jsx("option",{value:"A-",children:"A-"}),c.jsx("option",{value:"B+",children:"B+"}),c.jsx("option",{value:"B-",children:"B-"}),c.jsx("option",{value:"AB+",children:"AB+"}),c.jsx("option",{value:"AB-",children:"AB-"}),c.jsx("option",{value:"O+",children:"O+"}),c.jsx("option",{value:"O-",children:"O-"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Radius"}),c.jsxs("select",{value:t,onChange:g=>i(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-200 hover:border-red-300",children:[c.jsx("option",{value:"5",children:"5 km"}),c.jsx("option",{value:"10",children:"10 km"}),c.jsx("option",{value:"20",children:"20 km"}),c.jsx("option",{value:"50",children:"50 km"})]})]}),c.jsxs("button",{onClick:m,onMouseEnter:g=>{g.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105")},onMouseLeave:g=>{g.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105")},className:"w-full px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2 transform hover:scale-105 active:scale-95 font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Use Current Location"})]}),c.jsx("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("div",{children:c.jsxs("div",{className:"font-semibold text-gray-900",children:[a," Available Donors"]})})]})}),c.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-600",children:[c.jsx("span",{children:""}),c.jsx("p",{children:"Map shows real-time donor availability. Click on markers to view donor details and contact options."})]})]})]})}function Bk({stats:e={}}){const[t,n]=P.useState(null),i=[{label:"Available",value:e.availableDonors||6,icon:""},{label:"Busy",value:Math.floor((e.totalDonors||0)*.2)||2,icon:""},{label:"In Range",value:e.totalDonors||8,icon:""},{label:"Active Now",value:(e.availableDonors||0)+3||9,icon:""}];return c.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[c.jsx("div",{className:"flex flex-wrap gap-6",children:i.map((s,a)=>c.jsxs("div",{onMouseEnter:()=>n(a),onMouseLeave:()=>n(null),className:`flex items-center gap-2 transition-all duration-200 ${t===a?"scale-110":""}`,children:[c.jsx("span",{className:`text-2xl transition-transform duration-200 ${t===a?"scale-125 rotate-12":""}`,children:s.icon}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.value}),c.jsx("div",{className:"text-xs text-gray-600",children:s.label})]})]},a))}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Updated ",new Date().toLocaleTimeString()]})]}),c.jsxs("button",{onClick:()=>alert("Switching to list view..."),onMouseEnter:s=>s.currentTarget.classList.add("bg-gray-200","scale-105"),onMouseLeave:s=>s.currentTarget.classList.remove("bg-gray-200","scale-105"),className:"px-4 py-2 bg-gray-100 rounded text-sm hover:bg-gray-200 transition-all duration-200 flex items-center gap-2 transform hover:scale-105 active:scale-95",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"List View"})]})]})]})})}function Uk(){const e=Xt(),[t,n]=P.useState(null),i=[{icon:"",title:"Emergency Request",subtitle:"Create Emergency Request",color:"red",onClick:()=>e("/blood-request-portal")},{icon:"",title:"Find Donor",subtitle:"Search for a donor",color:"white",onClick:()=>e("/live-donor-map")},{icon:"",title:"Update Status",subtitle:"Change availability",color:"white",onClick:()=>alert("Update donor status feature coming soon!")},{icon:"",title:"View History",subtitle:"Check past requests",color:"white",onClick:()=>e("/hospital-management-center")}];return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map((s,a)=>c.jsxs("button",{onClick:s.onClick,onMouseEnter:()=>n(a),onMouseLeave:()=>n(null),className:`p-4 rounded-lg text-left transition-all duration-200 ${s.color==="red"?"bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-lg":"bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400"} transform ${t===a?"scale-105 -translate-y-1":"scale-100"}`,children:[c.jsx("div",{className:`text-2xl mb-2 transition-transform duration-200 ${t===a?"scale-110 rotate-3":""}`,children:s.icon}),c.jsx("p",{className:"font-semibold text-sm",children:s.title}),c.jsx("p",{className:`text-xs ${s.color==="red"?"text-red-100":"text-gray-600"}`,children:s.subtitle})]},a))})]})}function $k({requests:e=[],donors:t=[]}){const n=[{icon:"",message:"Michael Rodriguez completed donation at City General Hospital",time:"2 minutes ago",color:"green"},{icon:"",message:"3 donors matched with emergency request for O- blood type",time:"8 minutes ago",color:"blue"},{icon:"",message:"New blood request created by Memorial Medical Center",time:"15 minutes ago",color:"red"}];return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Recent Activity"}),c.jsx("a",{href:"#",className:"text-red-600 text-sm hover:underline",children:"View All"})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:n.map((i,s)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i.color==="green"?"bg-green-100":i.color==="blue"?"bg-blue-100":"bg-red-100"}`,children:c.jsx("span",{className:"text-lg",children:i.icon})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-800",children:i.message}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.time})]})]},s))})]})}function Fk(){const{addEmergency:e}=ct(),[t,n]=P.useState(!1),[i,s]=P.useState(!1),a=async()=>{if(confirm("Send emergency notifications to all available donors in your area?")){s(!0);try{e({bloodType:"URGENT",location:"All Areas",urgency:"Critical",message:"Emergency blood request - All donors please respond"}),setTimeout(()=>{alert("Emergency request sent to all available donors!"),s(!1)},500)}catch(l){console.error("Error sending emergency request:",l),alert("Failed to send request. Please try again."),s(!1)}}};return c.jsx("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:"bg-white rounded-lg shadow-md p-4 md:p-6 transition-all duration-300 hover:shadow-lg",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 transition-transform duration-300 ${t?"scale-110 rotate-12":""}`,children:c.jsx("span",{className:"text-2xl",children:""})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Emergency Blood Request"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Need blood urgently? Click here to send emergency notifications to all available donors in your area."})]}),c.jsxs("button",{onClick:a,disabled:i,onMouseEnter:l=>{i||l.currentTarget.classList.add("bg-red-700","shadow-lg","scale-105")},onMouseLeave:l=>{l.currentTarget.classList.remove("bg-red-700","shadow-lg","scale-105")},className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2 whitespace-nowrap transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[c.jsx("span",{className:`transition-transform duration-200 ${i?"animate-spin":""}`,children:""}),c.jsx("span",{children:i?"Sending...":"Emergency Request"})]})]})})}const Wk=[40.7128,-74.006];function qk(){const{donors:e,bloodRequests:t,getStats:n}=ct(),i=n(),[s,a]=P.useState("All Types"),[l,d]=P.useState("10"),[h,m]=P.useState(null),[g,y]=P.useState(Wk),[x,b]=P.useState(null),k=P.useMemo(()=>e.filter(_=>!(s!=="All Types"&&_.bloodType!==s)),[e,s]),E=["All Types","A+","A-","B+","B-","AB+","AB-","O+","O-"],C=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(_=>{const w=[_.coords.latitude,_.coords.longitude];y(w)},_=>{console.error("Error getting location:",_),alert("Unable to get your location. Please enable location services.")}):alert("Geolocation is not supported by your browser.")},S=()=>{window.open("/live-donor-map","_blank")};return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-6 md:py-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx("span",{className:"text-red-600",children:""})," Live Donor Map"]}),c.jsx("p",{className:"text-gray-600",children:"Real-time donor availability in your area"})]}),c.jsx(Bk,{stats:i}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mt-6",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsx(zk,{selectedBloodType:s,searchRadius:l,onBloodTypeChange:a,onRadiusChange:d,onUseCurrentLocation:C,availableDonors:k.length}),c.jsx(Dk,{})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Live Donor Map"}),c.jsx("button",{onClick:S,onMouseEnter:_=>_.currentTarget.classList.add("bg-gray-200","scale-105"),onMouseLeave:_=>_.currentTarget.classList.remove("bg-gray-200","scale-105"),className:"px-3 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200 transition-all duration-200 transform hover:scale-105 active:scale-95",children:"Full View"})]}),c.jsxs(cv,{center:g,zoom:12,style:{height:"500px",width:"100%"},children:[c.jsx(hv,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),k.slice(0,10).map((_,w)=>{const N=g[0]+(Math.random()-.5)*.1,I=g[1]+(Math.random()-.5)*.1;return c.jsx(dv,{position:[N,I],eventHandlers:{click:()=>m({..._,position:[N,I]})},children:h&&h.id===_.id&&c.jsx(Ek,{children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold",children:h.name}),c.jsxs("p",{className:"text-sm",children:["Blood Type: ",h.bloodType]}),c.jsxs("p",{className:"text-sm",children:["Status: ",h.available?"Available":"Unavailable"]}),h.distance&&c.jsxs("p",{className:"text-sm",children:["Distance: ",h.distance]}),c.jsx("button",{onClick:()=>{alert(`Contacting ${h.name}...`),m(null)},className:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 transition-colors",children:"Contact"})]})})},_.id)})]}),c.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 scrollbar-hide",children:E.map(_=>c.jsx("button",{onClick:()=>a(_),onMouseEnter:()=>b(_),onMouseLeave:()=>b(null),className:`px-3 py-1 rounded text-sm whitespace-nowrap transition-all duration-200 ${s===_?"bg-red-600 text-white shadow-md scale-105":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-red-300"} transform ${x===_&&s!==_?"scale-105":""}`,children:_},_))}),c.jsx("div",{className:"mt-4 flex flex-wrap gap-3 items-center",children:["O+","A+","B+","AB+","O-","A-"].map((_,w)=>c.jsxs("div",{className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded transition-colors duration-200 cursor-pointer",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse"}),c.jsxs("span",{className:"text-sm text-gray-700",children:[_," (",(Math.random()*5+.5).toFixed(1)," km)"]})]},_))})]}),c.jsx(Fk,{})]}),c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsx(Uk,{}),c.jsx($k,{requests:t,donors:e})]})]})]})})}function xo({title:e,value:t,color:n="blue"}){const i={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600"};return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e}),c.jsx("p",{className:`text-3xl font-bold ${i[n]}`,children:t})]})}function Hk({donors:e=[]}){const t=e.slice(0,10).map(n=>({id:n.id,name:n.name,email:n.email,role:"Donor",status:n.available?"Active":"Inactive"}));return t.length===0?c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Management"}),c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No users registered yet"})]}):c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Management"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(n=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:n.name}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.email}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.role}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs ${n.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.status})}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx(ad,{variant:"secondary",className:"text-xs px-2 py-1",children:"View"})})]},n.id))})]})})]})}function Zk({stats:e={}}){const t=[{label:"Requests",value:e.totalRequests||0,color:"bg-blue-500"},{label:"Fulfilled",value:e.fulfilledRequests||0,color:"bg-green-500"},{label:"Pending",value:e.activeRequests||0,color:"bg-yellow-500"}],n=Math.max(...t.map(i=>i.value),1);return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Performance Metrics"}),c.jsx("div",{className:"space-y-4",children:t.map((i,s)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:i.label}),c.jsx("span",{className:"text-sm font-medium text-gray-800",children:i.value})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:c.jsx("div",{className:`${i.color} h-3 rounded-full transition-all duration-500`,style:{width:`${i.value/n*100}%`}})})]},s))}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Success Rate"}),c.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[e.totalRequests>0?Math.round(e.fulfilledRequests/e.totalRequests*100):0,"%"]})]})})]})}function Vk(){return c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Health"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"CPU Usage"}),c.jsx("span",{className:"text-sm font-medium",children:"45%"})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"45%"}})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Memory Usage"}),c.jsx("span",{className:"text-sm font-medium",children:"62%"})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:"62%"}})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Database"}),c.jsx("span",{className:"text-sm font-medium",children:"78%"})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"78%"}})})]})]})]})}function Kk({emergencies:e=[]}){const t=e.filter(n=>n.urgency==="Critical"||n.urgency==="Urgent").slice(0,5).map(n=>({id:n.id,message:`Urgent ${n.bloodType} request at ${n.location}`,severity:n.urgency==="Critical"?"high":"medium",time:new Date(n.createdAt).toLocaleString()}));return t.length===0?c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Alerts"}),c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No active alerts"})]}):c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Alerts"}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:t.map(n=>c.jsxs("div",{className:`border-l-4 p-3 rounded ${n.severity==="high"?"border-red-500 bg-red-50":"border-yellow-500 bg-yellow-50"}`,children:[c.jsx("p",{className:"text-sm font-medium",children:n.message}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.time})]},n.id))})]})}function Gk(){const{donors:e,updateDonor:t}=ct(),[n,i]=P.useState(null),s=e.filter(d=>!d.verified).slice(0,5).map(d=>({id:d.id,name:d.name,type:"Donor",submitted:new Date(d.registeredAt).toLocaleDateString()})),a=async d=>{i(d),setTimeout(()=>{t(d,{verified:!0}),i(null),alert("Donor approved successfully!")},500)},l=d=>{const h=e.find(m=>m.id===d);alert(`Reviewing ${(h==null?void 0:h.name)||"donor"}...`)};return s.length===0?c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Verification Queue"}),c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No items in verification queue"})]}):c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Verification Queue"}),c.jsx("div",{className:"space-y-3",children:s.map(d=>c.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-all duration-200",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:d.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:[d.type,"  ",d.submitted]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>a(d.id),disabled:n===d.id,onMouseEnter:h=>{n!==d.id&&h.currentTarget.classList.add("bg-green-700","scale-105")},onMouseLeave:h=>{h.currentTarget.classList.remove("bg-green-700","scale-105")},className:"text-sm px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 active:bg-green-800 transition-all duration-200 transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:n===d.id?"Processing...":"Approve"}),c.jsx("button",{onClick:()=>l(d.id),onMouseEnter:h=>h.currentTarget.classList.add("bg-gray-300","scale-105"),onMouseLeave:h=>h.currentTarget.classList.remove("bg-gray-300","scale-105"),className:"text-sm px-3 py-1 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 active:bg-gray-400 transition-all duration-200 transform hover:scale-105 active:scale-95 font-medium",children:"Review"})]})]})},d.id))})]})}function Jk({requests:e=[]}){const t=e.slice(0,10).map(n=>({id:n.id,action:`Blood request created - ${n.bloodType}`,user:n.patientName||"Anonymous",time:new Date(n.createdAt).toLocaleString()}));return t.length===0?c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Compliance Audit Log"}),c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No activity logs yet"})]}):c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Compliance Audit Log"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(n=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:n.action}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.user}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.time})]},n.id))})]})})]})}function Qk(){const{getStats:e,bloodRequests:t,donors:n,emergencies:i}=ct(),s=e();return c.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-8",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8",children:"Admin Analytics Center"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 mb-6 md:mb-8",children:[c.jsx(xo,{title:"Total Users",value:s.totalDonors.toString(),color:"blue"}),c.jsx(xo,{title:"Active Donors",value:s.availableDonors.toString(),color:"green"}),c.jsx(xo,{title:"Pending Requests",value:s.activeRequests.toString(),color:"yellow"}),c.jsx(xo,{title:"System Health",value:"98%",color:"green"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8",children:[c.jsx(Zk,{stats:s}),c.jsx(Vk,{})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8",children:[c.jsx(Kk,{emergencies:i}),c.jsx(Gk,{})]}),c.jsx("div",{className:"mb-6 md:mb-8",children:c.jsx(Hk,{donors:n})}),c.jsx(Jk,{requests:t})]})})}function hp(){const{bloodRequests:e,updateBloodRequest:t,getStats:n}=ct(),[i,s]=P.useState("overview"),a=n(),l=e.sort((y,x)=>new Date(x.createdAt)-new Date(y.createdAt)).slice(0,10).map((y,x)=>({...y,requestId:`REQ-2026-${String(x+1).padStart(3,"0")}`,donorsMatched:Math.floor(Math.random()*10)+1,timeElapsed:d(y.createdAt)}));function d(y){if(!y)return"Just now";const x=new Date,b=new Date(y),k=x-b,E=Math.floor(k/6e4);if(E<1)return"Just now";if(E<60)return`${E} mins`;const C=Math.floor(E/60);return C<24?`${C} hours`:`${Math.floor(C/24)} days`}const h=y=>{const x=y.status==="Pending"?"In Progress":"Fulfilled";t(y.id,{status:x}),alert(`Request ${y.requestId} updated to ${x}`)},m=y=>{const x=`
Request ID: ${y.requestId}
Blood Type: ${y.bloodType}
Quantity: ${y.quantity} units
Patient: ${y.patientName||"Anonymous"}
Location: ${y.location}
Status: ${y.status}
Urgency: ${y.urgency||"Normal"}
Donors Matched: ${y.donorsMatched||0}
Time Elapsed: ${y.timeElapsed}
    `;alert(x.trim())},g=[{title:"ACTIVE DONORS",value:a.totalDonors.toLocaleString(),trend:"+12.5% vs last week",trendUp:!0,icon:"",color:"green"},{title:"ACTIVE REQUESTS",value:a.activeRequests.toString(),trend:"-8.3% vs yesterday",trendUp:!1,icon:"",color:"red"},{title:"SUCCESSFUL MATCHES",value:a.fulfilledRequests.toString(),trend:"+18.2% this month",trendUp:!0,icon:"",color:"blue"},{title:"LIVES SAVED",value:(a.fulfilledRequests*3).toLocaleString(),trend:"+25.7% all time",trendUp:!0,icon:"",color:"orange"}];return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-6 md:py-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"BloodConnect Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Welcome to your blood donation management system"})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[c.jsx("span",{className:"text-green-600 text-xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-green-800 font-medium",children:"System Status: All services operational"}),c.jsx("span",{className:"text-green-600 mx-2",children:""}),c.jsxs("span",{className:"text-green-600",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6",children:g.map((y,x)=>c.jsx(nv,{kpi:y},x))}),c.jsx(rv,{activeTab:i,setActiveTab:s}),i==="overview"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[c.jsx("div",{className:"lg:col-span-2",children:c.jsx(fv,{})}),c.jsx("div",{})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Recent Requests"}),c.jsx("div",{className:"space-y-4",children:l.length>0?l.map(y=>c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[c.jsxs("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:["Request #",y.requestId]}),y.urgency==="critical"||y.urgency==="Critical"?c.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold uppercase animate-pulse",children:"Critical"}):null,y.donorsMatched>0?c.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold",children:"matched"}):null]}),c.jsxs("p",{className:"text-gray-700 font-medium mb-4",children:[y.patientName?`${y.patientName} - `:"Emergency Surgery - ","Patient ID: P-",String(y.id).slice(-5)]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-red-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Blood Type"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.bloodType})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Units Needed"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.quantity})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-blue-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Donors Matched"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.donorsMatched||0})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-600 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Time Elapsed"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.timeElapsed||"Just now"})]})]})]}),c.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Notes:"})," ",y.location||"Trauma case - Multiple injuries requiring immediate transfusion"]})})]}),c.jsxs("div",{className:"flex flex-col gap-2 lg:min-w-[120px]",children:[c.jsxs("button",{onClick:()=>m(y),className:"flex items-center justify-center gap-2 w-full px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 hover:border-gray-400 transition-all duration-200 font-medium",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{children:"Details"})]}),c.jsxs("button",{onClick:()=>h(y),className:"flex items-center justify-center gap-2 w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105 active:scale-95 font-medium",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{children:"Update"})]})]})]})},y.id)):c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[c.jsx("p",{className:"text-gray-500 text-lg",children:"No recent requests"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Create a new blood request to get started"})]})})]})]})})}function Yk(){const[e,t]=P.useState(""),[n,i]=P.useState(""),[s,a]=P.useState(!1),[l,d]=P.useState(""),{signIn:h}=od(),m=Xt(),g=async y=>{y.preventDefault(),a(!0),d("");try{await h(e,n),m("/dashboard")}catch(x){d(x.message||"Failed to sign in")}finally{a(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"max-w-md w-full space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),c.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",c.jsx(Gt,{to:"/register",className:"font-medium text-red-600 hover:text-red-500",children:"create a new account"})]})]}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[l&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:l}),c.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),c.jsx(Ce,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Email address",value:e,onChange:y=>t(y.target.value),className:"rounded-t-md"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),c.jsx(Ce,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,placeholder:"Password",value:n,onChange:y=>i(y.target.value),className:"rounded-b-md"})]})]}),c.jsx("div",{children:c.jsx(ad,{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:s?"Signing in...":"Sign in"})})]})]})})}function Xk(){const[e,t]=P.useState(""),[n,i]=P.useState(""),[s,a]=P.useState(""),[l,d]=P.useState(!1),[h,m]=P.useState(""),{signUp:g}=od(),y=Xt(),x=async b=>{if(b.preventDefault(),d(!0),m(""),n!==s){m("Passwords do not match"),d(!1);return}try{await g(e,n),y("/dashboard")}catch(k){m(k.message||"Failed to create account")}finally{d(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"max-w-md w-full space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),c.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",c.jsx(Gt,{to:"/login",className:"font-medium text-red-600 hover:text-red-500",children:"sign in to existing account"})]})]}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[h&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:h}),c.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),c.jsx(Ce,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Email address",value:e,onChange:b=>t(b.target.value),className:"rounded-t-md"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),c.jsx(Ce,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,placeholder:"Password",value:n,onChange:b=>i(b.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),c.jsx(Ce,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,placeholder:"Confirm Password",value:s,onChange:b=>a(b.target.value),className:"rounded-b-md"})]})]}),c.jsx("div",{children:c.jsx(ad,{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:l?"Creating account...":"Create account"})})]})]})})}function eE(){return c.jsx(dw,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx(GS,{children:c.jsx(VS,{children:c.jsxs(KS,{children:[c.jsx(JS,{}),c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(YS,{}),c.jsx("main",{children:c.jsxs(iw,{children:[c.jsx(dt,{path:"/",element:c.jsx(hp,{})}),c.jsx(dt,{path:"/dashboard",element:c.jsx(hp,{})}),c.jsx(dt,{path:"/blood-request-portal",element:c.jsx(rk,{})}),c.jsx(dt,{path:"/donor-registration",element:c.jsx(dk,{})}),c.jsx(dt,{path:"/emergency-dashboard",element:c.jsx(Nk,{})}),c.jsx(dt,{path:"/critical-alerts",element:c.jsx(Lk,{})}),c.jsx(dt,{path:"/hospital-management-center",element:c.jsx(Mk,{})}),c.jsx(dt,{path:"/live-donor-map",element:c.jsx(qk,{})}),c.jsx(dt,{path:"/admin-analytics-center",element:c.jsx(Qk,{})}),c.jsx(dt,{path:"/login",element:c.jsx(Yk,{})}),c.jsx(dt,{path:"/register",element:c.jsx(Xk,{})}),c.jsx(dt,{path:"*",element:c.jsx(XS,{})})]})})]})]})})})})}function tE(){return c.jsx(eE,{})}Kl.createRoot(document.getElementById("root")).render(c.jsx(ii.StrictMode,{children:c.jsx(tE,{})}));
